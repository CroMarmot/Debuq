"use strict";(self.webpackChunkDebuq=self.webpackChunkDebuq||[]).push([[403],{4403:(se,H,m)=>{m.r(H),m.d(H,{GameModule:()=>ie});var d=m(177),T=m(6661),$=m(6850),t=m(4438);const rt=o=>[o];function ct(o,i){if(1&o){const e=t.RV6();t.j41(0,"a",3),t.bIt("click",function(){const s=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.activeLink=s)}),t.EFF(1),t.k0s()}if(2&o){const e=i.$implicit,n=t.XpG();t.Y8G("active",n.activeLink===e)("routerLink",t.eq3(3,rt,e)),t.R7$(),t.SpI(" ",e," ")}}let W=(()=>{class o{constructor(e){this.router=e,this.links=["mine-sweeper","tetris","gobang","sudoku"],this.activeLink=this.links[0]}ngOnInit(){this.router.navigate(["game",this.activeLink])}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(T.Ix))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-game-main"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[["tabPanel",""],["mat-tab-nav-bar","","color","primary",3,"tabPanel"],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"click","active","routerLink"]],template:function(n,s){if(1&n&&(t.j41(0,"nav",1),t.DNE(1,ct,2,5,"a",2),t.k0s(),t.j41(2,"mat-tab-nav-panel",null,0),t.nrm(4,"router-outlet"),t.k0s()),2&n){const r=t.sdS(3);t.Y8G("tabPanel",r),t.R7$(),t.Y8G("ngForOf",s.links)}},dependencies:[$.RI,$.Bu,$.hQ,$.Ql,d.pM,T.Wk,T.n3]})}return o})();var K=m(7575),M=m(8834),B=m(9631),y=m(2102),g=m(9417);function at(o,i){if(1&o&&(t.j41(0,"span",13),t.EFF(1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",-1===e.value?"\u{1f4a3}":e.value," ")}}function lt(o,i){1&o&&t.nrm(0,"span",13)}function ut(o,i){1&o&&(t.j41(0,"span",13),t.EFF(1," \u2757 "),t.k0s())}function ht(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",11),t.bIt("click",function(){const s=t.eBV(e).index,r=t.XpG().index,c=t.XpG();return t.Njj(c.leftClickBlock(r,s))})("contextmenu",function(){const s=t.eBV(e).index,r=t.XpG().index,c=t.XpG();return t.Njj(c.rightClickBlock(r,s))}),t.DNE(1,at,2,1,"span",12)(2,lt,1,0,"span",12)(3,ut,2,0,"span",12),t.k0s()}if(2&o){const e=i.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("ngIf",e.mark===n.SHOWMARK),t.R7$(),t.Y8G("ngIf",e.mark===n.UNMARK),t.R7$(),t.Y8G("ngIf",e.mark===n.FLAGMARK)}}function mt(o,i){if(1&o&&(t.j41(0,"div",9),t.DNE(1,ht,4,3,"div",10),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}const w=-1,dt=[1,1,1,0,0,-1,-1,-1],ft=[-1,0,1,-1,1,-1,0,1];class L{constructor(){this.mineArray=[],this.leftBombs=0,this.gameStatus=1}static createMines(i,e,n){const s=[];if(e*i<n)throw Error("Wrong mines number");for(let c=0;c<i;c++){const a=[];for(let l=0;l<e;l++)a.push({value:0,mark:0});s.push(a)}const r=new L;r.mineArray=s;for(let c=0;c<n;c++){const a=Math.floor(Math.random()*(i*e-c));let l=0,u=!1;for(let v=0;v<i;v++){for(let G=0;G<e;G++){if(s[v][G].value!==w){if(l===a){s[v][G].value=w,u=!0;break}l++}if(u)break}if(u)break}}for(let c=0;c<i;c++)for(let a=0;a<e;a++)if(s[c][a].value!==w){let l=0;r.forAround(c,a,u=>{u.value===w&&l++}),s[c][a].value=l}return r.leftBombs=r.countLeftBombs(),r}getMines(){return this.mineArray}getLeftBombs(){return this.leftBombs}forAround(i,e,n){const s=this.mineArray,r=s.length,c=r>0?s[0].length:0;for(let a=0;a<8;a++){const l=i+dt[a],u=e+ft[a];l<0||u<0||l>=r||u>=c||n(s[l][u],l,u)}}changeMark(i,e){const n=this.mineArray;let s=1;if(2===n[i][e].mark){let r=0;this.forAround(i,e,c=>{1===c.mark&&r++}),n[i][e].value===r&&this.forAround(i,e,(c,a,l)=>{if(1===n[a][l].mark)return;const u=this.minesOpen(a,l);(3===u||0===u)&&(s=u)})}else 0===n[i][e].mark?(n[i][e].mark=1,this.leftBombs=this.countLeftBombs()):1===n[i][e].mark&&(n[i][e].mark=0,this.leftBombs=this.countLeftBombs());return s}finishCheck(){const i=this.mineArray,e=i.length,n=e>0?i[0].length:0;let s=0,r=0;for(let c=0;c<e;c++)for(let a=0;a<n;a++)2===i[c][a].mark&&r++,i[c][a].value===w&&s++;if(r+s===e*n){for(let c=0;c<e;c++)for(let a=0;a<n;a++)i[c][a].mark=i[c][a].value===w?1:2;return this.leftBombs=0,this.gameStatus=0,this.gameStatus}return this.gameStatus}countLeftBombs(){const i=this.mineArray,e=i.length,n=e>0?i[0].length:0;let s=0;for(let r=0;r<e;r++)for(let c=0;c<n;c++)1===i[r][c].mark&&s--,i[r][c].value===w&&s++;return s}minesOpen(i,e){const n=this.mineArray;if(0===this.gameStatus||3===this.gameStatus)return this.gameStatus;if(2===n[i][e].mark)return this.gameStatus;const s=n.length,r=s>0?n[0].length:0;if(n[i][e].value===w){for(let c=0;c<s;c++)for(let a=0;a<r;a++)n[c][a].mark=2;return this.leftBombs=0,this.gameStatus=3,this.gameStatus}return 0===n[i][e].mark?(n[i][e].mark=2,0===n[i][e].value&&this.expand(i,e),this.leftBombs=this.countLeftBombs(),this.finishCheck()):this.gameStatus}expand(i,e){const n=this.mineArray;if(2===n[i][e].mark){const s=[[i,e]];let r=0;for(;r<s.length;){const c=s[r][0],a=s[r][1];0===n[c][a].value&&this.forAround(c,a,(l,u,v)=>{2!==l.mark&&s.push([u,v]),l.mark=2}),r++}}}}let J=(()=>{class o{constructor(){this.mines=[],this.leftBombs=0,this.col=10,this.row=5,this.bombs=7,this.UNMARK=0,this.FLAGMARK=1,this.SHOWMARK=2,this.msIns=null}createMines(){this.msIns=L.createMines(this.row,this.col,this.bombs),this.mines=this.msIns.getMines(),this.leftBombs=this.msIns.getLeftBombs()}leftClickBlock(e,n){if(!this.msIns||0===this.msIns.gameStatus||3===this.msIns.gameStatus)return;const s=this.msIns.minesOpen(e,n);this.mines=this.msIns.getMines(),this.leftBombs=this.msIns.getLeftBombs(),0===s?alert("Success"):3===s&&alert("Failed")}rightClickBlock(e,n){if(!this.msIns)return!1;const s=this.msIns.changeMark(e,n);return this.mines=this.msIns.getMines(),this.leftBombs=this.msIns.getLeftBombs(),0===s?alert("Success"):3===s&&alert("Failed"),!1}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-mine-sweeper"]],standalone:!0,features:[t.aNF],decls:20,vars:6,consts:[[1,"example-form"],["appearance","fill",1,"example-full-width"],["matInput","","placeholder","Ex. 7","name","row",3,"ngModelChange","ngModel"],["matInput","","placeholder","Ex. 10","name","col",3,"ngModelChange","ngModel"],["matInput","","placeholder","Ex. 5","name","bombs",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"],["mode","determinate",3,"value"],[1,"row-div"],["class","col-div",4,"ngFor","ngForOf"],[1,"col-div"],["class","button-span",3,"click","contextmenu",4,"ngFor","ngForOf"],[1,"button-span",3,"click","contextmenu"],["class","block-span",4,"ngIf"],[1,"block-span"]],template:function(n,s){1&n&&(t.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),t.EFF(3,"Row"),t.k0s(),t.j41(4,"input",2),t.mxI("ngModelChange",function(c){return t.DH7(s.row,c)||(s.row=c),c}),t.k0s()(),t.j41(5,"mat-form-field",1)(6,"mat-label"),t.EFF(7,"Col"),t.k0s(),t.j41(8,"input",3),t.mxI("ngModelChange",function(c){return t.DH7(s.col,c)||(s.col=c),c}),t.k0s()(),t.j41(9,"mat-form-field",1)(10,"mat-label"),t.EFF(11,"Bombs"),t.k0s(),t.j41(12,"input",4),t.mxI("ngModelChange",function(c){return t.DH7(s.bombs,c)||(s.bombs=c),c}),t.k0s()()(),t.j41(13,"button",5),t.bIt("click",function(){return s.createMines()}),t.EFF(14,"Generate"),t.k0s(),t.j41(15,"h2"),t.EFF(16),t.k0s(),t.nrm(17,"mat-progress-bar",6),t.j41(18,"div",7),t.DNE(19,mt,2,1,"div",8),t.k0s()),2&n&&(t.R7$(4),t.R50("ngModel",s.row),t.R7$(4),t.R50("ngModel",s.col),t.R7$(4),t.R50("ngModel",s.bombs),t.R7$(4),t.SpI("Left bombs:",s.leftBombs,""),t.R7$(),t.Y8G("value",100*s.leftBombs/s.bombs),t.R7$(2),t.Y8G("ngForOf",s.mines))},dependencies:[g.YN,g.qT,g.me,g.BC,g.cb,g.vS,g.cV,y.RG,y.rl,y.nJ,B.fS,B.fg,M.Hl,M.$z,K.PO,K.HM,d.pM,d.bT],styles:[".row-div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.row-div[_ngcontent-%COMP%]   .col-div[_ngcontent-%COMP%]{display:flex;flex-direction:row}.row-div[_ngcontent-%COMP%]   .col-div[_ngcontent-%COMP%]   .button-span[_ngcontent-%COMP%]{width:3em;height:3em;border:1px black solid;display:flex;justify-content:center;align-items:center}.row-div[_ngcontent-%COMP%]   .col-div[_ngcontent-%COMP%]   .button-span[_ngcontent-%COMP%]   .block-span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]})}return o})();var f=function(o){return o[o.EMPTY=0]="EMPTY",o[o.STRAIGHT=1]="STRAIGHT",o[o.SEVEN=2]="SEVEN",o[o.REVSEVEN=3]="REVSEVEN",o[o.Z=4]="Z",o[o.REVZ=5]="REVZ",o[o.SQUARE=6]="SQUARE",o[o.T=7]="T",o}(f||{});const gt={[f.STRAIGHT]:{color:"#ff0"},[f.SEVEN]:{color:"#0f0"},[f.REVSEVEN]:{color:"#0ff"},[f.Z]:{color:"#f0f"},[f.REVZ]:{color:"#f00"},[f.T]:{color:"#00f"},[f.SQUARE]:{color:"#000"}};function D(o){if(!o)throw console.trace(),Error("assert failed")}class k{constructor(i=f.EMPTY,e=[],n=[]){this.type=f.EMPTY,this.desc=[],this.rotateCenter=[],this.curRotate=0,i!==f.EMPTY&&(D(e.length>0),D(2===n.length),D((n[0]+n[1])%2==0)),e.forEach(s=>{D(2===s.length)}),this.type=i,this.desc=e,this.rotateCenter=n}rotateL(i=1){const n=this.rotateCenter,s=[];return this.desc.forEach(r=>{s.push([(n[0]+i*(2*r[1]+1-n[1])-1)/2,(n[1]-i*(2*r[0]+1-n[0])-1)/2])}),new k(this.type,s,this.rotateCenter)}rotateR(i=1){return this.rotateL(-1*i)}rotateList(){if(0!==this.curRotate)throw new Error("Can't get rotateList from none-init tetris item.");const i=[];i.push(this);let e=this.rotateL();return e.curRotate+=1,i.push(e),e=e.rotateL(),e.curRotate+=1,i.push(e),e=e.rotateL(),e.curRotate+=1,i.push(e),i}}const A=[new k(f.STRAIGHT,[[1,0],[1,1],[1,2],[1,3]],[4,4]),new k(f.REVSEVEN,[[0,0],[0,1],[0,2],[1,0]],[1,3]),new k(f.SEVEN,[[0,0],[1,0],[2,0],[0,1]],[3,1]),new k(f.REVZ,[[0,0],[0,1],[1,1],[1,2]],[3,3]),new k(f.Z,[[0,0],[1,0],[1,1],[2,1]],[3,3]),new k(f.SQUARE,[[0,0],[1,0],[0,1],[1,1]],[2,2]),new k(f.T,[[1,0],[0,1],[1,1],[2,1]],[3,3])];var I=m(9928),O=function(o){return o[o.ROTATE_LEFT=1]="ROTATE_LEFT",o[o.ROTATE_RIGHT=2]="ROTATE_RIGHT",o[o.MOVE_LEFT=3]="MOVE_LEFT",o[o.MOVE_RIGHT=4]="MOVE_RIGHT",o[o.MOVE_DOWN=5]="MOVE_DOWN",o}(O||{}),x=function(o){return o[o.GAME_UNINIT=0]="GAME_UNINIT",o[o.GAME_RUNNING=1]="GAME_RUNNING",o[o.GAME_END=2]="GAME_END",o}(x||{});let p=(()=>{class o{static#t=this.TETRIS_OP=O;static#e=this.TETRIS_STAT=x;constructor(e,n){this.stats=x.GAME_UNINIT,this.curItem=new k,this.curXY=[0,0],this.matrixSubject=new I.t([]),this.score=new I.t(0),this.matrix=[],this.width=e,this.height=n;for(let s=0;s<n;s++){const r=[];for(let c=0;c<e;c++)r.push(0);this.matrix.push(r)}}userOp(e){if(this.stats!==x.GAME_END){switch(e){case O.ROTATE_LEFT:{const n=this.curItem.rotateL();this.conflictTest(n,this.curXY[0],this.curXY[1])||(this.curItem=n);break}case O.ROTATE_RIGHT:{const n=this.curItem.rotateR();this.conflictTest(n,this.curXY[0],this.curXY[1])||(this.curItem=n);break}case O.MOVE_LEFT:this.moveCur(-1,0);break;case O.MOVE_RIGHT:this.moveCur(1,0);break;case O.MOVE_DOWN:this.moveCur(0,1)||this.nextRound()}this.updateMatrix()}}outBoundTest(e,n,s){let r=!1;return e.desc.forEach(c=>{s+c[1]>=this.height&&(r=!0)}),r}clearRow(){const e=Array.from(this.matrix,()=>!1);for(let s=this.matrix.length-1;s>=0;s--){let c=!0;this.matrix[s].forEach(a=>{0===a&&(c=!1)}),c&&(e[s]=!0)}this.score.next(this.score.getValue()+function pt(o){return o*o}(e.filter(s=>s).length));let n=this.matrix.length-1;for(let s=this.matrix.length-1;s>=0;s--){for(;n>=0&&e[n];)n--;if(s!==n)for(let r=0;r<this.matrix[s].length;r++)this.matrix[s][r]=n<0?0:this.matrix[n][r];n--}}nextRound(){if(this.curItem?this.curItem.desc.forEach(e=>{this.matrix[this.curXY[1]+e[1]][(this.curXY[0]+e[0]+this.width)%this.width]=-this.curItem.type}):console.error("next round with no this.curItem"),this.clearRow(),this.curItem){const e=A[Math.floor(A.length*Math.random())];this.conflictTest(e,0,0)?this.stats=x.GAME_END:(this.curXY=[0,0],this.curItem=e)}else console.error("next round with no this.curItem")}moveCur(e,n){const s=(this.curXY[0]+e+this.width)%this.width,r=this.curXY[1]+n;return!this.conflictTest(this.curItem,s,r)&&(this.curXY[0]=s,this.curXY[1]=r,this.updateMatrix(),!0)}nextTick(){return this.userOp(O.MOVE_DOWN),this.stats}conflictTest(e,n,s){if(this.outBoundTest(e,n,s))return!0;let r=!1;return e.desc.forEach(c=>{const l=s+c[1];(l<0||0!==this.matrix[l][(n+c[0]+this.width)%this.width])&&(r=!0)}),r}conflict(){return this.curItem?this.conflictTest(this.curItem,this.curXY[0],this.curXY[1]):(console.error("curItem empty"),!1)}start(){this.stats===x.GAME_UNINIT&&(this.stats=x.GAME_RUNNING,this.curItem=A[Math.floor(A.length*Math.random())].rotateL().rotateR(),this.updateMatrix())}updateMatrix(){const e=[];return this.matrix.forEach(n=>{const s=[];n.forEach(r=>{s.push(r)}),e.push(s)}),this.stats!==x.GAME_END&&this.curItem&&this.curItem.desc.forEach(n=>{e[this.curXY[1]+n[1]][(this.curXY[0]+n[0]+this.width)%this.width]=this.curItem.type}),this.matrixSubject.next(e),e}getMatrixOb(){return this.matrixSubject.asObservable()}getScoreOb(){return this.score.asObservable()}}return o})();var X=m(5286),_t=m(5817),Z=m(1080),bt=m(9132);function kt(o){const{subscriber:i,counter:e,period:n}=o;i.next(e),this.schedule({subscriber:i,counter:e+1,period:n},n)}const vt={a:p.TETRIS_OP.MOVE_LEFT,d:p.TETRIS_OP.MOVE_RIGHT,w:p.TETRIS_OP.ROTATE_RIGHT,s:p.TETRIS_OP.ROTATE_LEFT," ":p.TETRIS_OP.MOVE_DOWN,Enter:p.TETRIS_OP.MOVE_DOWN,ArrowLeft:p.TETRIS_OP.MOVE_LEFT,ArrowRight:p.TETRIS_OP.MOVE_RIGHT,ArrowUp:p.TETRIS_OP.ROTATE_RIGHT,ArrowDown:p.TETRIS_OP.ROTATE_LEFT};var F=m(7605);class Mt{constructor(){this.minX=0,this.maxX=0,this.minY=0,this.maxY=0,this.list=[]}}function q(o){if(!o)throw console.trace(),Error("assert failed")}const Ot=o=>({active:o});function xt(o,i){if(1&o&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&o){const e=i.index,n=t.XpG().$implicit;t.R7$(),t.SpI(" ",e+n.minX," ")}}function Et(o,i){1&o&&t.nrm(0,"div",11),2&o&&t.Y8G("ngClass",t.eq3(1,Ot,0!==i.$implicit))}function It(o,i){if(1&o&&(t.j41(0,"div",4)(1,"div",9),t.EFF(2),t.k0s(),t.DNE(3,Et,1,3,"div",10),t.k0s()),2&o){const e=i.$implicit,n=i.index,s=t.XpG().$implicit;t.R7$(2),t.SpI(" ",n+s.minY," "),t.R7$(),t.Y8G("ngForOf",e)}}function Ft(o,i){if(1&o&&(t.j41(0,"div",3)(1,"div",4),t.nrm(2,"div",5),t.DNE(3,xt,2,1,"div",6),t.k0s(),t.DNE(4,It,4,2,"div",7),t.nrm(5,"span",8),t.k0s()),2&o){const e=i.$implicit,n=t.XpG(),s=n.$implicit,r=n.index,c=t.XpG();t.R7$(3),t.Y8G("ngForOf",e.list[0]),t.R7$(),t.Y8G("ngForOf",e.list),t.R7$(),t.Y8G("ngStyle",c.getCenterStyle(c.tbs[r],s[0]))}}function Nt(o,i){if(1&o&&(t.j41(0,"div")(1,"div"),t.EFF(2),t.k0s(),t.DNE(3,Ft,6,3,"div",2),t.k0s()),2&o){const e=i.$implicit,n=i.index,s=t.XpG();t.R7$(2),t.SpI("type: ",s.tbs[n].type,""),t.R7$(),t.Y8G("ngForOf",e)}}let Gt=(()=>{class o{constructor(){this.tbs=A,this.grids=[],this.tbs.forEach(e=>{this.grids.push(function wt(o){const i=[];let e=o[0].desc[0][0],n=o[0].desc[0][0],s=o[0].desc[0][1],r=o[0].desc[0][1];return o.forEach(c=>{const a=c.desc;q(a.length>0),a.forEach(l=>{e=Math.min(e,l[0]),n=Math.max(n,l[0]),s=Math.min(s,l[1]),r=Math.max(r,l[1])})}),o.forEach(c=>{const a=c.desc;q(a.length>0);const l=new Mt;l.minX=e,l.maxX=n,l.minY=s,l.maxY=r;for(let u=l.minY;u<=l.maxY;u++){const v=[];for(let G=l.minX;G<=l.maxX;G++)v.push(0);l.list.push(v)}a.forEach(u=>{l.list[u[1]-l.minY][u[0]-l.minX]=1}),i.push(l)}),i}(e.rotateList()))})}getCenterStyle(e,n){return{left:1*(1+e.rotateCenter[0]/2-n.minX)-.2+"em",top:1*(1+e.rotateCenter[1]/2-n.minY)-.2+"em"}}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-tetris-preview"]],standalone:!0,features:[t.aNF],decls:4,vars:1,consts:[[1,"preview"],[4,"ngFor","ngForOf"],["class","group",4,"ngFor","ngForOf"],[1,"group"],[1,"row"],[1,"block"],["class","block axis",4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"rotate-center",3,"ngStyle"],[1,"block","axis"],["class","block",3,"ngClass",4,"ngFor","ngForOf"],[1,"block",3,"ngClass"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"preview"),t.k0s(),t.DNE(3,Nt,4,2,"div",1),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngForOf",s.grids))},dependencies:[d.pM,d.YU,d.B3],styles:[".preview[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{position:relative;border:lightcoral 3px solid;display:inline-block}.preview[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.preview[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{display:inline-flex;width:1em;height:1em;box-sizing:border-box;background-color:#fff;justify-content:center;align-items:center}.preview[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .block.active[_ngcontent-%COMP%]{background-color:#add8e6}.preview[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .block.axis[_ngcontent-%COMP%]{background-color:#90ee90}.preview[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .rotate-center[_ngcontent-%COMP%]{position:absolute;background-color:red;border-radius:50%;box-sizing:border-box;width:.4em;height:.4em}"]})}return o})();const yt=(o,i)=>({active:o,exist:i}),Pt=o=>({"background-color":o});function Rt(o,i){1&o&&t.nrm(0,"app-tetris-preview")}function St(o,i){if(1&o&&t.nrm(0,"div",13),2&o){const e=i.$implicit,n=t.XpG(2);t.Y8G("ngClass",t.l_i(2,yt,e>0,0!==e))("ngStyle",t.eq3(5,Pt,n.styleCfg[e>0?e:-e].color||"#999"))}}function Tt(o,i){if(1&o&&(t.j41(0,"div",11),t.DNE(1,St,1,7,"div",12),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}let tt=(()=>{class o{constructor(){this.openPreview=!1,this.destroyed$=new X.B7,this.row=20,this.col=8,this.styleCfg=gt,this.matrix=[],this.scoreOb$=new I.t(0),this.gameDesOb$=new I.t(""),this.gameCore=null}newGame(){this.gameDesOb$&&(this.gameDesOb$.next(),this.gameDesOb$.complete()),this.gameDesOb$=new X.B7,this.gameCore=new p(this.col,this.row),this.gameCore.start(),this.gameCore.getMatrixOb().pipe((0,F.Q)(this.destroyed$)).subscribe(n=>{if(this.matrix.length===n.length){if(n.length>0){if(this.matrix[0].length!==n[0].length)return void(this.matrix=n);n.forEach((s,r)=>{s.forEach((c,a)=>{this.matrix[r][a]!==c&&(this.matrix[r][a]=c)})})}}else this.matrix=n}),this.scoreOb$=this.gameCore.getScoreOb().pipe((0,F.Q)(this.destroyed$));const e=function Ct(o=0,i=Z.b){return(!(0,bt.k)(o)||o<0)&&(o=0),(!i||"function"!=typeof i.schedule)&&(i=Z.b),new _t.c(e=>(e.add(i.schedule(kt,o,{subscriber:e,counter:0,period:o})),e))}(1e3).pipe((0,F.Q)(this.destroyed$),(0,F.Q)(this.gameDesOb$)).subscribe(()=>{this.gameCore&&this.gameCore.nextTick()===p.TETRIS_STAT.GAME_END&&e.unsubscribe()})}handleKeyboardEvent(e){this.clickEvent(e.key)}clickEvent(e){const n=vt[e];n&&this.gameCore&&this.gameCore.userOp(n)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-tetris"]],hostBindings:function(n,s){1&n&&t.bIt("keydown",function(c){return s.handleKeyboardEvent(c)},!1,t.EBC)},standalone:!0,features:[t.aNF],decls:23,vars:7,consts:[[1,"custom-CFG"],["mat-raised-button","",3,"click"],[4,"ngIf"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["matInput","","placeholder","Ex. 7","name","row",3,"ngModelChange","ngModel"],["matInput","","placeholder","Ex. 7","name","col",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"],[1,"game"],[1,"score"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","block",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"block",3,"ngClass","ngStyle"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return s.openPreview=!s.openPreview}),t.EFF(2,"switch preview"),t.k0s(),t.DNE(3,Rt,1,0,"app-tetris-preview",2),t.j41(4,"div")(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),t.EFF(8,"Row"),t.k0s(),t.j41(9,"input",5),t.mxI("ngModelChange",function(c){return t.DH7(s.row,c)||(s.row=c),c}),t.k0s()(),t.j41(10,"mat-form-field",4)(11,"mat-label"),t.EFF(12,"Col"),t.k0s(),t.j41(13,"input",6),t.mxI("ngModelChange",function(c){return t.DH7(s.col,c)||(s.col=c),c}),t.k0s()()(),t.j41(14,"button",7),t.bIt("click",function(){return s.newGame()}),t.EFF(15," Generate"),t.k0s()()(),t.j41(16,"div",8)(17,"h1"),t.EFF(18,"Score:"),t.j41(19,"span",9),t.EFF(20),t.nI1(21,"async"),t.k0s()(),t.DNE(22,Tt,2,1,"div",10),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngIf",s.openPreview),t.R7$(6),t.R50("ngModel",s.row),t.R7$(4),t.R50("ngModel",s.col),t.R7$(7),t.JRh(t.bMT(21,5,s.scoreOb$)),t.R7$(2),t.Y8G("ngForOf",s.matrix))},dependencies:[M.Hl,M.$z,d.bT,Gt,g.YN,g.qT,g.me,g.BC,g.cb,g.vS,g.cV,y.RG,y.rl,y.nJ,B.fS,B.fg,d.pM,d.YU,d.B3,d.Jj],styles:[".game[_ngcontent-%COMP%]{border:3px;box-sizing:border-box;display:inline-block;background-color:#ffffe0}.game[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{color:red}.game[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;box-sizing:border-box}.game[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{width:.5em;height:.5em;border:.5px solid darkgray;display:inline-block;box-sizing:border-box;background-color:#d3d3d3}.game[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .block.active[_ngcontent-%COMP%]{border-radius:50%}.game[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .block.exist[_ngcontent-%COMP%]{background-color:pink}"]})}return o})();function et(o){if(!o)throw console.trace(),Error("assert failed")}var h=function(o){return o[o.EMPTY=0]="EMPTY",o[o.BLACK=1]="BLACK",o[o.WHITE=2]="WHITE",o}(h||{}),b=function(o){return o[o.UNINIT=0]="UNINIT",o[o.RUNNING=1]="RUNNING",o[o.WHITEWIN=2]="WHITEWIN",o[o.BLACKWIN=3]="BLACKWIN",o}(b||{});class At{constructor(i,e){this.order=[],this.stats=b.UNINIT,this.nextColor=h.BLACK,this.matrix=[],this.matrixSubject=new I.t(this.matrix),this.nextColorSubject=new I.t(this.nextColor),this.statsSubject=new I.t(this.stats),this.width=i,this.height=e,this.matrix=[];for(let n=0;n<e;n++){const s=[];for(let r=0;r<i;r++)s.push(h.EMPTY);this.matrix.push(s)}this.matrixSubject.next(this.matrix)}updateNextColor(){this.nextColor===h.BLACK?this.nextColor=h.WHITE:this.nextColor===h.WHITE&&(this.nextColor=h.BLACK),this.nextColorSubject.next(this.nextColor)}previewNextColor(){this.nextColor===h.BLACK?this.nextColor=h.WHITE:this.nextColor===h.WHITE&&(this.nextColor=h.BLACK),this.nextColorSubject.next(this.nextColor)}checkWinner(){const i=[[1,0],[0,1],[1,1],[1,-1]];for(let e=0;e<this.height;e++)for(let n=0;n<this.width;n++)if(this.matrix[e][n]!==h.EMPTY)for(const s of i){let r=!0;for(let c=1;c<5;c++){const a=e+c*s[0],l=n+c*s[1];(a<0||a>=this.height||l<0||l>=this.width||this.matrix[a][l]!==this.matrix[e][n])&&(r=!1)}if(r)return void(this.matrix[e][n]===h.WHITE?this.setStats(b.WHITEWIN):this.matrix[e][n]===h.BLACK&&this.setStats(b.BLACKWIN))}}start(){this.stats===b.UNINIT&&this.setStats(b.RUNNING)}setStats(i){this.stats=i,this.statsSubject.next(i)}putChess(i,e){return et(i>=0&&i<this.height),et(e>=0&&e<this.width),this.stats===b.RUNNING&&this.matrix[i][e]===h.EMPTY&&(this.order.push([i,e]),this.matrix[i][e]=this.nextColor,this.matrixSubject.next(this.matrix),this.updateNextColor(),this.checkWinner(),!0)}takeBack(){if(this.stats===b.RUNNING){if(0===this.order.length)return;const i=this.order.pop();this.matrix[i[0]][i[1]]=h.EMPTY,this.matrixSubject.next(this.matrix),this.previewNextColor()}}getMatrixOb(){return this.matrixSubject.asObservable()}getNextColorOb(){return this.nextColorSubject.asObservable()}getStatsOb(){return this.statsSubject.asObservable()}}const $t=o=>[o];function Bt(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){const s=t.eBV(e).index,r=t.XpG().index,c=t.XpG();return t.Njj(c.putChess(r,s))}),t.j41(1,"div",6),t.nrm(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10),t.k0s(),t.j41(6,"div",11),t.nrm(7,"div",12),t.k0s()()}if(2&o){const e=i.$implicit,n=t.XpG(2);t.R7$(7),t.Y8G("ngClass",t.eq3(1,$t,e===n.CHESS.EMPTY?"":e===n.CHESS.WHITE?"white":"black"))}}function Dt(o,i){if(1&o&&(t.j41(0,"div",3),t.DNE(1,Bt,8,3,"div",4),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}let nt=(()=>{class o{constructor(){this.destroy$=new X.B7,this.CHESS=h,this.gameIns=null,this.stats="",this.nextColor="",this.gameIns=new At(19,19),this.grids$=this.gameIns.getMatrixOb().pipe((0,F.Q)(this.destroy$)),this.stats$=this.gameIns.getStatsOb().pipe((0,F.Q)(this.destroy$)),this.nextColor$=this.gameIns.getNextColorOb().pipe((0,F.Q)(this.destroy$)),this.gameIns.start(),this.stats$.subscribe(e=>{this.stats={[b.RUNNING]:"RUNNING",[b.WHITEWIN]:"WHITE WIN",[b.BLACKWIN]:"BLACK WIN"}[Number(e)]||String(e)}),this.nextColor$.subscribe(e=>{this.nextColor={[h.BLACK]:"BLACK",[h.WHITE]:"WHITE"}[Number(e)]||String(e)})}putChess(e,n){this.gameIns&&this.gameIns.putChess(e,n)}takeBack(){this.gameIns&&this.gameIns.takeBack()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-gobang"]],standalone:!0,features:[t.aNF],decls:9,vars:5,consts:[[1,"gobang"],["mat-raised-button","","color","primary",3,"click"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","grid",3,"click",4,"ngFor","ngForOf"],[1,"grid",3,"click"],[1,"background"],[1,"bg-quarter","b-r","b-b"],[1,"bg-quarter","b-l","b-b"],[1,"bg-quarter","b-r","b-t"],[1,"bg-quarter","b-l","b-t"],[1,"chess"],[1,"ins",3,"ngClass"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2),t.k0s(),t.j41(3,"h2"),t.EFF(4),t.k0s(),t.j41(5,"button",1),t.bIt("click",function(){return s.takeBack()}),t.EFF(6,"Back"),t.k0s(),t.DNE(7,Dt,2,1,"div",2),t.nI1(8,"async"),t.k0s()),2&n&&(t.R7$(2),t.SpI("State: ",s.stats,""),t.R7$(2),t.SpI("Next Color: ",s.nextColor,""),t.R7$(3),t.Y8G("ngForOf",t.bMT(8,3,s.grids$)))},dependencies:[M.Hl,M.$z,d.pM,d.YU,d.Jj],styles:[".gobang[_ngcontent-%COMP%]{display:flex;flex-direction:column}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{background-color:#d3d3d3;display:flex;position:relative;width:1em;height:1em}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;display:flex;flex-wrap:wrap;box-sizing:border-box}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .bg-quarter[_ngcontent-%COMP%]{display:inline-block;box-sizing:border-box;width:50%;height:50%}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .b-r[_ngcontent-%COMP%]{border-right:1px solid darkgrey}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .b-l[_ngcontent-%COMP%]{border-left:1px solid darkgrey}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .b-t[_ngcontent-%COMP%]{border-top:1px solid darkgrey}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .b-b[_ngcontent-%COMP%]{border-bottom:1px solid darkgrey}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .chess[_ngcontent-%COMP%]{position:absolute;display:inline-flex;width:100%;height:100%;top:0;left:0;align-items:center;justify-content:center}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .chess[_ngcontent-%COMP%]   .ins[_ngcontent-%COMP%]{border-radius:50%;width:50%;height:50%}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .chess[_ngcontent-%COMP%]   .ins.black[_ngcontent-%COMP%]{background-color:#000}.gobang[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .chess[_ngcontent-%COMP%]   .ins.white[_ngcontent-%COMP%]{background-color:#fff}"]})}return o})();var Vt=m(4119);const Yt=o=>({selected:o});function Lt(o,i){if(1&o){const e=t.RV6();t.j41(0,"span",2),t.bIt("click",function(){const s=t.eBV(e).index,r=t.XpG();return t.Njj(r.selectI(s))}),t.EFF(1),t.k0s()}if(2&o){const e=i.$implicit,n=i.index,s=t.XpG();t.Y8G("ngClass",t.eq3(3,Yt,s.selectGroup[n])),t.R7$(),t.Lme(" ","\u6843\u6885\u5fc3\u65b9\u738b"[e.t0]," ",e.t1," ")}}let Xt=(()=>{class o{constructor(){this.myCards=[],this.selectGroup=[],this.curTurn=0,this.readyGroup=[],this.lastPut={},this.uid=-1,this.webSubject=(0,Vt.K)("ws://localhost:3000/ws"),this.webSubject.subscribe(e=>{"uid"===e.op?this.uid=e.uid:"cards"===e.op?(this.myCards=e.cards.inHand,this.selectGroup=[],e.cards.inHand.forEach(()=>{this.selectGroup.push(!1)})):"curTurn"===e.op?this.curTurn=e.curTurn:"lastPut"===e.op&&(this.lastPut=e.lastPut)},e=>console.error(e),()=>console.log("complete"))}selectI(e){this.selectGroup[e]=!this.selectGroup[e]}clear(){this.webSubject.next({op:"clear"})}ready(){this.webSubject.next({op:"ready"})}play(){const e=[];this.selectGroup.forEach((n,s)=>{n&&e.push(s)}),this.webSubject.next({op:"play",arr:e})}skip(){this.webSubject.next({op:"skip"})}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-doudizhu"]],standalone:!0,features:[t.aNF],decls:19,vars:4,consts:[[3,"click"],["class","card",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"card",3,"click","ngClass"]],template:function(n,s){1&n&&(t.EFF(0,"uid:"),t.j41(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"button",0),t.bIt("click",function(){return s.ready()}),t.EFF(4,"Ready"),t.k0s(),t.j41(5,"button",0),t.bIt("click",function(){return s.clear()}),t.EFF(6,"Clear"),t.k0s(),t.j41(7,"div"),t.EFF(8),t.k0s(),t.j41(9,"span"),t.EFF(10),t.k0s(),t.j41(11,"div")(12,"h1"),t.EFF(13,"Cards"),t.k0s(),t.DNE(14,Lt,2,5,"span",1),t.j41(15,"button",0),t.bIt("click",function(){return s.play()}),t.EFF(16,"Play"),t.k0s(),t.j41(17,"button",0),t.bIt("click",function(){return s.skip()}),t.EFF(18,"Skip"),t.k0s()()),2&n&&(t.R7$(2),t.JRh(s.uid),t.R7$(6),t.SpI("readyGroup:",s.readyGroup,""),t.R7$(2),t.SpI("current turn: ",s.curTurn,""),t.R7$(4),t.Y8G("ngForOf",s.myCards))},dependencies:[d.pM,d.YU],styles:[".card.selected[_ngcontent-%COMP%]{border:1px red solid}"]})}return o})();class it{constructor(i){this.value=0,this.leftPossibleNum=i,this.impossibleValue=new Array(i+1)}}class V{static getNewSudokuAbstract(i,e){return new V(i,e)}constructor(i,e){if(i<=0||e<i)throw new Error("SudokuAbstract parameter error");this.numberNum=i,this.len=e,this.data=new Array(e);for(let n=0;n<e;n++)this.data[n]=new it(i)}validIndexCheck(i){if(i<0||i>=this.len)throw new Error("invalid index")}validValueCheck(i){if(i<0||i>this.numberNum)throw new Error("invalid value")}getGrid(i){return this.validIndexCheck(i),this.data[i]}setGrid(i,e){this.validIndexCheck(i),this.validValueCheck(e),this.data[i].value=e}getData(i){const e=new Array(this.len);for(let n=0;n<this.len;n++)e[n]=this.data[n].value;i.push(e)}fillcheck(){for(let i=0;i<this.len;i++)if(0===this.data[i].value)return!1;return!0}fork(i){i.numberNum=this.numberNum,i.len=this.len,i.data=new Array(this.len);for(let e=0;e<this.len;e++){i.data[e]=new it(this.numberNum),i.data[e].value=this.data[e].value,i.data[e].leftPossibleNum=this.data[e].leftPossibleNum,i.data[e].impossibleValue=new Array(this.numberNum+1);for(let n=0;n<this.numberNum+1;n++)i.data[e].impossibleValue[n]=this.data[e].impossibleValue[n]}}}class z{static getNewSdkSolver(i,e){return new z(i,e)}constructor(i,e){this.resultSize=0,this.isUpdate=!1,this.numberNum=i,this.len=e,this.relations=new Array,this.gridsRelation=new Array;for(let n=0;n<e;n++)this.gridsRelation.push(new Array);this.sdka=V.getNewSudokuAbstract(i,e)}initial(i,e){i===this.sdka&&(this.resultSize=e);for(let n=0;n<this.len;n++)i.getGrid(n).leftPossibleNum=this.numberNum,i.getGrid(n).impossibleValue=new Array(this.numberNum+1);for(let n=0;n<this.len;n++)this.updateImpossible(i,n)}gridonlyres(i,e){const n=i.getGrid(e);if(0===n.value)if(1===n.leftPossibleNum){let s=0;for(let r=1;r<=this.numberNum;r++)n.impossibleValue[r]||(s=r);i.setGrid(e,s),this.updateImpossible(i,e)}else if(0===n.leftPossibleNum)throw new Error(`BAD SODUKU: CONFLICT ${e}`)}relonlypos(i,e){const n=this.relations[e];for(let s=1;s<=this.numberNum;s++){const r=new Array(this.numberNum);let a,c=this.numberNum;for(a=0;a<this.numberNum;a++){const l=n[a];if(i.getGrid(l).value===s)break;(0!==i.getGrid(l).value||i.getGrid(l).impossibleValue[s])&&(c--,r[a]=!0)}if(a===this.numberNum)if(1===c){let l=-1;for(a=0;a<this.numberNum;a++)r[a]||(l=n[a]);i.setGrid(l,s),this.updateImpossible(i,e)}else if(0===c)throw new Error(`BAD SODUKU: CONFLICT RELATION ${e}`)}}exclusionMethod(i){let e;const n=this.relations.length;for(this.isUpdate=!0;this.isUpdate;){for(this.isUpdate=!1,e=0;e<this.len;e++)this.gridonlyres(i,e);for(e=0;e<n;e++)this.relonlypos(i,e)}}updateImpossible(i,e){const n=i.getGrid(e);if(0===n.value)return;this.isUpdate=!0;const s=n.value,r=this.gridsRelation[e];for(const c of r){const a=this.relations[c];for(let l=0;l<this.numberNum;l++){const u=a[l];0===i.getGrid(u).value&&(i.getGrid(u).impossibleValue[s]||(i.getGrid(u).impossibleValue[s]=!0,i.getGrid(u).leftPossibleNum--))}}}enumerationMethod(i,e){const n=new V(1,1);let s;for(s=0;s<this.len&&0!==i.getGrid(s).value;s++);if(s===this.len)throw new Error("fill all shouldn't go here");const r=new Array,c=i.getGrid(s);let a;for(a=1;a<=this.numberNum;a++)if(!c.impossibleValue[a]){i.fork(n),n.getGrid(s).value=a;try{const l=this._calculate(n,e);if(0!==l.length&&l.forEach(u=>{r.push(u)}),0===this.resultSize)break}catch(l){l.message.startsWith("BAD SODUKU:")||(console.error(l),console.trace())}}return r}calculate(i){return this._calculate(this.sdka,i)}_calculate(i,e){const n=new Array;return this.initial(i,e),this.exclusionMethod(i),i.fillcheck()?(this.resultSize--,i.getData(n),n):this.enumerationMethod(i,e)}setPuzzle(i){this._setPuzzle(this.sdka,i)}_setPuzzle(i,e){if(e.length!==this.len)throw new Error("setPuzzle wrong length");for(let n=0;n<this.len;n++)i.setGrid(n,e[n])}setRelations(i){for(const e of i){if(e.length!==this.numberNum)throw new Error("wrong rel length");const n=new Array(this.len);let s;for(s=0;s<this.numberNum;s++){if(e[s]<0||e[s]>=this.len)throw new Error("wrong rel index");if(n[e[s]])throw new Error("relation conflict");n[e[s]]=!0}const r=new Array(this.numberNum);for(s=0;s<this.numberNum;s++)r[s]=e[s];this.relations.push(r);const c=this.relations.length-1;for(s=0;s<this.numberNum;s++)this.gridsRelation[e[s]].push(c)}}}class Y{static getStandardSudoku(i){return new Y(i)}constructor(i){const e=i*i;this.sdks=z.getNewSdkSolver(e,e*e);const n=new Array(3*e).fill([]).map(()=>new Array(e).fill(0));let s=0;for(let r=0;r<e;r++)for(let c=0;c<e;c++)n[s+r][c]=r*e+c;s+=e;for(let r=0;r<e;r++)for(let c=0;c<e;c++)n[s+r][c]=c*e+r;s+=e;for(let r=0;r<e;r++)for(let c=0;c<e;c++)n[s+r][c]=Math.floor(r/i)*i*e+r%i*i+Math.floor(c/i)*e+c%i;this.sdks.setRelations(n)}setPuzzle(i){this.sdks.setPuzzle(i)}solve(){const i=this.sdks.calculate(-1);return 1===i.length?i[0]:0===i.length?[0]:i[0]}}function zt(o,i){if(1&o&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&o){const e=i.$implicit,n=i.index,s=t.XpG().index,r=t.XpG();t.AVh("highlight",r.highlight(s,n)),t.R7$(),t.SpI(" ",e||""," ")}}function Ut(o,i){if(1&o&&(t.j41(0,"div",5),t.DNE(1,zt,2,3,"div",6),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}function Ht(o,i){if(1&o&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&o){const e=i.$implicit,n=i.index,s=t.XpG().index,r=t.XpG();t.AVh("highlight",r.highlight(s,n)),t.R7$(),t.SpI(" ",e||""," ")}}function Wt(o,i){if(1&o&&(t.j41(0,"div",5),t.DNE(1,Ht,2,3,"div",6),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}function Kt(o,i){if(1&o){const e=t.RV6();t.j41(0,"div",9),t.bIt("click",function(){const s=t.eBV(e).index,r=t.XpG().index,c=t.XpG();return t.Njj(c.selectIJ(r,s))}),t.EFF(1),t.k0s()}if(2&o){const e=i.$implicit,n=i.index,s=t.XpG().index,r=t.XpG();t.AVh("modifying",r.modifying(s,n))("highlight",r.highlight(s,n)),t.R7$(),t.SpI(" ",e||""," ")}}function Qt(o,i){if(1&o&&(t.j41(0,"div",5),t.DNE(1,Kt,2,5,"div",8),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}function Jt(o,i){if(1&o&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&o){const e=i.$implicit,n=i.index,s=t.XpG().index,r=t.XpG();t.AVh("highlight",r.highlight(s,n)),t.R7$(),t.SpI(" ",e||""," ")}}function Zt(o,i){if(1&o&&(t.j41(0,"div",5),t.DNE(1,Jt,2,3,"div",6),t.k0s()),2&o){const e=i.$implicit;t.R7$(),t.Y8G("ngForOf",e)}}function qt(o,i){if(1&o){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){const s=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.setValue(s))}),t.EFF(1),t.k0s()}if(2&o){const e=i.$implicit;t.R7$(),t.SpI(" ",e,"\n")}}const st=[0,1,0,0,0,3,4,2,7,0,0,4,0,6,2,0,5,0,0,0,2,4,0,0,3,6,0,7,0,1,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,6,9,8,5,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,6,9,3,5,4,7,0,2,8,0,0,0,0,0,0,0,6];function U(o){const i=[];for(let e=0;e<9;e++){const n=[];for(let s=0;s<9;s++)n.push(o[9*e+s]);i.push(n)}return i}let ot=(()=>{class o{constructor(){this.puzzle=U(st),this.answer=new Array(9).fill(0).map(()=>new Array(9).fill(0)),this.customPuzzle=new Array(9).fill(0).map(()=>new Array(9).fill(0)),this.customAnswer=new Array(9).fill(0).map(()=>new Array(9).fill(0)),this.selectI=-1,this.selectJ=-1,this.numButton=new Array(10).fill(0).map((e,n)=>n)}selectIJ(e,n){this.selectI=e,this.selectJ=n}solve(){let e;try{e=Y.getStandardSudoku(3),e.setPuzzle(st);const n=e.solve();this.answer=U(n)}catch(n){console.error(n),console.trace()}}customSolve(){let e;try{e=Y.getStandardSudoku(3),e.setPuzzle(function te(o){const i=[];for(let e=0;e<9;e++)for(let n=0;n<9;n++)i.push(o[e][n]);return i}(this.customPuzzle));const n=e.solve();this.customAnswer=U(n)}catch(n){console.error(n),console.trace()}}modifying(e,n){return e===this.selectI&&n===this.selectJ}highlight(e,n){return!!(Math.floor(e/3)%2^Math.floor(n/3)%2)}setValue(e){-1!==this.selectI&&(this.customPuzzle[this.selectI][this.selectJ]=e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-sudoku"]],standalone:!0,features:[t.aNF],decls:19,vars:5,consts:[[1,"sudoku"],["class","sudoku-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[1,"bar"],["mat-button","",3,"click",4,"ngFor","ngForOf"],[1,"sudoku-row"],["class","sudoku-item",3,"highlight",4,"ngFor","ngForOf"],[1,"sudoku-item"],["class","sudoku-item",3,"modifying","highlight","click",4,"ngFor","ngForOf"],[1,"sudoku-item",3,"click"],["mat-button","",3,"click"]],template:function(n,s){1&n&&(t.j41(0,"h1"),t.EFF(1,"Demo"),t.k0s(),t.j41(2,"div",0),t.DNE(3,Ut,2,1,"div",1),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return s.solve()}),t.EFF(5,"solve"),t.k0s(),t.j41(6,"div",0),t.DNE(7,Wt,2,1,"div",1),t.k0s(),t.nrm(8,"div",3),t.j41(9,"h1"),t.EFF(10,"Custom"),t.k0s(),t.j41(11,"div",0),t.DNE(12,Qt,2,1,"div",1),t.k0s(),t.j41(13,"button",2),t.bIt("click",function(){return s.customSolve()}),t.EFF(14,"solve"),t.k0s(),t.j41(15,"div",0),t.DNE(16,Zt,2,1,"div",1),t.k0s(),t.nrm(17,"br"),t.DNE(18,qt,2,1,"button",4)),2&n&&(t.R7$(3),t.Y8G("ngForOf",s.puzzle),t.R7$(4),t.Y8G("ngForOf",s.answer),t.R7$(5),t.Y8G("ngForOf",s.customPuzzle),t.R7$(4),t.Y8G("ngForOf",s.customAnswer),t.R7$(2),t.Y8G("ngForOf",s.numButton))},dependencies:[d.pM,M.Hl,M.$z],styles:[".sudoku[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.sudoku[_ngcontent-%COMP%]   .sudoku-row[_ngcontent-%COMP%]{display:flex}.sudoku[_ngcontent-%COMP%]   .sudoku-row[_ngcontent-%COMP%]   .sudoku-item[_ngcontent-%COMP%]{width:2em;height:2em;box-sizing:border-box;border:1px solid black;display:inline-flex;align-items:center;justify-content:center}.sudoku[_ngcontent-%COMP%]   .sudoku-row[_ngcontent-%COMP%]   .sudoku-item.highlight[_ngcontent-%COMP%]{background-color:#add8e6}.sudoku[_ngcontent-%COMP%]   .sudoku-row[_ngcontent-%COMP%]   .sudoku-item.modifying[_ngcontent-%COMP%]{border:2px solid red}.bar[_ngcontent-%COMP%]{display:flex;height:1em;background-color:#90ee90}"]})}return o})();const ee=[{path:"",component:W,children:[{path:"mine-sweeper",component:J},{path:"tetris",component:tt},{path:"gobang",component:nt},{path:"doudizhu",component:Xt},{path:"sudoku",component:ot}]}];let ne=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[T.iI.forChild(ee),T.iI]})}return o})(),ie=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.$C({type:o});static#n=this.\u0275inj=t.G2t({imports:[d.MD,g.YN,ne,W,J,tt,nt,ot]})}return o})()}}]);