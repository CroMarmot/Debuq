(self.webpackChunkDebuq=self.webpackChunkDebuq||[]).push([[26],{7026:($,c,s)=>{"use strict";s.r(c),s.d(c,{ToolsModule:()=>we});var d=s(177),r=s(6661),t=s(4438),a=s(8834);function l(i,p){1&i&&(t.j41(0,"button",3),t.EFF(1,"todo"),t.k0s())}let f=(()=>{class i{constructor(){this.isDev=(0,t.naY)()}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-index"]],standalone:!0,features:[t.aNF],decls:8,vars:1,consts:[[1,"index-main"],["mat-stroked-button","","routerLink","qr"],["mat-stroked-button","","routerLink","price"],["mat-stroked-button","","routerLink","todo"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div")(2,"button",1),t.EFF(3,"qr"),t.k0s(),t.j41(4,"button",2),t.EFF(5,"price"),t.k0s(),t.DNE(6,l,2,0,"button",3),t.k0s(),t.nrm(7,"router-outlet"),t.k0s()),2&n&&(t.R7$(6),t.vxM(6,o.isDev?6:-1))},dependencies:[a.Hl,a.$z,r.Wk,r.n3],styles:[".index-main[_ngcontent-%COMP%]{padding:16px;box-sizing:border-box}"]})}return i})();var u=s(9417),m=s(2042),y=s(9159),v=s(9631),b=s(2102);function C(i,p){1&i&&(t.j41(0,"th",20),t.EFF(1,"Name"),t.k0s())}function T(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.name)}}function D(i,p){1&i&&(t.j41(0,"th",20),t.EFF(1,"Price"),t.k0s())}function L(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.price)}}function x(i,p){1&i&&(t.j41(0,"th",20),t.EFF(1,"Weight"),t.k0s())}function P(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.weight)}}function j(i,p){1&i&&(t.j41(0,"th",20),t.EFF(1,"/g"),t.k0s())}function N(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.SpI(" ",(e.price/e.weight).toFixed(2)," ")}}function I(i,p){1&i&&(t.j41(0,"th",22),t.EFF(1,"/50g"),t.k0s())}function H(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.SpI(" ",(e.price/e.weight*50).toFixed(2)," ")}}function z(i,p){1&i&&(t.j41(0,"th",22),t.EFF(1,"/100g"),t.k0s())}function E(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.SpI(" ",(e.price/e.weight*100).toFixed(2)," ")}}function B(i,p){1&i&&(t.j41(0,"th",22),t.EFF(1,"/500g"),t.k0s())}function R(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.SpI(" ",(e.price/e.weight*500).toFixed(2)," ")}}function _(i,p){1&i&&(t.j41(0,"th",22),t.EFF(1,"/1000g"),t.k0s())}function A(i,p){if(1&i&&(t.j41(0,"td",21),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.SpI(" ",(e.price/e.weight*1e3).toFixed(2)," ")}}function S(i,p){1&i&&(t.j41(0,"th",22),t.EFF(1,"\u63a7\u5236"),t.k0s())}function w(i,p){if(1&i){const e=t.RV6();t.j41(0,"td",21)(1,"button",4),t.bIt("click",function(){const o=t.eBV(e).$implicit,h=t.XpG();return t.Njj(h.removeItem(o._index))}),t.EFF(2," \u5220\u9664 "),t.k0s()()}}function k(i,p){1&i&&t.nrm(0,"tr",23)}function M(i,p){1&i&&t.nrm(0,"tr",24)}function q(i,p,e){return(i<p?-1:1)*(e?1:-1)}let et=(()=>{class i{constructor(){this.priceCtl=new u.MJ(""),this.weightCtl=new u.MJ(""),this.nameCtl=new u.MJ(""),this._innerIdx=0,this.pwlist=new y.I6([]),this.displayedColumns=["name","price","weight","avg","avg50","avg100","avg500","avg1000","ctl"]}ngAfterViewInit(){this.pwlist.sort=this.sort,this.pwlist.sortData=(e,n)=>{console.log("run sort"),e.forEach((h,g)=>h._index=g);const o="asc"===n.direction;return e.sort((h,g)=>{switch(n.active){case"price":return q(h.price,g.price,o);case"weight":return q(h.weight,g.weight,o);case"avg":return q(h.price/h.weight,g.price/g.weight,o);default:return 0}})}}addItem(){const e=Number(this.priceCtl.getRawValue())||0,n=Number(this.weightCtl.getRawValue())||1,o=String(this.nameCtl.getRawValue())||"";this.pwlist.data.push({price:e,weight:n,name:o,_index:0}),this.pwlist._updateChangeSubscription()}clear(){this.pwlist.data=[]}removeItem(e){this.pwlist.data.splice(e,1),this.pwlist._updateChangeSubscription()}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-price"]],viewQuery:function(n,o){if(1&n&&t.GBs(m.B4,5),2&n){let h;t.mGM(h=t.lsd())&&(o.sort=h.first)}},standalone:!0,features:[t.aNF],decls:48,vars:6,consts:[[1,"price-main"],["matInput","","placeholder","Ex. 12.3",3,"formControl"],["matInput","","placeholder","Ex. 200",3,"formControl"],["matInput","","placeholder","Ex. \u5546\u54c1A",3,"formControl"],["mat-raised-button","",3,"click"],["mat-table","","matSort","","matSortActive","avg","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","price"],["matColumnDef","weight"],["matColumnDef","avg"],["matColumnDef","avg50"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","avg100"],["matColumnDef","avg500"],["matColumnDef","avg1000"],["matColumnDef","ctl"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"form")(2,"mat-form-field")(3,"mat-label"),t.EFF(4,"\u4ef7\u683c"),t.k0s(),t.nrm(5,"input",1),t.k0s(),t.j41(6,"mat-form-field")(7,"mat-label"),t.EFF(8,"\u91cd\u91cf(g)"),t.k0s(),t.nrm(9,"input",2),t.k0s(),t.j41(10,"mat-form-field")(11,"mat-label"),t.EFF(12,"\u540d\u79f0(\u53ef\u9009)"),t.k0s(),t.nrm(13,"input",3),t.k0s(),t.j41(14,"button",4),t.bIt("click",function(){return o.addItem()}),t.EFF(15,"\u589e\u52a0"),t.k0s(),t.j41(16,"button",4),t.bIt("click",function(){return o.clear()}),t.EFF(17,"\u6e05\u7a7a"),t.k0s()(),t.j41(18,"table",5),t.qex(19,6),t.DNE(20,C,2,0,"th",7)(21,T,2,1,"td",8),t.bVm(),t.qex(22,9),t.DNE(23,D,2,0,"th",7)(24,L,2,1,"td",8),t.bVm(),t.qex(25,10),t.DNE(26,x,2,0,"th",7)(27,P,2,1,"td",8),t.bVm(),t.qex(28,11),t.DNE(29,j,2,0,"th",7)(30,N,2,1,"td",8),t.bVm(),t.qex(31,12),t.DNE(32,I,2,0,"th",13)(33,H,2,1,"td",8),t.bVm(),t.qex(34,14),t.DNE(35,z,2,0,"th",13)(36,E,2,1,"td",8),t.bVm(),t.qex(37,15),t.DNE(38,B,2,0,"th",13)(39,R,2,1,"td",8),t.bVm(),t.qex(40,16),t.DNE(41,_,2,0,"th",13)(42,A,2,1,"td",8),t.bVm(),t.qex(43,17),t.DNE(44,S,2,0,"th",13)(45,w,3,0,"td",8),t.bVm(),t.DNE(46,k,1,0,"tr",18)(47,M,1,0,"tr",19),t.k0s()()),2&n&&(t.R7$(5),t.Y8G("formControl",o.priceCtl),t.R7$(4),t.Y8G("formControl",o.weightCtl),t.R7$(4),t.Y8G("formControl",o.nameCtl),t.R7$(5),t.Y8G("dataSource",o.pwlist),t.R7$(28),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns))},dependencies:[u.YN,u.qT,u.me,u.BC,u.cb,u.cV,b.RG,b.rl,b.nJ,v.fS,v.fg,u.X1,u.l_,a.Hl,a.$z,y.tP,y.Zl,y.tL,y.ji,y.cC,y.YV,y.iL,y.KS,y.$R,y.YZ,y.NB,m.NQ,m.B4,m.aE],styles:[".price-main[_ngcontent-%COMP%]{padding-top:16px;padding-bottom:16px}table[_ngcontent-%COMP%]{width:100%}"]})}return i})();var V=s(467),gt=s(8314);const nt=(()=>{class i{constructor(e,n,o,h,g){this._legacyCanvasSize=i.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),o&&"object"==typeof o?this._onDecode=n:(console.warn(o||h||g?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof o?o:{}).onDecodeError||("function"==typeof o?o:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof h?h:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||g||this._preferredCamera,this._legacyCanvasSize="number"==typeof o?o:"number"==typeof h?h:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let F=!1;if(e.hidden&&(e.hidden=!1,F=!0),document.body.contains(e)||(document.body.appendChild(e),F=!0),o=e.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(h=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(g=this.$overlay.style).position="absolute",g.display="none",g.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!h&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}o.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let U=window.getComputedStyle(e);"none"===U.display&&(e.style.setProperty("display","block","important"),F=!0),"visible"!==U.visibility&&(e.style.setProperty("visibility","visible","important"),F=!0),F&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=i.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,V.A)(function*(){try{return!!(yield i.listCameras(!1)).length}catch{return!1}})()}static listCameras(e=!1){return(0,V.A)(function*(){if(!navigator.mediaDevices)return[];let o,n=function(){var h=(0,V.A)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(g=>"videoinput"===g.kind)});return function(){return h.apply(this,arguments)}}();try{e&&(yield n()).every(h=>!h.label)&&(o=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((h,g)=>({id:h.deviceId,label:h.label||(0===g?"Default Camera":`Camera ${g+1}`)}))}finally{o&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),i._stopVideoStream(o))}})()}hasFlash(){var e=this;return(0,V.A)(function*(){let n;try{if(e.$video.srcObject){if(!(e.$video.srcObject instanceof MediaStream))return!1;n=e.$video.srcObject}else n=(yield e._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==e.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),i._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var e=this;return(0,V.A)(function*(){e._flashOn?yield e.turnFlashOff():yield e.turnFlashOn()})()}turnFlashOn(){var e=this;return(0,V.A)(function*(){if(!e._flashOn&&!e._destroyed&&(e._flashOn=!0,e._active&&!e._paused))try{if(!(yield e.hasFlash()))throw"No flash available";yield e.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw e._flashOn=!1,n}})()}turnFlashOff(){var e=this;return(0,V.A)(function*(){e._flashOn&&(e._flashOn=!1,yield e._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),i._postWorkerMessage(this._qrEnginePromise,"close")}start(){var e=this;return(0,V.A)(function*(){if(e._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!e._active||e._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),e._active=!0,!document.hidden))if(e._paused=!1,e.$video.srcObject)yield e.$video.play();else try{let{stream:n,facingMode:o}=yield e._getCameraStream();!e._active||e._paused?i._stopVideoStream(n):(e._setVideoMirror(o),e.$video.srcObject=n,yield e.$video.play(),e._flashOn&&(e._flashOn=!1,e.turnFlashOn().catch(()=>{})))}catch(n){if(!e._paused)throw e._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(e=!1){var n=this;return(0,V.A)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let o=()=>{n.$video.srcObject instanceof MediaStream&&(i._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return e?(o(),!0):(yield new Promise(h=>setTimeout(h,300)),!!n._paused&&(o(),!0))})()}setCamera(e){var n=this;return(0,V.A)(function*(){e!==n._preferredCamera&&(n._preferredCamera=e,yield n._restartVideoStream())})()}static scanImage(e,n,o,h,g=!1,F=!1){return(0,V.A)(function*(){let U,J=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(U=n.scanRegion,o=n.qrEngine,h=n.canvas,g=n.disallowCanvasResizing||!1,F=n.alsoTryWithoutScanRegion||!1,J=!0):console.warn(n||o||h||g||F?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!o;try{let K,Y,tt;if([o,K]=yield Promise.all([o||i.createQrEngine(),i._loadImage(e)]),[h,Y]=i._drawToCanvas(K,U,h,g),o instanceof Worker){let O=o;n||i._postWorkerMessageSync(O,"inversionMode","both"),tt=yield new Promise((Q,ht)=>{let ft,ct,ot,wt=-1;ct=rt=>{rt.data.id===wt&&(O.removeEventListener("message",ct),O.removeEventListener("error",ot),clearTimeout(ft),null!==rt.data.data?Q({data:rt.data.data,cornerPoints:i._convertPoints(rt.data.cornerPoints,U)}):ht(i.NO_QR_CODE_FOUND))},ot=rt=>{O.removeEventListener("message",ct),O.removeEventListener("error",ot),clearTimeout(ft),ht("Scanner error: "+(rt?rt.message||rt:"Unknown Error"))},O.addEventListener("message",ct),O.addEventListener("error",ot),ft=setTimeout(()=>ot("timeout"),1e4);let mt=Y.getImageData(0,0,h.width,h.height);wt=i._postWorkerMessageSync(O,"decode",mt,[mt.data.buffer])})}else tt=yield Promise.race([new Promise((O,Q)=>window.setTimeout(()=>Q("Scanner error: timeout"),1e4)),(0,V.A)(function*(){try{var[O]=yield o.detect(h);if(!O)throw i.NO_QR_CODE_FOUND;return{data:O.rawValue,cornerPoints:i._convertPoints(O.cornerPoints,U)}}catch(Q){if(/not implemented|service unavailable/.test(O=Q.message||Q))return i._disableBarcodeDetector=!0,i.scanImage(e,{scanRegion:U,canvas:h,disallowCanvasResizing:g,alsoTryWithoutScanRegion:F});throw`Scanner error: ${O}`}})()]);return J?tt:tt.data}catch(K){if(!U||!F)throw K;let Y=yield i.scanImage(e,{qrEngine:o,canvas:h,disallowCanvasResizing:g});return J?Y:Y.data}finally{n||i._postWorkerMessage(o,"close")}})()}setGrayscaleWeights(e,n,o,h=!0){i._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:n,blue:o,useIntegerApproximation:h})}setInversionMode(e){i._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static createQrEngine(e){return(0,V.A)(function*(){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>s.e(43).then(s.bind(s,6043)).then(o=>o.createWorker()),i._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return e();let n=navigator.userAgentData;return n&&n.brands.some(({brand:o})=>/Chromium/i.test(o))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:o,platformVersion:h})=>/arm/i.test(o||"arm")&&13<=parseInt(h||"13")).catch(()=>!0))?e():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let n=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-n)/2),y:Math.round((e.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,n=e.videoWidth,o=e.videoHeight,h=e.offsetWidth,g=e.offsetHeight,F=e.offsetLeft,U=e.offsetTop,J=window.getComputedStyle(e),K=J.objectFit,Y=n/o,tt=h/g;switch(K){case"none":var O=n,Q=o;break;case"fill":O=h,Q=g;break;default:("cover"===K?Y>tt:Y<tt)?O=(Q=g)*Y:Q=(O=h)/Y,"scale-down"===K&&(O=Math.min(O,n),Q=Math.min(Q,o))}var[ht,ft]=J.objectPosition.split(" ").map((ot,wt)=>{const mt=parseFloat(ot);return ot.endsWith("%")?(wt?g-Q:h-O)*mt/100:mt});tt=this._scanRegion.height||o,K=this._scanRegion.x||0;var ct=this._scanRegion.y||0;(Y=this.$overlay.style).width=(J=this._scanRegion.width||n)/n*O+"px",Y.height=tt/o*Q+"px",Y.top=`${U+ft+ct/o*Q}px`,o=/scaleX\(-1\)/.test(e.style.transform),Y.left=`${F+(o?h-ht-O:ht)+(o?n-K-J:K)/n*O}px`,Y.transform=e.style.transform}})}static _convertPoints(e,n){if(!n)return e;let o=n.x||0,h=n.y||0,g=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let F of e)F.x=F.x*g+o,F.y=F.y*n+h;return e}_scanFrame(){var e=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,V.A)(function*(){if(!(1>=e.$video.readyState)){var n=Date.now()-e._lastScanTimestamp,o=1e3/e._maxScansPerSecond;n<o&&(yield new Promise(g=>setTimeout(g,o-n))),e._lastScanTimestamp=Date.now();try{var h=yield i.scanImage(e.$video,{scanRegion:e._scanRegion,qrEngine:e._qrEnginePromise,canvas:e.$canvas})}catch(g){if(!e._active)return;e._onDecodeError(g)}!i._disableBarcodeDetector||(yield e._qrEnginePromise)instanceof Worker||(e._qrEnginePromise=i.createQrEngine()),h?(e._onDecode?e._onDecode(h):e._legacyOnDecode&&e._legacyOnDecode(h.data),e.$codeOutlineHighlight&&(clearTimeout(e._codeOutlineHighlightRemovalTimeout),e._codeOutlineHighlightRemovalTimeout=void 0,e.$codeOutlineHighlight.setAttribute("viewBox",`${e._scanRegion.x||0} ${e._scanRegion.y||0} ${e._scanRegion.width||e.$video.videoWidth} ${e._scanRegion.height||e.$video.videoHeight}`),e.$codeOutlineHighlight.firstElementChild.setAttribute("points",h.cornerPoints.map(({x:g,y:F})=>`${g},${F}`).join(" ")),e.$codeOutlineHighlight.style.display="")):e.$codeOutlineHighlight&&!e._codeOutlineHighlightRemovalTimeout&&(e._codeOutlineHighlightRemovalTimeout=setTimeout(()=>e.$codeOutlineHighlight.style.display="none",100))}e._scanFrame()}))}_onDecodeError(e){e!==i.NO_QR_CODE_FOUND&&console.log(e)}_getCameraStream(){var e=this;return(0,V.A)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(e._preferredCamera)?"facingMode":"deviceId",o=[{width:{min:1024}},{width:{min:768}},{}],h=o.map(g=>Object.assign({},g,{[n]:{exact:e._preferredCamera}}));for(let g of[...h,...o])try{let F=yield navigator.mediaDevices.getUserMedia({video:g,audio:!1});return{stream:F,facingMode:e._getFacingMode(F)||(g.facingMode?e._preferredCamera:"environment"===e._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var e=this;return(0,V.A)(function*(){let n=e._paused;(yield e.pause(!0))&&!n&&e._active&&(yield e.start())})()}static _stopVideoStream(e){for(let n of e.getTracks())n.stop(),e.removeTrack(n)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,n,o,h=!1){o=o||document.createElement("canvas");let g=n&&n.x?n.x:0,F=n&&n.y?n.y:0,U=n&&n.width?n.width:e.videoWidth||e.width,J=n&&n.height?n.height:e.videoHeight||e.height;return h||(h=n&&n.downScaledWidth?n.downScaledWidth:U,n=n&&n.downScaledHeight?n.downScaledHeight:J,o.width!==h&&(o.width=h),o.height!==n&&(o.height=n)),(n=o.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(e,g,F,U,J,0,0,o.width,o.height),[o,n]}static _loadImage(e){return(0,V.A)(function*(){if(e instanceof Image)return yield i._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e))throw"Unsupported image type.";{let n=new Image;n.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return yield i._awaitImageLoad(n),n}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(e){return(0,V.A)(function*(){e.complete&&0!==e.naturalWidth||(yield new Promise((n,o)=>{let h=g=>{e.removeEventListener("load",h),e.removeEventListener("error",h),g instanceof ErrorEvent?o("Image load error"):n()};e.addEventListener("load",h),e.addEventListener("error",h)}))})()}static _postWorkerMessage(e,n,o,h){return(0,V.A)(function*(){return i._postWorkerMessageSync(yield e,n,o,h)})()}static _postWorkerMessageSync(e,n,o,h){if(!(e instanceof Worker))return-1;let g=i._workerMessageId++;return e.postMessage({id:g,type:n,data:o},h),g}}return i.DEFAULT_CANVAS_SIZE=400,i.NO_QR_CODE_FOUND="No QR code found",i._disableBarcodeDetector=!1,i._workerMessageId=0,i})();var it=s(6850);const pt=["video"],dt=["fileinput"];let yt=(()=>{class i{constructor(){this.text="",this.imgSrc="",this.qrResult="",this.qrScanner=void 0,this.fileResult=""}ngOnDestroy(){this.qrScanner?.destroy()}generate(){gt.toDataURL(this.text,{errorCorrectionLevel:"H"}).then(e=>{console.log(e),this.imgSrc=e})}getPermission(){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(e=>{alert("success"),console.log(e)}).catch(e=>{alert(e)})}scan(){var e=this;return(0,V.A)(function*(){if(!(yield nt.hasCamera()))return void alert("No camera");const o=yield nt.listCameras();if(0==o.length)return void alert("cameras.length == 0");let h;console.log(o),e.qrScanner||(h=e.qrScanner=new nt(e.videoPlayer.nativeElement,g=>{e.qrResult=g.data,h?.stop(),alert("OK")},{maxScansPerSecond:10,highlightScanRegion:!0})),h?.start()})()}stopscan(){this.qrScanner?.stop()}chooseFile(){this.fileResult="",this.fileInput?.nativeElement.click()}choosedFileChange(){for(const e of this.fileInput?.nativeElement.files||[]){const n=new FileReader;n.onload=o=>{nt.scanImage(o.target?.result).then(h=>{this.fileResult=h}).catch(h=>alert(h||"No QR code found."))},n.readAsDataURL(e)}}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-qr"]],viewQuery:function(n,o){if(1&n&&(t.GBs(pt,5,t.aKT),t.GBs(dt,5,t.aKT)),2&n){let h;t.mGM(h=t.lsd())&&(o.videoPlayer=h.first),t.mGM(h=t.lsd())&&(o.fileInput=h.first)}},standalone:!0,features:[t.aNF],decls:40,vars:4,consts:[["video",""],["fileinput",""],["label","Text 2 QR",1,"tab-content"],[1,"tab-content"],["matInput","",3,"ngModelChange","ngModel"],["mat-button","",3,"click"],[3,"src"],["label","Camera",1,"tab-content"],["matInput","","readonly","",3,"value"],[2,"max-width","50vw","max-height","50vh"],["label","File"],["type","file","accept","image/*",2,"display","none",3,"change"]],template:function(n,o){if(1&n){const h=t.RV6();t.j41(0,"mat-tab-group")(1,"mat-tab",2)(2,"div",3)(3,"mat-form-field")(4,"mat-label"),t.EFF(5,"Text"),t.k0s(),t.j41(6,"textarea",4),t.mxI("ngModelChange",function(F){return t.eBV(h),t.DH7(o.text,F)||(o.text=F),t.Njj(F)}),t.k0s()(),t.j41(7,"div")(8,"button",5),t.bIt("click",function(){return t.eBV(h),t.Njj(o.generate())}),t.EFF(9,"Generate"),t.k0s()(),t.j41(10,"div"),t.nrm(11,"img",6),t.k0s()()(),t.j41(12,"mat-tab",7)(13,"div",3)(14,"div")(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"QR scan result"),t.k0s(),t.nrm(18,"textarea",8),t.k0s()(),t.j41(19,"div")(20,"button",5),t.bIt("click",function(){return t.eBV(h),t.Njj(o.getPermission())}),t.EFF(21," Get Camera Permission "),t.k0s(),t.j41(22,"button",5),t.bIt("click",function(){return t.eBV(h),t.Njj(o.scan())}),t.EFF(23,"Scan"),t.k0s(),t.j41(24,"button",5),t.bIt("click",function(){return t.eBV(h),t.Njj(o.stopscan())}),t.EFF(25,"Stop"),t.k0s()(),t.j41(26,"div"),t.nrm(27,"video",9,0),t.k0s()()(),t.j41(29,"mat-tab",10)(30,"div",3)(31,"mat-form-field")(32,"mat-label"),t.EFF(33,"Scan File result"),t.k0s(),t.nrm(34,"textarea",8),t.k0s(),t.j41(35,"div")(36,"input",11,1),t.bIt("change",function(){return t.eBV(h),t.Njj(o.choosedFileChange())}),t.k0s(),t.j41(38,"button",5),t.bIt("click",function(){return t.eBV(h),t.Njj(o.chooseFile())}),t.EFF(39,"ChooseFile"),t.k0s()()()()()}2&n&&(t.R7$(6),t.R50("ngModel",o.text),t.R7$(5),t.Y8G("src",o.imgSrc,t.B4B),t.R7$(7),t.Y8G("value",o.qrResult),t.R7$(16),t.Y8G("value",o.fileResult))},dependencies:[it.RI,it.mq,it.T8,b.RG,b.rl,b.nJ,v.fS,v.fg,u.YN,u.me,u.BC,u.vS,a.Hl,a.$z],styles:["[_nghost-%COMP%]{min-height:80vh}.tab-content[_ngcontent-%COMP%]{box-sizing:border-box;margin:16px}"]})}return i})();var st=s(8728),at=s(8841),X=s(8456),G=s(4006),Z=s(2798),lt=s(2350),kt=s(6600);let jt=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n,this.existsTags=[]}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(G.CP),t.rXU(G.Vh))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-item-dialog"]],standalone:!0,features:[t.aNF],decls:39,vars:11,consts:[["mat-dialog-title",""],[2,"width","100%"],[3,"valueChange","value"],[3,"value"],["value","init"],["value","working"],["value","done"],["matInput","",3,"ngModelChange","ngModel"],[3,"selectedTagsChange","existTags","selectedTags"],["label","Deadline date",3,"dateStrChange","dateStr"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(n,o){1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content")(3,"div")(4,"mat-form-field",1)(5,"mat-label"),t.EFF(6,"priority"),t.k0s(),t.j41(7,"mat-select",2),t.mxI("valueChange",function(g){return t.DH7(o.data.priority,g)||(o.data.priority=g),g}),t.j41(8,"mat-option",3),t.EFF(9,"0"),t.k0s(),t.j41(10,"mat-option",3),t.EFF(11,"1"),t.k0s(),t.j41(12,"mat-option",3),t.EFF(13,"2"),t.k0s()()()(),t.j41(14,"div")(15,"mat-form-field",1)(16,"mat-label"),t.EFF(17,"state"),t.k0s(),t.j41(18,"mat-select",2),t.mxI("valueChange",function(g){return t.DH7(o.data.state,g)||(o.data.state=g),g}),t.j41(19,"mat-option",4),t.EFF(20,"init"),t.k0s(),t.j41(21,"mat-option",5),t.EFF(22,"working"),t.k0s(),t.j41(23,"mat-option",6),t.EFF(24,"done"),t.k0s()()()(),t.j41(25,"div")(26,"mat-form-field",1)(27,"mat-label"),t.EFF(28,"text"),t.k0s(),t.j41(29,"textarea",7),t.mxI("ngModelChange",function(g){return t.DH7(o.data.text,g)||(o.data.text=g),g}),t.k0s()()(),t.j41(30,"div")(31,"cm-mat-chips-input",8),t.mxI("selectedTagsChange",function(g){return t.DH7(o.data.tags,g)||(o.data.tags=g),g}),t.k0s()(),t.j41(32,"div")(33,"cm-mat-input-datepicker-iso",9),t.mxI("dateStrChange",function(g){return t.DH7(o.data.ddl_date,g)||(o.data.ddl_date=g),g}),t.k0s()()(),t.j41(34,"mat-dialog-actions")(35,"button",10),t.bIt("click",function(){return o.onNoClick()}),t.EFF(36,"\u53d6\u6d88"),t.k0s(),t.j41(37,"button",11),t.EFF(38,"\u66f4\u65b0"),t.k0s()()),2&n&&(t.R7$(),t.SpI("\u7f16\u8f91 [tid=",o.data.tid,"]"),t.R7$(6),t.R50("value",o.data.priority),t.R7$(),t.Y8G("value",0),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.Y8G("value",2),t.R7$(6),t.R50("value",o.data.state),t.R7$(11),t.R50("ngModel",o.data.text),t.R7$(2),t.Y8G("existTags",o.existsTags),t.R50("selectedTags",o.data.tags),t.R7$(2),t.R50("dateStr",o.data.ddl_date),t.R7$(4),t.Y8G("mat-dialog-close",o.data))},dependencies:[d.MD,v.fS,v.fg,b.rl,b.nJ,Z.Ve,Z.VO,kt.wT,u.YN,u.me,u.BC,u.vS,u.X1,a.Hl,a.$z,G.BI,G.Yi,G.E7,G.tx,lt.jI,lt.Nq]})}return i})();var vt=s(6471),$t=s(6801),Tt=s(6440);class bt extends Error{constructor(p,e,n){super(n),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=p}}const Ct={BASE:"/todo.api/v0",CREDENTIALS:"include",ENCODE_PATH:void 0,HEADERS:void 0,PASSWORD:void 0,TOKEN:void 0,USERNAME:void 0,VERSION:"0.1.0",WITH_CREDENTIALS:!1,interceptors:{response:new class Lt{constructor(){this._fns=[]}eject(p){const e=this._fns.indexOf(p);-1!==e&&(this._fns=[...this._fns.slice(0,e),...this._fns.slice(e+1)])}use(p){this._fns=[...this._fns,p]}}}};var Dt=s(1626),Ot=s(696),It=s(4526),Vt=s(4421),Bt=s(5006),Nt=s(9090),Mt=s(3921);const ut=i=>"string"==typeof i,Rt=i=>ut(i)&&""!==i,St=i=>i instanceof Blob,Pt=i=>i instanceof FormData,_t=function(){var i=(0,V.A)(function*(p,e){return"function"==typeof e?e(p):e});return function(e,n){return i.apply(this,arguments)}}(),Et=(i,p,e)=>{const n=((i,p)=>{const e=i.ENCODE_PATH||encodeURI,n=p.url.replace("{api-version}",i.VERSION).replace(/{(.*?)}/g,(h,g)=>p.path?.hasOwnProperty(g)?e(String(p.path[g])):h),o=i.BASE+n;return p.query?o+(i=>{const p=[],e=(o,h)=>{p.push(`${encodeURIComponent(o)}=${encodeURIComponent(String(h))}`)},n=(o,h)=>{null!=h&&(h instanceof Date?e(o,h.toISOString()):Array.isArray(h)?h.forEach(g=>n(o,g)):"object"==typeof h?Object.entries(h).forEach(([g,F])=>n(`${o}[${g}]`,F)):e(o,h))};return Object.entries(i).forEach(([o,h])=>n(o,h)),p.length?`?${p.join("&")}`:""})(p.query):o})(i,e),o=(i=>{if(i.formData){const p=new FormData,e=(n,o)=>{ut(o)||St(o)?p.append(n,o):p.append(n,JSON.stringify(o))};return Object.entries(i.formData).filter(([,n])=>null!=n).forEach(([n,o])=>{Array.isArray(o)?o.forEach(h=>e(n,h)):e(n,o)}),p}})(e),h=(i=>{if(i.body)return i.mediaType?.includes("application/json")||i.mediaType?.includes("+json")?JSON.stringify(i.body):ut(i.body)||St(i.body)||Pt(i.body)?i.body:JSON.stringify(i.body)})(e);return((i,p)=>(0,Ot.p)({token:_t(p,i.TOKEN),username:_t(p,i.USERNAME),password:_t(p,i.PASSWORD),additionalHeaders:_t(p,i.HEADERS)}).pipe((0,Bt.T)(({token:e,username:n,password:o,additionalHeaders:h})=>{const g=Object.entries({Accept:"application/json",...h,...p.headers}).filter(([,F])=>null!=F).reduce((F,[U,J])=>({...F,[U]:String(J)}),{});if(Rt(e)&&(g.Authorization=`Bearer ${e}`),Rt(n)&&Rt(o)){const F=(i=>{try{return btoa(i)}catch{return Buffer.from(i).toString("base64")}})(`${n}:${o}`);g.Authorization=`Basic ${F}`}return void 0!==p.body&&(p.mediaType?g["Content-Type"]=p.mediaType:St(p.body)?g["Content-Type"]=p.body.type||"application/octet-stream":ut(p.body)?g["Content-Type"]="text/plain":Pt(p.body)||(g["Content-Type"]="application/json")),new Dt.Lr(g)})))(i,e).pipe((0,Nt.n)(g=>((i,p,e,n,o,h,g)=>e.request(p.method,n,{headers:g,body:o??h,withCredentials:i.WITH_CREDENTIALS,observe:"response"}))(i,e,p,n,h,o,g)),(0,Nt.n)(function(){var g=(0,V.A)(function*(F){for(const K of i.interceptors.response._fns)F=yield K(F);const U=(i=>{if(204!==i.status&&null!==i.body)return i.body})(F),J=((i,p)=>{if(p){const e=i.headers.get(p);if(ut(e))return e}})(F,e.responseHeader);return{url:n,ok:F.ok,status:F.status,statusText:F.statusText,body:J??U}});return function(F){return g.apply(this,arguments)}}()),(0,Mt.W)(g=>g.status?(0,Vt.of)({url:n,ok:g.ok,status:g.status,statusText:g.statusText,body:g.error??g.statusText}):(0,It.$)(()=>g)),(0,Bt.T)(g=>(((i,p)=>{const n={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"Im a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",...i.errors}[p.status];if(n)throw new bt(i,p,n);if(!p.ok){const o=p.status??"unknown",h=p.statusText??"unknown",g=(()=>{try{return JSON.stringify(p.body,null,2)}catch{return}})();throw new bt(i,p,`Generic Error: status: ${o}; status text: ${h}; body: ${g}`)}})(e,g),g.body)),(0,Mt.W)(g=>(0,It.$)(()=>g)))};let qt=(()=>{class i{constructor(e){this.http=e}home(){return Et(Ct,this.http,{method:"GET",url:"/"})}getAllTodos(){return Et(Ct,this.http,{method:"GET",url:"/all"})}putUpsertTodo(e){return Et(Ct,this.http,{method:"PUT",url:"/upsert",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}deleteTodo(e){return Et(Ct,this.http,{method:"DELETE",url:"/todo",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.KVO(Dt.Qq))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Xt=s(5416);const Zt=()=>[25];function te(i,p){1&i&&(t.j41(0,"th",22),t.EFF(1,"tid"),t.k0s())}function ee(i,p){if(1&i&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.tid)}}function ne(i,p){1&i&&(t.j41(0,"th",24),t.EFF(1,"priority"),t.k0s())}function ie(i,p){if(1&i&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.priority)}}function oe(i,p){1&i&&(t.j41(0,"th",25),t.EFF(1,"state"),t.k0s())}function re(i,p){if(1&i&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.state)}}function ae(i,p){if(1&i){const e=t.RV6();t.j41(0,"th",26),t.EFF(1," text "),t.j41(2,"mat-form-field",27)(3,"mat-label"),t.EFF(4,"id_str"),t.k0s(),t.j41(5,"input",28),t.bIt("keyup",function(o){t.eBV(e);const h=t.XpG();return t.Njj(h.applyFilter("text",o))}),t.k0s()()()}}function se(i,p){if(1&i&&(t.j41(0,"td",23)(1,"div",29),t.EFF(2),t.k0s()()),2&i){const e=p.$implicit;t.R7$(2),t.JRh(e.text)}}function le(i,p){1&i&&(t.j41(0,"th",26),t.EFF(1,"tags"),t.k0s())}function ce(i,p){if(1&i&&(t.j41(0,"mat-chip"),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e)}}function de(i,p){if(1&i&&(t.j41(0,"td",23)(1,"mat-chip-set",30),t.Z7z(2,ce,2,1,"mat-chip",null,t.fX1),t.k0s()()),2&i){const e=p.$implicit;t.R7$(2),t.Dyx(e.tags)}}function ue(i,p){1&i&&(t.j41(0,"th",31),t.EFF(1," update_date "),t.k0s())}function he(i,p){if(1&i&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.update_date)}}function fe(i,p){1&i&&(t.j41(0,"th",32),t.EFF(1,"ddl_date"),t.k0s())}function me(i,p){if(1&i&&(t.j41(0,"td",23),t.EFF(1),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.JRh(e.ddl_date)}}function ge(i,p){1&i&&(t.j41(0,"th",26),t.EFF(1,"op"),t.k0s())}function pe(i,p){if(1&i){const e=t.RV6();t.j41(0,"td",23)(1,"button",2),t.bIt("click",function(){const o=t.eBV(e).$implicit,h=t.XpG();return t.Njj(h.upsert_item(o))}),t.EFF(2,"update"),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){const o=t.eBV(e).$implicit,h=t.XpG();return t.Njj(h.delete_item(o))}),t.EFF(4,"delete"),t.k0s()()}}function ye(i,p){1&i&&t.nrm(0,"tr",33)}function Ce(i,p){1&i&&t.nrm(0,"tr",34)}function At(i){try{return JSON.parse(i)}catch{return{}}}var W=function(i){return i.tid="tid",i.priority="priority",i.state="state",i.text="text",i.tags="tags",i.update_date="update_date",i.ddl_date="ddl_date",i.op="op",i}(W||{});const _e=[{path:"",component:f,children:[{path:"qr",component:yt,title:"QR"},{path:"price",component:et,title:"Price"},{path:"todo",component:(()=>{class i{constructor(e,n,o){this.todoService=e,this._dialog=n,this._snackBar=o,this.displayedColumns=[W.tid,W.priority,W.state,W.text,W.tags,W.update_date,W.ddl_date,W.op],this.dataSource=new y.I6([]),this.fetchData()}ngOnInit(){this.dataSource.filterPredicate=(e,n)=>{const o=At(n);for(const h of["text"]){const g=o[h];if(g&&!e[h].trim().toLowerCase().includes(g))return!1}return!0},this.dataSource.sortingDataAccessor=(e,n)=>n==W.update_date?e.update_date||"":n==W.tid?e.tid||0:n==W.ddl_date?e.ddl_date||"":n==W.priority?e.priority||0:n==W.state&&e.state||""}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}onServerUpsertBack(e){for(let n=0;n<this.dataSource.data.length;n++)if(this.dataSource.data[n].tid==e.tid)return this.dataSource.data[n]=e,void(this.dataSource.data=[...this.dataSource.data]);this.dataSource.data.push(e),this.dataSource.data=[...this.dataSource.data]}upsert_item(e){this._dialog.open(jt,{data:structuredClone(e)}).afterClosed().pipe((0,st.p)(n=>n),(0,at.M)(()=>{this.alert("start update")}),(0,X.ZZ)(n=>this.todoService.putUpsertTodo({requestBody:n})),(0,at.M)(n=>{n.success&&n.data&&this.onServerUpsertBack(n.data),this.alert(n.msg)})).subscribe(()=>{},n=>this.alert(`${n}`))}delete_item(e){return this._dialog.open($t._,{width:"250px",data:{text:`\u786e\u5b9a\u5220\u9664 [${e.tid}] ?`,confirmText:"\u5220\u9664"}}).afterClosed().pipe((0,st.p)(n=>n),(0,X.ZZ)(()=>this.todoService.deleteTodo({requestBody:{tid:e.tid}})),(0,at.M)(n=>{this.alert(n.msg),n.success&&(this.dataSource.data=this.dataSource.data.filter(o=>o.tid!=e.tid))})).subscribe()}alert(e){this._snackBar.open(e,"ok")}newTodo(){this.upsert_item({tid:0,priority:0,state:"init",text:"",tags:[],update_date:"",ddl_date:""})}fetchData(){this.todoService.getAllTodos().pipe((0,at.M)(e=>this.dataSource.data=e)).subscribe()}applyFilter(e,n){const o=At(this.dataSource.filter);o[e]=n.target.value.trim().toLowerCase(),this.dataSource.filter=JSON.stringify(o)}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(qt),t.rXU(G.bZ),t.rXU(Xt.UG))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-todo-list"]],viewQuery:function(n,o){if(1&n&&(t.GBs(m.B4,5),t.GBs(Tt.iy,5)),2&n){let h;t.mGM(h=t.lsd())&&(o.sort=h.first),t.mGM(h=t.lsd())&&(o.paginator=h.first)}},standalone:!0,features:[t.aNF],decls:36,vars:5,consts:[["paginator",""],[2,"margin-bottom","1em"],["mat-raised-button","",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","tid"],["mat-header-cell","","mat-sort-header","tid",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","priority"],["mat-header-cell","","mat-sort-header","priority",4,"matHeaderCellDef"],["matColumnDef","state"],["mat-header-cell","","mat-sort-header","state",4,"matHeaderCellDef"],["matColumnDef","text"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","tags"],["matColumnDef","update_date"],["mat-header-cell","","mat-sort-header","update_date",4,"matHeaderCellDef"],["matColumnDef","ddl_date"],["mat-header-cell","","mat-sort-header","ddl_date",4,"matHeaderCellDef"],["matColumnDef","op"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","tid"],["mat-cell",""],["mat-header-cell","","mat-sort-header","priority"],["mat-header-cell","","mat-sort-header","state"],["mat-header-cell",""],[2,"display","flex"],["matInput","","placeholder","Ex. \u5185\u5bb9",3,"keyup"],[1,"table-text"],["aria-label","Fish selection"],["mat-header-cell","","mat-sort-header","update_date"],["mat-header-cell","","mat-sort-header","ddl_date"],["mat-header-row",""],["mat-row",""]],template:function(n,o){if(1&n){const h=t.RV6();t.j41(0,"h1"),t.EFF(1,"Todo List"),t.k0s(),t.j41(2,"div",1)(3,"button",2),t.bIt("click",function(){return t.eBV(h),t.Njj(o.newTodo())}),t.EFF(4,"\u65b0\u589e"),t.k0s(),t.j41(5,"button",2),t.bIt("click",function(){return t.eBV(h),t.Njj(o.fetchData())}),t.EFF(6,"Refetch"),t.k0s()(),t.j41(7,"table",3),t.qex(8,4),t.DNE(9,te,2,0,"th",5)(10,ee,2,1,"td",6),t.bVm(),t.qex(11,7),t.DNE(12,ne,2,0,"th",8)(13,ie,2,1,"td",6),t.bVm(),t.qex(14,9),t.DNE(15,oe,2,0,"th",10)(16,re,2,1,"td",6),t.bVm(),t.qex(17,11),t.DNE(18,ae,6,0,"th",12)(19,se,3,1,"td",6),t.bVm(),t.qex(20,13),t.DNE(21,le,2,0,"th",12)(22,de,4,0,"td",6),t.bVm(),t.qex(23,14),t.DNE(24,ue,2,0,"th",15)(25,he,2,1,"td",6),t.bVm(),t.qex(26,16),t.DNE(27,fe,2,0,"th",17)(28,me,2,1,"td",6),t.bVm(),t.qex(29,18),t.DNE(30,ge,2,0,"th",12)(31,pe,5,0,"td",6),t.bVm(),t.DNE(32,ye,1,0,"tr",19)(33,Ce,1,0,"tr",20),t.k0s(),t.nrm(34,"mat-paginator",21,0)}2&n&&(t.R7$(7),t.Y8G("dataSource",o.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",o.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",o.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(4,Zt)))},dependencies:[d.MD,y.tP,y.Zl,y.tL,y.ji,y.cC,y.YV,y.iL,y.KS,y.$R,y.YZ,y.NB,a.Hl,a.$z,vt.YN,vt.Jl,vt.Jo,m.NQ,m.B4,m.aE,Tt.Ou,Tt.iy,v.fS,v.fg,b.rl,b.nJ],styles:[".table-text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;white-space:pre-wrap;word-break:break-all}"]})}return i})(),title:"Todo List"}]}];let Ee=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[r.iI.forChild(_e),r.iI]})}return i})(),we=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[d.MD,Ee,u.YN,u.X1,yt,f,et]})}return i})()},243:$=>{"use strict";var c={single_source_shortest_paths:function(s,d,r){var t={},a={};a[d]=0;var f,u,m,y,v,C,l=c.PriorityQueue.make();for(l.push(d,0);!l.empty();)for(m in y=(f=l.pop()).cost,v=s[u=f.value]||{})v.hasOwnProperty(m)&&(C=y+v[m],(typeof a[m]>"u"||a[m]>C)&&(a[m]=C,l.push(m,C),t[m]=u));if(typeof r<"u"&&typeof a[r]>"u"){var L=["Could not find a path from ",d," to ",r,"."].join("");throw new Error(L)}return t},extract_shortest_path_from_predecessor_list:function(s,d){for(var r=[],t=d;t;)r.push(t),t=s[t];return r.reverse(),r},find_path:function(s,d,r){var t=c.single_source_shortest_paths(s,d,r);return c.extract_shortest_path_from_predecessor_list(t,r)},PriorityQueue:{make:function(s){var t,d=c.PriorityQueue,r={};for(t in s=s||{},d)d.hasOwnProperty(t)&&(r[t]=d[t]);return r.queue=[],r.sorter=s.sorter||d.default_sorter,r},default_sorter:function(s,d){return s.cost-d.cost},push:function(s,d){this.queue.push({value:s,cost:d}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};$.exports=c},8314:($,c,s)=>{const d=s(2836),r=s(9460),t=s(7030),a=s(6511);function l(f,u,m,y,v){const b=[].slice.call(arguments,1),C=b.length,T="function"==typeof b[C-1];if(!T&&!d())throw new Error("Callback required as last argument");if(!T){if(C<1)throw new Error("Too few arguments provided");return 1===C?(m=u,u=y=void 0):2===C&&!u.getContext&&(y=m,m=u,u=void 0),new Promise(function(D,L){try{const x=r.create(m,y);D(f(x,u,y))}catch(x){L(x)}})}if(C<2)throw new Error("Too few arguments provided");2===C?(v=m,m=u,u=y=void 0):3===C&&(u.getContext&&typeof v>"u"?(v=y,y=void 0):(v=y,y=m,m=u,u=void 0));try{const D=r.create(m,y);v(null,f(D,u,y))}catch(D){v(D)}}c.create=r.create,c.toCanvas=l.bind(null,t.render),c.toDataURL=l.bind(null,t.renderToDataURL),c.toString=l.bind(null,function(f,u,m){return a.render(f,m)})},2836:$=>{$.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6214:($,c,s)=>{const d=s(9089).getSymbolSize;c.getRowColCoords=function(t){if(1===t)return[];const a=Math.floor(t/7)+2,l=d(t),f=145===l?26:2*Math.ceil((l-13)/(2*a-2)),u=[l-7];for(let m=1;m<a-1;m++)u[m]=u[m-1]-f;return u.push(6),u.reverse()},c.getPositions=function(t){const a=[],l=c.getRowColCoords(t),f=l.length;for(let u=0;u<f;u++)for(let m=0;m<f;m++)0===u&&0===m||0===u&&m===f-1||u===f-1&&0===m||a.push([l[u],l[m]]);return a}},1018:($,c,s)=>{const d=s(1677),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(a){this.mode=d.ALPHANUMERIC,this.data=a}t.getBitsLength=function(l){return 11*Math.floor(l/2)+l%2*6},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(l){let f;for(f=0;f+2<=this.data.length;f+=2){let u=45*r.indexOf(this.data[f]);u+=r.indexOf(this.data[f+1]),l.put(u,11)}this.data.length%2&&l.put(r.indexOf(this.data[f]),6)},$.exports=t},4662:$=>{function c(){this.buffer=[],this.length=0}c.prototype={get:function(s){const d=Math.floor(s/8);return 1==(this.buffer[d]>>>7-s%8&1)},put:function(s,d){for(let r=0;r<d;r++)this.putBit(1==(s>>>d-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(s){const d=Math.floor(this.length/8);this.buffer.length<=d&&this.buffer.push(0),s&&(this.buffer[d]|=128>>>this.length%8),this.length++}},$.exports=c},5941:$=>{function c(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}c.prototype.set=function(s,d,r,t){const a=s*this.size+d;this.data[a]=r,t&&(this.reservedBit[a]=!0)},c.prototype.get=function(s,d){return this.data[s*this.size+d]},c.prototype.xor=function(s,d,r){this.data[s*this.size+d]^=r},c.prototype.isReserved=function(s,d){return this.reservedBit[s*this.size+d]},$.exports=c},4969:($,c,s)=>{const d=s(1677);function r(t){this.mode=d.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}r.getBitsLength=function(a){return 8*a},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(let a=0,l=this.data.length;a<l;a++)t.put(this.data[a],8)},$.exports=r},3677:($,c,s)=>{const d=s(7424),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];c.getBlocksCount=function(l,f){switch(f){case d.L:return r[4*(l-1)+0];case d.M:return r[4*(l-1)+1];case d.Q:return r[4*(l-1)+2];case d.H:return r[4*(l-1)+3];default:return}},c.getTotalCodewordsCount=function(l,f){switch(f){case d.L:return t[4*(l-1)+0];case d.M:return t[4*(l-1)+1];case d.Q:return t[4*(l-1)+2];case d.H:return t[4*(l-1)+3];default:return}}},7424:($,c)=>{c.L={bit:1},c.M={bit:0},c.Q={bit:3},c.H={bit:2},c.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},c.from=function(r,t){if(c.isValid(r))return r;try{return function s(d){if("string"!=typeof d)throw new Error("Param is not a string");switch(d.toLowerCase()){case"l":case"low":return c.L;case"m":case"medium":return c.M;case"q":case"quartile":return c.Q;case"h":case"high":return c.H;default:throw new Error("Unknown EC Level: "+d)}}(r)}catch{return t}}},6269:($,c,s)=>{const d=s(9089).getSymbolSize;c.getPositions=function(a){const l=d(a);return[[0,0],[l-7,0],[0,l-7]]}},6254:($,c,s)=>{const d=s(9089),a=d.getBCHDigit(1335);c.getEncodedBits=function(f,u){const m=f.bit<<3|u;let y=m<<10;for(;d.getBCHDigit(y)-a>=0;)y^=1335<<d.getBCHDigit(y)-a;return 21522^(m<<10|y)}},6686:($,c)=>{const s=new Uint8Array(512),d=new Uint8Array(256);(function(){let t=1;for(let a=0;a<255;a++)s[a]=t,d[t]=a,t<<=1,256&t&&(t^=285);for(let a=255;a<512;a++)s[a]=s[a-255]})(),c.log=function(t){if(t<1)throw new Error("log("+t+")");return d[t]},c.exp=function(t){return s[t]},c.mul=function(t,a){return 0===t||0===a?0:s[d[t]+d[a]]}},3264:($,c,s)=>{const d=s(1677),r=s(9089);function t(a){this.mode=d.KANJI,this.data=a}t.getBitsLength=function(l){return 13*l},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(a){let l;for(l=0;l<this.data.length;l++){let f=r.toSJIS(this.data[l]);if(f>=33088&&f<=40956)f-=33088;else{if(!(f>=57408&&f<=60351))throw new Error("Invalid SJIS character: "+this.data[l]+"\nMake sure your charset is UTF-8");f-=49472}f=192*(f>>>8&255)+(255&f),a.put(f,13)}},$.exports=t},3361:($,c)=>{c.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function d(r,t,a){switch(r){case c.Patterns.PATTERN000:return(t+a)%2==0;case c.Patterns.PATTERN001:return t%2==0;case c.Patterns.PATTERN010:return a%3==0;case c.Patterns.PATTERN011:return(t+a)%3==0;case c.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case c.Patterns.PATTERN101:return t*a%2+t*a%3==0;case c.Patterns.PATTERN110:return(t*a%2+t*a%3)%2==0;case c.Patterns.PATTERN111:return(t*a%3+(t+a)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}}c.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},c.from=function(t){return c.isValid(t)?parseInt(t,10):void 0},c.getPenaltyN1=function(t){const a=t.size;let l=0,f=0,u=0,m=null,y=null;for(let v=0;v<a;v++){f=u=0,m=y=null;for(let b=0;b<a;b++){let C=t.get(v,b);C===m?f++:(f>=5&&(l+=f-5+3),m=C,f=1),C=t.get(b,v),C===y?u++:(u>=5&&(l+=u-5+3),y=C,u=1)}f>=5&&(l+=f-5+3),u>=5&&(l+=u-5+3)}return l},c.getPenaltyN2=function(t){const a=t.size;let l=0;for(let f=0;f<a-1;f++)for(let u=0;u<a-1;u++){const m=t.get(f,u)+t.get(f,u+1)+t.get(f+1,u)+t.get(f+1,u+1);(4===m||0===m)&&l++}return 3*l},c.getPenaltyN3=function(t){const a=t.size;let l=0,f=0,u=0;for(let m=0;m<a;m++){f=u=0;for(let y=0;y<a;y++)f=f<<1&2047|t.get(m,y),y>=10&&(1488===f||93===f)&&l++,u=u<<1&2047|t.get(y,m),y>=10&&(1488===u||93===u)&&l++}return 40*l},c.getPenaltyN4=function(t){let a=0;const l=t.data.length;for(let u=0;u<l;u++)a+=t.data[u];return 10*Math.abs(Math.ceil(100*a/l/5)-10)},c.applyMask=function(t,a){const l=a.size;for(let f=0;f<l;f++)for(let u=0;u<l;u++)a.isReserved(u,f)||a.xor(u,f,d(t,u,f))},c.getBestMask=function(t,a){const l=Object.keys(c.Patterns).length;let f=0,u=1/0;for(let m=0;m<l;m++){a(m),c.applyMask(m,t);const y=c.getPenaltyN1(t)+c.getPenaltyN2(t)+c.getPenaltyN3(t)+c.getPenaltyN4(t);c.applyMask(m,t),y<u&&(u=y,f=m)}return f}},1677:($,c,s)=>{const d=s(377),r=s(9359);c.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},c.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},c.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},c.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},c.MIXED={bit:-1},c.getCharCountIndicator=function(l,f){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!d.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?l.ccBits[0]:f<27?l.ccBits[1]:l.ccBits[2]},c.getBestModeForData=function(l){return r.testNumeric(l)?c.NUMERIC:r.testAlphanumeric(l)?c.ALPHANUMERIC:r.testKanji(l)?c.KANJI:c.BYTE},c.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},c.isValid=function(l){return l&&l.bit&&l.ccBits},c.from=function(l,f){if(c.isValid(l))return l;try{return function t(a){if("string"!=typeof a)throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return c.NUMERIC;case"alphanumeric":return c.ALPHANUMERIC;case"kanji":return c.KANJI;case"byte":return c.BYTE;default:throw new Error("Unknown mode: "+a)}}(l)}catch{return f}}},6628:($,c,s)=>{const d=s(1677);function r(t){this.mode=d.NUMERIC,this.data=t.toString()}r.getBitsLength=function(a){return 10*Math.floor(a/3)+(a%3?a%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(a){let l,f,u;for(l=0;l+3<=this.data.length;l+=3)f=this.data.substr(l,3),u=parseInt(f,10),a.put(u,10);const m=this.data.length-l;m>0&&(f=this.data.substr(l),u=parseInt(f,10),a.put(u,3*m+1))},$.exports=r},1744:($,c,s)=>{const d=s(6686);c.mul=function(t,a){const l=new Uint8Array(t.length+a.length-1);for(let f=0;f<t.length;f++)for(let u=0;u<a.length;u++)l[f+u]^=d.mul(t[f],a[u]);return l},c.mod=function(t,a){let l=new Uint8Array(t);for(;l.length-a.length>=0;){const f=l[0];for(let m=0;m<a.length;m++)l[m]^=d.mul(a[m],f);let u=0;for(;u<l.length&&0===l[u];)u++;l=l.slice(u)}return l},c.generateECPolynomial=function(t){let a=new Uint8Array([1]);for(let l=0;l<t;l++)a=c.mul(a,new Uint8Array([1,d.exp(l)]));return a}},9460:($,c,s)=>{const d=s(9089),r=s(7424),t=s(4662),a=s(5941),l=s(6214),f=s(6269),u=s(3361),m=s(3677),y=s(6289),v=s(1252),b=s(6254),C=s(1677),T=s(2868);function j(E,B,R){const _=E.size,A=b.getEncodedBits(B,R);let S,w;for(S=0;S<15;S++)w=1==(A>>S&1),E.set(S<6?S:S<8?S+1:_-15+S,8,w,!0),E.set(8,S<8?_-S-1:S<9?15-S-1+1:15-S-1,w,!0);E.set(_-8,8,1,!0)}function z(E,B,R,_){let A;if(Array.isArray(E))A=T.fromArray(E);else{if("string"!=typeof E)throw new Error("Invalid data");{let q=B;if(!q){const et=T.rawSplit(E);q=v.getBestVersionForData(et,R)}A=T.fromString(E,q||40)}}const S=v.getBestVersionForData(A,R);if(!S)throw new Error("The amount of data is too big to be stored in a QR Code");if(B){if(B<S)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+S+".\n")}else B=S;const w=function I(E,B,R){const _=new t;R.forEach(function(M){_.put(M.mode.bit,4),_.put(M.getLength(),C.getCharCountIndicator(M.mode,E)),M.write(_)});const w=8*(d.getSymbolTotalCodewords(E)-m.getTotalCodewordsCount(E,B));for(_.getLengthInBits()+4<=w&&_.put(0,4);_.getLengthInBits()%8!=0;)_.putBit(0);const k=(w-_.getLengthInBits())/8;for(let M=0;M<k;M++)_.put(M%2?17:236,8);return function H(E,B,R){const _=d.getSymbolTotalCodewords(B),S=_-m.getTotalCodewordsCount(B,R),w=m.getBlocksCount(B,R),M=w-_%w,q=Math.floor(_/w),et=Math.floor(S/w),V=et+1,gt=q-et,Ft=new y(gt);let nt=0;const it=new Array(w),pt=new Array(w);let dt=0;const yt=new Uint8Array(E.buffer);for(let Z=0;Z<w;Z++){const lt=Z<M?et:V;it[Z]=yt.slice(nt,nt+lt),pt[Z]=Ft.encode(it[Z]),nt+=lt,dt=Math.max(dt,lt)}const st=new Uint8Array(_);let X,G,at=0;for(X=0;X<dt;X++)for(G=0;G<w;G++)X<it[G].length&&(st[at++]=it[G][X]);for(X=0;X<gt;X++)for(G=0;G<w;G++)st[at++]=pt[G][X];return st}(_,E,B)}(B,R,A),k=d.getSymbolSize(B),M=new a(k);return function D(E,B){const R=E.size,_=f.getPositions(B);for(let A=0;A<_.length;A++){const S=_[A][0],w=_[A][1];for(let k=-1;k<=7;k++)if(!(S+k<=-1||R<=S+k))for(let M=-1;M<=7;M++)w+M<=-1||R<=w+M||E.set(S+k,w+M,k>=0&&k<=6&&(0===M||6===M)||M>=0&&M<=6&&(0===k||6===k)||k>=2&&k<=4&&M>=2&&M<=4,!0)}}(M,B),function L(E){const B=E.size;for(let R=8;R<B-8;R++){const _=R%2==0;E.set(R,6,_,!0),E.set(6,R,_,!0)}}(M),function x(E,B){const R=l.getPositions(B);for(let _=0;_<R.length;_++){const A=R[_][0],S=R[_][1];for(let w=-2;w<=2;w++)for(let k=-2;k<=2;k++)E.set(A+w,S+k,-2===w||2===w||-2===k||2===k||0===w&&0===k,!0)}}(M,B),j(M,R,0),B>=7&&function P(E,B){const R=E.size,_=v.getEncodedBits(B);let A,S,w;for(let k=0;k<18;k++)A=Math.floor(k/3),S=k%3+R-8-3,w=1==(_>>k&1),E.set(A,S,w,!0),E.set(S,A,w,!0)}(M,B),function N(E,B){const R=E.size;let _=-1,A=R-1,S=7,w=0;for(let k=R-1;k>0;k-=2)for(6===k&&k--;;){for(let M=0;M<2;M++)if(!E.isReserved(A,k-M)){let q=!1;w<B.length&&(q=1==(B[w]>>>S&1)),E.set(A,k-M,q),S--,-1===S&&(w++,S=7)}if(A+=_,A<0||R<=A){A-=_,_=-_;break}}}(M,w),isNaN(_)&&(_=u.getBestMask(M,j.bind(null,M,R))),u.applyMask(_,M),j(M,R,_),{modules:M,version:B,errorCorrectionLevel:R,maskPattern:_,segments:A}}c.create=function(B,R){if(typeof B>"u"||""===B)throw new Error("No input text");let A,S,_=r.M;return typeof R<"u"&&(_=r.from(R.errorCorrectionLevel,r.M),A=v.from(R.version),S=u.from(R.maskPattern),R.toSJISFunc&&d.setToSJISFunction(R.toSJISFunc)),z(B,A,_,S)}},6289:($,c,s)=>{const d=s(1744);function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(a){this.degree=a,this.genPoly=d.generateECPolynomial(this.degree)},r.prototype.encode=function(a){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(a.length+this.degree);l.set(a);const f=d.mod(l,this.genPoly),u=this.degree-f.length;if(u>0){const m=new Uint8Array(this.degree);return m.set(f,u),m}return f},$.exports=r},9359:($,c)=>{const s="[0-9]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+")(?:.|[\r\n]))+";c.KANJI=new RegExp(r,"g"),c.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),c.BYTE=new RegExp(t,"g"),c.NUMERIC=new RegExp(s,"g"),c.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+r+"$"),l=new RegExp("^"+s+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");c.testKanji=function(m){return a.test(m)},c.testNumeric=function(m){return l.test(m)},c.testAlphanumeric=function(m){return f.test(m)}},2868:($,c,s)=>{const d=s(1677),r=s(6628),t=s(1018),a=s(4969),l=s(3264),f=s(9359),u=s(9089),m=s(243);function y(P){return unescape(encodeURIComponent(P)).length}function v(P,j,N){const I=[];let H;for(;null!==(H=P.exec(N));)I.push({data:H[0],index:H.index,mode:j,length:H[0].length});return I}function b(P){const j=v(f.NUMERIC,d.NUMERIC,P),N=v(f.ALPHANUMERIC,d.ALPHANUMERIC,P);let I,H;return u.isKanjiModeEnabled()?(I=v(f.BYTE,d.BYTE,P),H=v(f.KANJI,d.KANJI,P)):(I=v(f.BYTE_KANJI,d.BYTE,P),H=[]),j.concat(N,I,H).sort(function(E,B){return E.index-B.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function C(P,j){switch(j){case d.NUMERIC:return r.getBitsLength(P);case d.ALPHANUMERIC:return t.getBitsLength(P);case d.KANJI:return l.getBitsLength(P);case d.BYTE:return a.getBitsLength(P)}}function x(P,j){let N;const I=d.getBestModeForData(P);if(N=d.from(j,I),N!==d.BYTE&&N.bit<I.bit)throw new Error('"'+P+'" cannot be encoded with mode '+d.toString(N)+".\n Suggested mode is: "+d.toString(I));switch(N===d.KANJI&&!u.isKanjiModeEnabled()&&(N=d.BYTE),N){case d.NUMERIC:return new r(P);case d.ALPHANUMERIC:return new t(P);case d.KANJI:return new l(P);case d.BYTE:return new a(P)}}c.fromArray=function(j){return j.reduce(function(N,I){return"string"==typeof I?N.push(x(I,null)):I.data&&N.push(x(I.data,I.mode)),N},[])},c.fromString=function(j,N){const H=function D(P){const j=[];for(let N=0;N<P.length;N++){const I=P[N];switch(I.mode){case d.NUMERIC:j.push([I,{data:I.data,mode:d.ALPHANUMERIC,length:I.length},{data:I.data,mode:d.BYTE,length:I.length}]);break;case d.ALPHANUMERIC:j.push([I,{data:I.data,mode:d.BYTE,length:I.length}]);break;case d.KANJI:j.push([I,{data:I.data,mode:d.BYTE,length:y(I.data)}]);break;case d.BYTE:j.push([{data:I.data,mode:d.BYTE,length:y(I.data)}])}}return j}(b(j,u.isKanjiModeEnabled())),z=function L(P,j){const N={},I={start:{}};let H=["start"];for(let z=0;z<P.length;z++){const E=P[z],B=[];for(let R=0;R<E.length;R++){const _=E[R],A=""+z+R;B.push(A),N[A]={node:_,lastCount:0},I[A]={};for(let S=0;S<H.length;S++){const w=H[S];N[w]&&N[w].node.mode===_.mode?(I[w][A]=C(N[w].lastCount+_.length,_.mode)-C(N[w].lastCount,_.mode),N[w].lastCount+=_.length):(N[w]&&(N[w].lastCount=_.length),I[w][A]=C(_.length,_.mode)+4+d.getCharCountIndicator(_.mode,j))}}H=B}for(let z=0;z<H.length;z++)I[H[z]].end=0;return{map:I,table:N}}(H,N),E=m.find_path(z.map,"start","end"),B=[];for(let R=1;R<E.length-1;R++)B.push(z.table[E[R]].node);return c.fromArray(function T(P){return P.reduce(function(j,N){const I=j.length-1>=0?j[j.length-1]:null;return I&&I.mode===N.mode?(j[j.length-1].data+=N.data,j):(j.push(N),j)},[])}(B))},c.rawSplit=function(j){return c.fromArray(b(j,u.isKanjiModeEnabled()))}},9089:($,c)=>{let s;const d=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];c.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},c.getSymbolTotalCodewords=function(t){return d[t]},c.getBCHDigit=function(r){let t=0;for(;0!==r;)t++,r>>>=1;return t},c.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');s=t},c.isKanjiModeEnabled=function(){return typeof s<"u"},c.toSJIS=function(t){return s(t)}},377:($,c)=>{c.isValid=function(d){return!isNaN(d)&&d>=1&&d<=40}},1252:($,c,s)=>{const d=s(9089),r=s(3677),t=s(7424),a=s(1677),l=s(377),u=d.getBCHDigit(7973);function y(C,T){return a.getCharCountIndicator(C,T)+4}function v(C,T){let D=0;return C.forEach(function(L){const x=y(L.mode,T);D+=x+L.getBitsLength()}),D}c.from=function(T,D){return l.isValid(T)?parseInt(T,10):D},c.getCapacity=function(T,D,L){if(!l.isValid(T))throw new Error("Invalid QR Code version");typeof L>"u"&&(L=a.BYTE);const j=8*(d.getSymbolTotalCodewords(T)-r.getTotalCodewordsCount(T,D));if(L===a.MIXED)return j;const N=j-y(L,T);switch(L){case a.NUMERIC:return Math.floor(N/10*3);case a.ALPHANUMERIC:return Math.floor(N/11*2);case a.KANJI:return Math.floor(N/13);default:return Math.floor(N/8)}},c.getBestVersionForData=function(T,D){let L;const x=t.from(D,t.M);if(Array.isArray(T)){if(T.length>1)return function b(C,T){for(let D=1;D<=40;D++)if(v(C,D)<=c.getCapacity(D,T,a.MIXED))return D}(T,x);if(0===T.length)return 1;L=T[0]}else L=T;return function m(C,T,D){for(let L=1;L<=40;L++)if(T<=c.getCapacity(L,D,C))return L}(L.mode,L.getLength(),x)},c.getEncodedBits=function(T){if(!l.isValid(T)||T<7)throw new Error("Invalid QR Code version");let D=T<<12;for(;d.getBCHDigit(D)-u>=0;)D^=7973<<d.getBCHDigit(D)-u;return T<<12|D}},7030:($,c,s)=>{const d=s(7077);c.render=function(l,f,u){let m=u,y=f;typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),f||(y=function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),m=d.getOptions(m);const v=d.getImageWidth(l.modules.size,m),b=y.getContext("2d"),C=b.createImageData(v,v);return d.qrToImageData(C.data,l,m),function r(a,l,f){a.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=f,l.width=f,l.style.height=f+"px",l.style.width=f+"px"}(b,y,v),b.putImageData(C,0,0),y},c.renderToDataURL=function(l,f,u){let m=u;return typeof m>"u"&&(!f||!f.getContext)&&(m=f,f=void 0),m||(m={}),c.render(l,f,m).toDataURL(m.type||"image/png",(m.rendererOpts||{}).quality)}},6511:($,c,s)=>{const d=s(7077);function r(l,f){const u=l.a/255,m=f+'="'+l.hex+'"';return u<1?m+" "+f+'-opacity="'+u.toFixed(2).slice(1)+'"':m}function t(l,f,u){let m=l+f;return typeof u<"u"&&(m+=" "+u),m}c.render=function(f,u,m){const y=d.getOptions(u),v=f.modules.size,b=f.modules.data,C=v+2*y.margin,T=y.color.light.a?"<path "+r(y.color.light,"fill")+' d="M0 0h'+C+"v"+C+'H0z"/>':"",D="<path "+r(y.color.dark,"stroke")+' d="'+function a(l,f,u){let m="",y=0,v=!1,b=0;for(let C=0;C<l.length;C++){const T=Math.floor(C%f),D=Math.floor(C/f);!T&&!v&&(v=!0),l[C]?(b++,C>0&&T>0&&l[C-1]||(m+=v?t("M",T+u,.5+D+u):t("m",y,0),y=0,v=!1),T+1<f&&l[C+1]||(m+=t("h",b),b=0)):y++}return m}(b,v,y.margin)+'"/>',P='<svg xmlns="http://www.w3.org/2000/svg" '+(y.width?'width="'+y.width+'" height="'+y.width+'" ':"")+'viewBox="0 0 '+C+" "+C+'" shape-rendering="crispEdges">'+T+D+"</svg>\n";return"function"==typeof m&&m(null,P),P}},7077:($,c)=>{function s(d){if("number"==typeof d&&(d=d.toString()),"string"!=typeof d)throw new Error("Color should be defined as hex string");let r=d.slice().replace("#","").split("");if(r.length<3||5===r.length||r.length>8)throw new Error("Invalid hex color: "+d);(3===r.length||4===r.length)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),6===r.length&&r.push("F","F");const t=parseInt(r.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t,hex:"#"+r.slice(0,6).join("")}}c.getOptions=function(r){r||(r={}),r.color||(r.color={});const a=r.width&&r.width>=21?r.width:void 0;return{width:a,scale:a?4:r.scale||4,margin:typeof r.margin>"u"||null===r.margin||r.margin<0?4:r.margin,color:{dark:s(r.color.dark||"#000000ff"),light:s(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},c.getScale=function(r,t){return t.width&&t.width>=r+2*t.margin?t.width/(r+2*t.margin):t.scale},c.getImageWidth=function(r,t){const a=c.getScale(r,t);return Math.floor((r+2*t.margin)*a)},c.qrToImageData=function(r,t,a){const l=t.modules.size,f=t.modules.data,u=c.getScale(l,a),m=Math.floor((l+2*a.margin)*u),y=a.margin*u,v=[a.color.light,a.color.dark];for(let b=0;b<m;b++)for(let C=0;C<m;C++){let T=4*(b*m+C),D=a.color.light;b>=y&&C>=y&&b<m-y&&C<m-y&&(D=v[f[Math.floor((b-y)/u)*l+Math.floor((C-y)/u)]?1:0]),r[T++]=D.r,r[T++]=D.g,r[T++]=D.b,r[T]=D.a}}}}]);