"use strict";(self.webpackChunkDebuq=self.webpackChunkDebuq||[]).push([[683],{7683:(A,V,h)=>{h.r(V),h.d(V,{RecommendModule:()=>pu});var l=h(177),t=h(4438),k=h(6661);const f=[{id:"zSkMhtOI-hM",title:"\u5bc2\u5bde\u306e\u6c34\u602a Lonely Monster",artist:"MC HotDog \u71b1\u72d7"},{id:"ynxdwc2am8w",title:"\u4e0d\u807d",artist:"\u5927\u652f "},{id:"m-aK4wuI8B8",title:"\u672a\u63a5\u4f86\u96fb",artist:"\u83ab\u5bb0\u7f8a Covered by \u9673\u5ffb\u73a5"},{id:"3kKg2h2m0dg",title:"Echo",artist:"SENA\u5927\u7b11"},{id:"i1WOaGmz6DE",title:"rather do my MATH",artist:"Robin Gan"},{id:"e6YvfHLPwX4",title:"\u8d85\u793e\u4f1a",artist:"Gai"},{id:"7gCtkT1A1tA",title:"\u95dc\u65bc\u5c0f\u718a",artist:"\u86cb\u5821 Soft Lipa"},{id:"siQkshZ49hM",title:"\u620f (Demo)",artist:"\u82cf\u4e8c\u96f6"},{id:"LwoHpiGB2Ug",title:"\u6d6a\u8cbb",artist:"\u5f90\u4f73\u7469"},{id:"YBrrLPBc2Ik",title:"\u76f8\u898b\u6068\u65e9",artist:"\u90a3\u82f1 \u90ce\u6717"},{id:"Slsh0oUzZiE",title:"\u592a\u967d",artist:"\u5a01\u723e"},{id:"1BQKXKL4L50",title:"\u5168\u4e16\u754c\u7684\u670b\u53cb\u90fd\u8b93\u6211\u5931\u671b",artist:"Julia Wu \u5433\u5353\u6e90"},{id:"LeU-VXwZjNc",title:"\u4e0d\u5982\u6211\u4eec\u91cd\u65b0\u6765\u8fc7",artist:"\u66fe\u8efc\u53ef "},{id:"_Yhyp-_hX2s",title:"Lose Yourself",artist:"Eminem "},{id:"vKI9uPtD5fw",title:"\u7406\u6240\u5f53\u7136",artist:"\u7eb3\u8c46"},{id:"3u-74-tUtBU",title:"\u963f\u53f8\u5339\u6797",artist:"\u738b\u4ee5\u592a"},{id:"f1DAlpfC4Gg",title:"\u5147\u624b\u4e0d\u53ea\u4e00\u500b",artist:"\u5c0f\u4eba"},{id:"pVe7e8ppXN0",title:"\u7981\u611b\u4ee4 Antilove",artist:"\u718a\u4ed4 BOWZ"},{id:"gBK1pRHenUY",title:"\u559c\u65b0\u6200\u820a",artist:"JONY J"},{id:"t0EG6pSwcBk",title:"\u4e00\u7d72\u4e0d\u639b",artist:"Eason Chan \u9673\u5955\u8fc5"},{id:"Dnj5Tcpev0Q",title:"\u5e74\u5c11\u6709\u70ba If I Were Young",artist:"\u674e\u69ae\u6d69 Ronghao Li"},{id:"8ux25IcLr8w",title:"\u5609\u8cd3",artist:"\u5f35\u9060 "},{id:"KZbswFDOOsY",title:"\u6d88\u6101 Drowning Sorrows\u300b",artist:"\u6bdb\u4e0d\u6613 Mao Buyi"},{id:"8NxUxLfWLYs",title:"\u540c\u5e74\u540c\u6708\u540c\u6642\u5206",artist:"\u8cf4\u5049\u92d2"},{id:"AB0ckOrsYBg",title:"\u4e16\u754c\u4e0a\u6ca1\u6709\u771f\u6b63\u7684\u611f\u540c\u8eab\u53d7",artist:"\u738b\u6e90"},{id:"5-2ednIJsa8",title:"\u4f60\u7684\u5fae\u7b11",artist:"F.I.R. \u98db\u5152\u6a02\u5718"},{id:"ljXTIRpX0ZM",title:"\u7121\u6240\u6c42\u5fc5\u6eff\u8f09\u800c\u6b78",artist:"\u9673\u7c92"},{id:"iaCQz76rw00",title:"\u8d2b\u6c11\u7a9fII",artist:"\u5e7c\u7a1a\u56ed\u6740\u624b "},{id:"RuixJHUHlcw",title:"\u5de6\u908a",artist:"\u694a\u4e1e\u7433"},{id:"L229QDxDakU",title:"\u4e00\u8def\u5411\u5317 All the Way North",artist:"\u5468\u6770\u502b Jay Chou"},{id:"2QlJO8u1mcc",title:"\u8a31\u5d69",artist:"\u5982\u679c\u7576\u6642 "},{id:"vtIRpyyx5xI",title:"\u554f\u4f60\u55b2(WINNI YO)",artist:"\u9ec3\u4e8e\u6069 \u6eab\u59ae(WINNI)"},{id:"c4_qKyFuL0Y",title:"COLORFUL",artist:"\u5a41\u5cfb\u78a9SHOU"},{id:"9Fmqh-T5RT8",title:"\u4f60\u7d66\u6211\u591a\u5c11\u6642\u9593",artist:"\u83ab\u6587\u851a Karen Mok"},{id:"Pn5UvFxwGK8",title:"\u6b72\u6708\u7e2b\u82b1",artist:"\u9673\u5b78\u51ac"},{id:"5RKbxWDS0Nc",title:"\u5c81\u6708\u795e\u5077",artist:"\u91d1\u739f\u5c90 "},{id:"_l-Mtr-lCAU",title:"\u6642\u9593\u716e\u96e8",artist:"\u90c1\u53ef\u552f "},{id:"uwL23suAKm0",title:"\u975c\u6b62 Still",artist:"\u694a\u4e43\u6587 Naiwen Yang"},{id:"Df9lbCJNhGU",title:"\u59b9\u59b9 Mei Mei",artist:"\u7626\u5b50E.SO"},{id:"zhGnuWwpNxI",title:"\u6771\u4eac\u76c6\u8e0a\u308aTokyo Bon 2020",artist:"\u9ec3\u660e\u5fd7"},{id:"gA0TCcCtos8",title:"\u771f\u5be6",artist:"\u5f35\u60e0\u59b9 A-Mei"},{id:"wG2hbtw1ifg",title:"\u5de6\u624b\u6307\u6708",artist:"\u85a9\u9802\u9802 "},{id:"P0ZhN2LLDEc",title:"\u706f\u706b\u8c23",artist:"\u5370\u5b50\u6708"},{id:"0aR_r21uolo",title:"red lips",artist:"\u6c99\u4e00\u6c40"},{id:"CEJ1RNXf4S4",title:"\u6211\u671f\u5f85\u7684\u4e0d\u662f\u96ea",artist:"\u5f35\u5999\u683c"},{id:"jofNR_WkoCE",title:"What Does The Fox Say?",artist:"the fox"},{id:"iq_d8VSM0nw",title:"On The Floor",artist:"IceJJFish"},{id:"5rh27Qt6YeM",title:"100",artist:"Tizzy T"}];function m(n,r){if(1&n&&(t.j41(0,"div",3)(1,"a",4),t.nrm(2,"img",5),t.j41(3,"h2",6),t.EFF(4),t.k0s(),t.j41(5,"h2",7),t.EFF(6),t.k0s()()()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("href",o.youtubeLink(e.id),t.B4B),t.R7$(),t.Y8G("src",o.youtubeImgUrl(e.id),t.B4B),t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.artist)}}let c=(()=>{class n{constructor(){this.youtubeMusics=f,this.youtubeMusics.sort((e,o)=>e.id<o.id?1:-1)}youtubeImgUrl(e){return`https://img.youtube.com/vi/${e}/mqdefault.jpg`}youtubeLink(e){return`https://www.youtube.com/watch?v=${e}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-music"]],standalone:!0,features:[t.aNF],decls:4,vars:1,consts:[[1,"h1"],[1,"music-all"],["class","music",4,"ngFor","ngForOf"],[1,"music"],[1,"music-a",3,"href"],[1,"music-img",3,"src"],[1,"music-title"],[1,"music-artist"]],template:function(o,i){1&o&&(t.j41(0,"h1",0),t.EFF(1,"\u4e00\u4e2a\u6b4c\u624b\u4e00\u9996\u6b4c"),t.k0s(),t.j41(2,"div",1),t.DNE(3,m,7,4,"div",2),t.k0s()),2&o&&(t.R7$(3),t.Y8G("ngForOf",i.youtubeMusics))},dependencies:[l.pM],styles:["[_nghost-%COMP%]{padding:16px;box-sizing:border-box;display:block;position:relative}.h1[_ngcontent-%COMP%]{padding-left:16px}.music-all[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:space-around}.music-all[_ngcontent-%COMP%]   .music[_ngcontent-%COMP%]{display:inline-block;padding:20px 8px;margin:20px 8px;position:relative;box-sizing:content-box}.music-all[_ngcontent-%COMP%]   .music-a[_ngcontent-%COMP%]{display:block;text-decoration:none;color:inherit}.music-all[_ngcontent-%COMP%]   .music-img[_ngcontent-%COMP%]{max-width:95vw;width:360px;height:202px;background-color:#a9a9a9}.music-all[_ngcontent-%COMP%]   .music-title[_ngcontent-%COMP%]{color:#0f0f0f;display:-webkit-box;font-size:16px;font-weight:500;line-height:22px;overflow-x:hidden;overflow-y:hidden;text-overflow:ellipsis;white-space:normal;width:100%;-webkit-box-orient:vertical;-webkit-line-clamp:2}.music-all[_ngcontent-%COMP%]   .music-artist[_ngcontent-%COMP%]{color:#606060;display:block;font-size:14px;font-weight:400;height:20px;line-height:20px;margin-right:-1.4px;overflow-wrap:normal;overflow-x:hidden;overflow-y:hidden;padding-right:1.4px;text-decoration-color:#606060;text-decoration-line:none;text-decoration-style:solid;text-decoration-thickness:auto;-webkit-text-size-adjust:100%;text-size-adjust:100%;unicode-bidi:isolate;white-space:pre;word-break:break-word}"]})}return n})();var d=h(467),g=h(6850);function b(n,r){if(1&n){const e=t.RV6();t.j41(0,"a",3),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onClick(i))}),t.EFF(1),t.nI1(2,"titlecase"),t.k0s()}if(2&n){const e=r.$implicit,o=t.XpG(2);t.Y8G("active",o.activeLink===e.link),t.R7$(),t.SpI(" ",t.bMT(2,2,e.title)," ")}}function E(n,r){if(1&n&&(t.j41(0,"nav",1),t.DNE(1,b,3,4,"a",2),t.k0s(),t.nrm(2,"mat-tab-nav-panel",null,0)(4,"router-outlet")),2&n){const e=t.sdS(3),o=t.XpG();t.Y8G("tabPanel",e),t.R7$(),t.Y8G("ngForOf",o.links)}}function S(n,r){1&n&&t.nrm(0,"router-outlet")}let _=(()=>{class n{constructor(e,o){this.router=e,this.route=o,this.links=[{title:"\u56fe\u4e66",link:"book"},{title:"\u7535\u5f71",link:"movie"},{title:"\u97f3\u4e50",link:"music"},{title:"\u6e38\u620f",link:"game"}],this.activeLink=""}ngOnInit(){this.activeLink=this.router.routerState.snapshot.url.split("/").pop()||""}onClick({link:e}){var o=this;return(0,d.A)(function*(){(yield o.router.navigate([e],{relativeTo:o.route}))&&(o.activeLink=e)})()}frame(){const e=["/recommend/porn/man","/recommend/movie/ctl"];for(const o of e)if(this.router.url.startsWith(o))return!1;return!0}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(k.Ix),t.rXU(k.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-index"]],standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[["tabPanel",""],["mat-tab-nav-bar","",3,"tabPanel"],["mat-tab-link","",3,"active","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"click","active"]],template:function(o,i){1&o&&t.DNE(0,E,5,2)(1,S,1,0),2&o&&t.vxM(0,i.frame()?0:1)},dependencies:[g.RI,g.Bu,g.hQ,g.Ql,l.pM,k.n3,l.PV]})}return n})();var u=h(9928),M=h(1080),U=h(9714),v=h(9417),R=h(762);h(3004);const B={leading:!0,trailing:!1};function Vt(n,r=M.b,e=B){return o=>o.lift(new di(n,r,e.leading,e.trailing))}class di{constructor(r,e,o,i){this.duration=r,this.scheduler=e,this.leading=o,this.trailing=i}call(r,e){return e.subscribe(new pi(r,this.duration,this.scheduler,this.leading,this.trailing))}}class pi extends R.v{constructor(r,e,o,i,a){super(r),this.duration=e,this.scheduler=o,this.leading=i,this.trailing=a,this._hasTrailingValue=!1,this._trailingValue=null}_next(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(mi,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)}}function mi(n){const{subscriber:r}=n;r.clearThrottle()}var Y=h(8728),Te=h(522),I=h(8841),pt=h(9090),hi=h(5312);h(6443);var nt=function(n){return n[n.YEAR=0]="YEAR",n[n.QUARTER=1]="QUARTER",n[n.MONTH=2]="MONTH",n[n.UNRECOGNIZED=-1]="UNRECOGNIZED",n}(nt||{}),mt=function(n){return n[n.FOLDER=1]="FOLDER",n[n.MP4=2]="MP4",n}(mt||{});function Kt(n){let r=n.b.meta.cover_url;return hi.c.production||n.b.meta.cover_img&&(r=`/img/${n.b.meta.cover_img}`),{type:mt.MP4,productId:n.b.meta.product_id,name:n.b.meta.name,alt:n.b.custom.comments,coverUrl:r,coverName:n.b.file?.filename,releaseDate:n.b.meta.release_date,size:n.b.file?.size,href:n.b.file?.link||n.b.meta.link,categories:n.b.meta.categories,actressList:n.b.meta.actress_list,name2cnt:n.f.name2cnt,star:n.b.custom?.star||0,fetching:!1,director:n.b.meta.director}}class Ni{constructor(){this.mode="range",this.rangeStart=1,this.rangeEnd=1,this.rangeCurrent=1,this.arrayData=[1],this.arrayIndex=0,this.mode="range"}current(){if("range"===this.mode){const r=[this.rangeCurrent];for(let e=1;this.rangeCurrent<=Number.MAX_SAFE_INTEGER-((1<<e)-1)&&this.rangeCurrent+((1<<e)-1)<=this.rangeEnd;e++)r.push(this.rangeCurrent+((1<<e)-1));r[r.length-1]!=this.rangeEnd&&r.push(this.rangeEnd);for(let e=1;this.rangeCurrent>=Number.MIN_SAFE_INTEGER+((1<<e)-1)&&this.rangeCurrent-((1<<e)-1)>=this.rangeStart;e++)r.unshift(this.rangeCurrent-((1<<e)-1));return r[0]!=this.rangeStart&&r.unshift(this.rangeStart),{current:this.rangeCurrent,list:r,hasPrev:this.rangeCurrent!==this.rangeStart,hasNext:this.rangeCurrent!==this.rangeEnd}}{const r=[this.arrayIndex];for(let e=1;this.arrayIndex<=Number.MAX_SAFE_INTEGER-((1<<e)-1)&&this.arrayIndex+((1<<e)-1)<this.arrayData.length;e++)r.push(this.arrayIndex+((1<<e)-1));r[r.length-1]!=this.arrayData.length-1&&r.push(this.arrayData.length-1);for(let e=1;this.arrayIndex>=(1<<e)-1;e++)r.unshift(this.arrayIndex-((1<<e)-1));return 0!=r[0]&&r.unshift(0),{current:this.arrayIndex,list:r,display:r.map(e=>this.arrayData[e]),hasPrev:0!=this.arrayIndex,hasNext:this.arrayIndex!=this.arrayData.length-1}}}setArray(r,e){if(!(r.length>0))throw new Error("array length should large than 0");if(!Number.isInteger(e))throw new Error("idx should be number");if(e<0||e>=r.length)throw new Error("args should satisfy 0 <= idx < array.length");return this.mode="array",this.arrayData=r,this.arrayIndex=e,this.current()}setRange(r,e,o){if(!Number.isInteger(r)||!Number.isInteger(e)||!Number.isInteger(o))throw new Error("args should be integer");if(o<r||o>e)throw new Error("args should satisfy rStart <= rCur <= rEnd");return this.mode="range",this.rangeStart=r,this.rangeEnd=e,this.rangeCurrent=o,this.current()}setRangeCurrent(r){if("range"!==this.mode)throw new Error(`current mode [${this.mode}] is not range`);if(!Number.isInteger(r)||r<this.rangeStart||r>this.rangeEnd)throw new Error("wrong current value");return this.rangeCurrent=r,this.current()}setArrayIndex(r){if("array"!==this.mode)throw new Error(`current mode [${this.mode}] is not array`);if(!Number.isInteger(r)||r<0||r>=this.arrayData.length)throw new Error("wrong index value");return this.arrayIndex=r,this.current()}}class Li{constructor(){this.fetching=!1,this.magnet="",this.subVideos=[],this.refIdx=-1,this.name2cnt=new Map}}function nn(n,r){if(Array.isArray(n)&&Array.isArray(r)){if(n.length!=r.length)return!1;for(let e=0;e<n.length;e++)if(!nn(n[e],r[e]))return!1;return!0}return typeof n==typeof r&&n==r}function rt(n){return"string"==typeof n?[n]:typeof n>"u"?[]:n}function ht(n){return n.sort((r,e)=>r.cnt!=e.cnt?e.cnt-r.cnt:r.text<e.text?-1:1),n}function Qt(n){return n.sort((r,e)=>r.value!=e.value?r.value<e.value?-1:1:r.text<e.text?-1:1),n}function at(n){const r={};for(const o of n)o in r||(r[o]=0),r[o]++;const e=[];for(const o in r){const i=r[o];e.push({text:`${o}(${i})`,cnt:i,picked:!1,value:o})}return e}function Zt(n,r){if(n.length!=r.length)throw new Error("Length not equal");for(let e=0;e<n.length;e++)if(n[e]!=r[e])return n[e]<r[e]?1:-1;return 0}const oo=[(n,r)=>Zt([n.b.meta.release_date||"",n.b.meta.name||""],[r.b.meta.release_date||"",r.b.meta.name||""]),(n,r)=>Zt([n?.b.file?.size||0],[r?.b.file?.size||0]),(n,r)=>Zt([n.b.custom?.star||0,n.b.meta.release_date||""],[r.b.custom?.star||0,r.b.meta.release_date||""])];function on(n){const r=new Map;return n.forEach(e=>{e.meta.actress_list.map(i=>i.name).forEach(i=>{r.set(i,(r.get(i)||0)+1)})}),n.map(e=>{const o={f:new Li,b:e};return o.f.name2cnt=r,o})}let Wt=(()=>{class n{transform(e){return typeof e>"u"?"0B":e<1024?e+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1024/1024).toFixed(2)+"MB":e<1099511627776?(e/1024/1024/1024).toFixed(2)+"GB":(e/1024/1024/1024/1024).toFixed(2)+"TB"}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.EJ8({name:"sizePipe",type:n,pure:!0,standalone:!0})}return n})();var st=h(4816),w=h(8834);function ro(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG();return t.Njj(a.chooseStar(i))}),t.j41(1,"mat-icon",3),t.EFF(2),t.k0s()()}if(2&n){const e=r.index,o=t.XpG();t.R7$(),t.Y8G("color",o.color),t.R7$(),t.SpI(" ",o.showIcon(e)," ")}}let At=(()=>{class n{constructor(){this.color="accent",this.iconOn="star",this.iconOff="star_border",this.chooseStarEvent=new t.bkB,this.ratingArr=[]}ngOnInit(){for(let e=0;e<this.starCount;e++)this.ratingArr.push(e)}showIcon(e){return this.rating>=e+1?this.iconOn:this.iconOff}chooseStar(e){this.chooseStarEvent.emit(e+1)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-star-rating"]],inputs:{rating:"rating",starCount:"starCount",color:"color",iconOn:"iconOn",iconOff:"iconOff"},outputs:{chooseStarEvent:"chooseStarEvent"},standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[[1,"star-rating-row"],["class","star-rating-button","mat-button","",3,"click",4,"ngFor","ngForOf"],["mat-button","",1,"star-rating-button",3,"click"],[3,"color"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.DNE(1,ro,3,2,"button",1),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngForOf",i.ratingArr))},dependencies:[l.pM,w.Hl,w.$z,st.m_,st.An],styles:["[_nghost-%COMP%]{white-space:nowrap;display:flex;flex-shrink:1}.star-rating-row[_ngcontent-%COMP%]{white-space:nowrap;display:inline-flex;flex-shrink:1;overflow:hidden}.star-rating-button[_ngcontent-%COMP%]{display:inline-flex;flex-shrink:1;min-width:auto}"]})}return n})(),bt=(()=>{class n{onClick(e){e.preventDefault();const o=e.currentTarget.getAttribute("href")||"";o.startsWith("/")?window.open(window.location.origin+o,"_blank"):window.open(o,"_blank")}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","appHrefExternalUrl",""]],hostBindings:function(o,i){1&o&&t.bIt("click",function(s){return i.onClick(s)})},standalone:!0})}return n})();const ao=[[["","buttons",""]],[["","extra",""]]],so=["[buttons]","[extra]"];function co(n,r){if(1&n&&(t.j41(0,"div"),t.nrm(1,"img",15),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("src",e.view.coverUrl,t.B4B)("alt",e.view.alt)}}function lo(n,r){if(1&n&&(t.j41(0,"div",16),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",e.view.coverName," ")}}function uo(n,r){if(1&n&&(t.j41(0,"span",20),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.SpI(" ",o.view.name2cnt.get(e.name),"")}}function po(n,r){if(1&n&&(t.j41(0,"a",2)(1,"div"),t.nrm(2,"mat-icon",19),t.EFF(3),t.DNE(4,uo,2,1,"span",20),t.k0s()()),2&n){const e=r.$implicit,o=t.XpG(2);t.Y8G("href",e.url,t.B4B),t.R7$(2),t.Y8G("inline",!0),t.R7$(),t.SpI("",e.name," "),t.R7$(),t.vxM(4,o.view.name2cnt?4:-1)}}function mo(n,r){if(1&n&&(t.j41(0,"div",17),t.DNE(1,po,5,4,"a",18),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.view.actressList)}}function ho(n,r){if(1&n&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.view.director)}}function _o(n,r){if(1&n&&(t.j41(0,"div",21),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",e.view.releaseDate," ")}}function fo(n,r){if(1&n&&(t.j41(0,"div",22),t.EFF(1),t.nI1(2,"sizePipe"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",t.bMT(2,1,e.view.size)," ")}}function go(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e," ")}}let St=(()=>{class n{constructor(){this.chooseStarEvent=new t.bkB}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-video-block"]],inputs:{view:"view"},outputs:{chooseStarEvent:"chooseStarEvent"},standalone:!0,features:[t.aNF],ngContentSelectors:so,decls:21,vars:13,consts:[[1,"rich-grid-media"],[1,"thumbnail"],["appHrefExternalUrl","",3,"href"],[4,"ngIf"],["class","no-img-text",4,"ngIf"],[1,"detail"],[1,"name"],[1,"product-id"],["class","actress-list",4,"ngIf"],[1,"director"],["class","release-date",4,"ngIf"],["class","file-size",4,"ngIf"],["iconOn","thumb_up_alt","iconOff","thumb_up_off_alt","color","primary",3,"chooseStarEvent","rating","starCount"],[1,"vb-categories"],[4,"ngFor","ngForOf"],[3,"src","alt"],[1,"no-img-text"],[1,"actress-list"],["appHrefExternalUrl","",3,"href",4,"ngFor","ngForOf"],["fontIcon","female",3,"inline"],[2,"font-size","0.8em"],[1,"release-date"],[1,"file-size"]],template:function(o,i){1&o&&(t.NAR(ao),t.j41(0,"div",0)(1,"div",1)(2,"a",2),t.DNE(3,co,2,2,"div",3)(4,lo,2,1,"div",4),t.k0s()(),t.j41(5,"div",5)(6,"a",2)(7,"div",6)(8,"div",7),t.EFF(9),t.k0s(),t.EFF(10),t.k0s()(),t.DNE(11,mo,2,1,"div",8)(12,ho,2,1,"div",9)(13,_o,2,1,"div",10)(14,fo,3,3,"div",11),t.j41(15,"div")(16,"app-star-rating",12),t.bIt("chooseStarEvent",function(s){return i.chooseStarEvent.emit(s)}),t.k0s(),t.j41(17,"div",13),t.DNE(18,go,2,1,"span",14),t.k0s(),t.SdG(19),t.k0s(),t.SdG(20,1),t.k0s()()),2&o&&(t.R7$(2),t.Y8G("href",i.view.href,t.B4B),t.R7$(),t.Y8G("ngIf",i.view.coverUrl),t.R7$(),t.Y8G("ngIf",!i.view.coverUrl),t.R7$(2),t.Y8G("href",i.view.href,t.B4B),t.R7$(3),t.JRh(i.view.productId),t.R7$(),t.SpI(" ",i.view.name," "),t.R7$(),t.Y8G("ngIf",i.view.actressList),t.R7$(),t.vxM(12,i.view.director?12:-1),t.R7$(),t.Y8G("ngIf",i.view.releaseDate),t.R7$(),t.Y8G("ngIf",i.view.size),t.R7$(2),t.Y8G("rating",i.view.star||0)("starCount",5),t.R7$(2),t.Y8G("ngForOf",i.view.categories))},dependencies:[l.MD,l.Sq,l.bT,bt,At,Wt,st.m_,st.An],styles:["[_nghost-%COMP%]{display:flex}.rich-grid-media[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;max-width:100vw;box-sizing:border-box;width:360px;flex-basis:360px;flex-shrink:1;padding-left:8px;padding-right:8px;padding-bottom:40px;position:relative}.rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%], .rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .no-img-text[_ngcontent-%COMP%]{width:100%;height:240px;display:inline-flex;justify-content:center;align-items:center;background-color:#b0c4de}.rich-grid-media[_ngcontent-%COMP%]   .detail.online[_ngcontent-%COMP%]{background-color:#b0c4de}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .artist[_ngcontent-%COMP%]{color:#666;font-size:14px}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .actress-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;color:#666;font-size:14px}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .actress-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:.5em}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .director[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;color:#666;font-size:14px}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .product-id[_ngcontent-%COMP%]{margin-right:.5em;display:inline-block}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#000}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .release-date[_ngcontent-%COMP%]{color:#666;font-size:14px}.vb-categories[_ngcontent-%COMP%]{display:flex;box-sizing:border-box;overflow:hidden;flex-wrap:wrap}.vb-categories[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#606060;padding-right:1em}"]})}return n})();var ct=h(6471);const bo=h.e(316).then(h.t.bind(h,2316,19)).then(n=>n.default),ko=h.e(299).then(h.t.bind(h,2299,19)).then(n=>n.default);var it=h(4787),te=h(4421),kt=h(5006);function ee(...n){const r=n.length;if(0===r)throw new Error("list of properties cannot be empty.");return e=>(0,kt.T)(function vo(n,r){return o=>{let i=o;for(let a=0;a<r;a++){const s=i?.[n[a]];if(void 0===s)return;i=s}return i}}(n,r))(e)}var ut=h(8456),j=h(4006);function yo(n,r){1&n&&t.nrm(0,"img",1),2&n&&t.Y8G("src",r.$implicit,t.B4B)}let ne=(()=>{class n{constructor(e,o){this.dialogRef=e,this.data=o}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.CP),t.rXU(j.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-gallery-dialog"]],standalone:!0,features:[t.aNF],decls:8,vars:1,consts:[["mat-dialog-title",""],[2,"max-width","100%",3,"src"],["mat-button","",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content"),t.Z7z(3,yo,1,1,"img",1,t.Vm6),t.k0s(),t.j41(5,"mat-dialog-actions")(6,"button",2),t.bIt("click",function(){return i.onNoClick()}),t.EFF(7,"Close"),t.k0s()()),2&o&&(t.R7$(),t.SpI("Gallery ",i.data.product_id,""),t.R7$(2),t.Dyx(i.data.gallery))},dependencies:[l.MD,j.hM,j.BI,j.E7,j.Yi,w.Hl,w.$z]})}return n})();var Ot=h(2529),rn=h(6939),z=h(6600),Tt=h(8617),vt=h(9327),an=h(2753),tt=h(9969),sn=h(7336),ie=h(5286),Co=h(4670),Gt=h(9493);function xo(n,r){}const Fo={bottomSheetState:(0,tt.hZ)("state",[(0,tt.wk)("void, hidden",(0,tt.iF)({transform:"translateY(100%)"})),(0,tt.wk)("visible",(0,tt.iF)({transform:"translateY(0%)"})),(0,tt.kY)("visible => void, visible => hidden",(0,tt.Os)([(0,tt.i0)(`${z.ed.COMPLEX} ${z.r5.ACCELERATION_CURVE}`),(0,tt.P)("@*",(0,tt.MA)(),{optional:!0})])),(0,tt.kY)("void => visible",(0,tt.Os)([(0,tt.i0)(`${z.ed.EXITING} ${z.r5.DECELERATION_CURVE}`),(0,tt.P)("@*",(0,tt.MA)(),{optional:!0})]))])};let Eo=(()=>{class n extends Ot.sU{constructor(e,o,i,a,s,p,C,G,et){super(e,o,i,a,s,p,C,et),this._animationState="void",this._animationStateChanged=new t.bkB,this._breakpointSubscription=G.observe([vt.Rp.Medium,vt.Rp.Large,vt.Rp.XLarge]).subscribe(()=>{this._toggleClass("mat-bottom-sheet-container-medium",G.isMatched(vt.Rp.Medium)),this._toggleClass("mat-bottom-sheet-container-large",G.isMatched(vt.Rp.Large)),this._toggleClass("mat-bottom-sheet-container-xlarge",G.isMatched(vt.Rp.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(e){"visible"===e.toState&&this._trapFocus(),this._animationStateChanged.emit(e)}_onAnimationStart(e){this._animationStateChanged.emit(e)}_captureInitialFocus(){}_toggleClass(e,o){this._elementRef.nativeElement.classList.toggle(e,o)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(Tt.GX),t.rXU(l.qQ,8),t.rXU(Ot.Pe),t.rXU(Tt.Z7),t.rXU(t.SKi),t.rXU(an.yY),t.rXU(vt.QP),t.rXU(Tt.FN))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(o,i){1&o&&t.Kam("@state.start",function(s){return i._onAnimationStart(s)})("@state.done",function(s){return i._onAnimationDone(s)}),2&o&&(t.zvX("@state",i._animationState),t.BMQ("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-label",i._config.ariaLabel))},standalone:!0,features:[t.Vt3,t.aNF],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(o,i){1&o&&t.DNE(0,xo,0,0,"ng-template",0)},dependencies:[rn.I3],styles:[".mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;background:var(--mat-bottom-sheet-container-background-color);color:var(--mat-bottom-sheet-container-text-color);font-family:var(--mat-bottom-sheet-container-text-font);font-size:var(--mat-bottom-sheet-container-text-size);line-height:var(--mat-bottom-sheet-container-text-line-height);font-weight:var(--mat-bottom-sheet-container-text-weight);letter-spacing:var(--mat-bottom-sheet-container-text-tracking)}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape);border-top-right-radius:var(--mat-bottom-sheet-container-shape)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[Fo.bottomSheetState]}})}return n})();const cn=new t.nKC("MatBottomSheetData");class To{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.ariaModal=!0,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}}class oe{get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}constructor(r,e,o){this._ref=r,this._afterOpened=new ie.B7,this.containerInstance=o,this.disableClose=e.disableClose,o._animationStateChanged.pipe((0,Y.p)(i=>"done"===i.phaseName&&"visible"===i.toState),(0,Gt.s)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),o._animationStateChanged.pipe((0,Y.p)(i=>"done"===i.phaseName&&"hidden"===i.toState),(0,Gt.s)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),r.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),(0,Co.h)(this.backdropClick(),this.keydownEvents().pipe((0,Y.p)(i=>i.keyCode===sn._f))).subscribe(i=>{!this.disableClose&&("keydown"!==i.type||!(0,sn.rp)(i))&&(i.preventDefault(),this.dismiss())})}dismiss(r){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe((0,Y.p)(e=>"start"===e.phaseName),(0,Gt.s)(1)).subscribe(e=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},e.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=r,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}}const Mo=new t.nKC("mat-bottom-sheet-default-options");let ln=(()=>{class n{get _openedBottomSheetRef(){const e=this._parentBottomSheet;return e?e._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(e){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=e:this._bottomSheetRefAtThisLevel=e}constructor(e,o,i,a){this._overlay=e,this._parentBottomSheet=i,this._defaultOptions=a,this._bottomSheetRefAtThisLevel=null,this._dialog=o.get(Ot.lG)}open(e,o){const i={...this._defaultOptions||new To,...o};let a;return this._dialog.open(e,{...i,disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:Eo,scrollStrategy:i.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:a}),providers:(s,p,C)=>(a=new oe(s,i,C),[{provide:oe,useValue:a},{provide:cn,useValue:i.data}])}),a.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===a&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>a.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):a.containerInstance.enter(),this._openedBottomSheetRef=a,a}dismiss(e){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(e)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(an.hJ),t.KVO(t.zZn),t.KVO(n,12),t.KVO(Mo,8))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),So=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({providers:[ln],imports:[Ot.Ph,z.yE,rn.jc,z.yE]})}return n})();var yt=h(3902);function Ro(n,r){if(1&n){const e=t.RV6();t.j41(0,"a",1),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.openLink(i))}),t.j41(1,"span",2),t.EFF(2),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(2),t.JRh(e)}}let Bo=(()=>{class n{constructor(e,o){this._bottomSheetRef=e,this.data=o}openLink(e){this._bottomSheetRef.dismiss(e)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(oe),t.rXU(cn))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-move-to-bottom-sheet"]],standalone:!0,features:[t.aNF],decls:3,vars:0,consts:[["mat-list-item",""],["mat-list-item","",3,"click"],["mat-line",""]],template:function(o,i){1&o&&(t.j41(0,"mat-nav-list"),t.Z7z(1,Ro,3,1,"a",0,t.Vm6),t.k0s()),2&o&&(t.R7$(),t.Dyx(i.data.names))},dependencies:[yt.Fg,yt._L,yt.YE]})}return n})();var N=h(2102),J=h(9631);class un extends Error{constructor(r,e,o){super(o),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=r}}const P={BASE:"/api/v1",CREDENTIALS:"include",ENCODE_PATH:void 0,HEADERS:void 0,PASSWORD:void 0,TOKEN:void 0,USERNAME:void 0,VERSION:"0.1.0",WITH_CREDENTIALS:!1,interceptors:{response:new class Po{constructor(){this._fns=[]}eject(r){const e=this._fns.indexOf(r);-1!==e&&(this._fns=[...this._fns.slice(0,e),...this._fns.slice(e+1)])}use(r){this._fns=[...this._fns,r]}}}};var lt=h(1626),Do=h(696),dn=h(4526),pn=h(3921);const Rt=n=>"string"==typeof n,re=n=>Rt(n)&&""!==n,ae=n=>n instanceof Blob,mn=n=>n instanceof FormData,Nt=function(){var n=(0,d.A)(function*(r,e){return"function"==typeof e?e(r):e});return function(e,o){return n.apply(this,arguments)}}(),D=(n,r,e)=>{const o=((n,r)=>{const e=n.ENCODE_PATH||encodeURI,o=r.url.replace("{api-version}",n.VERSION).replace(/{(.*?)}/g,(a,s)=>r.path?.hasOwnProperty(s)?e(String(r.path[s])):a),i=n.BASE+o;return r.query?i+(n=>{const r=[],e=(i,a)=>{r.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(a))}`)},o=(i,a)=>{null!=a&&(a instanceof Date?e(i,a.toISOString()):Array.isArray(a)?a.forEach(s=>o(i,s)):"object"==typeof a?Object.entries(a).forEach(([s,p])=>o(`${i}[${s}]`,p)):e(i,a))};return Object.entries(n).forEach(([i,a])=>o(i,a)),r.length?`?${r.join("&")}`:""})(r.query):i})(n,e),i=(n=>{if(n.formData){const r=new FormData,e=(o,i)=>{Rt(i)||ae(i)?r.append(o,i):r.append(o,JSON.stringify(i))};return Object.entries(n.formData).filter(([,o])=>null!=o).forEach(([o,i])=>{Array.isArray(i)?i.forEach(a=>e(o,a)):e(o,i)}),r}})(e),a=(n=>{if(n.body)return n.mediaType?.includes("application/json")||n.mediaType?.includes("+json")?JSON.stringify(n.body):Rt(n.body)||ae(n.body)||mn(n.body)?n.body:JSON.stringify(n.body)})(e);return((n,r)=>(0,Do.p)({token:Nt(r,n.TOKEN),username:Nt(r,n.USERNAME),password:Nt(r,n.PASSWORD),additionalHeaders:Nt(r,n.HEADERS)}).pipe((0,kt.T)(({token:e,username:o,password:i,additionalHeaders:a})=>{const s=Object.entries({Accept:"application/json",...a,...r.headers}).filter(([,p])=>null!=p).reduce((p,[C,G])=>({...p,[C]:String(G)}),{});if(re(e)&&(s.Authorization=`Bearer ${e}`),re(o)&&re(i)){const p=(n=>{try{return btoa(n)}catch{return Buffer.from(n).toString("base64")}})(`${o}:${i}`);s.Authorization=`Basic ${p}`}return void 0!==r.body&&(r.mediaType?s["Content-Type"]=r.mediaType:ae(r.body)?s["Content-Type"]=r.body.type||"application/octet-stream":Rt(r.body)?s["Content-Type"]="text/plain":mn(r.body)||(s["Content-Type"]="application/json")),new lt.Lr(s)})))(n,e).pipe((0,pt.n)(s=>((n,r,e,o,i,a,s)=>e.request(r.method,o,{headers:s,body:i??a,withCredentials:n.WITH_CREDENTIALS,observe:"response"}))(n,e,r,o,a,i,s)),(0,pt.n)(function(){var s=(0,d.A)(function*(p){for(const Ct of n.interceptors.response._fns)p=yield Ct(p);const C=(n=>{if(204!==n.status&&null!==n.body)return n.body})(p),G=((n,r)=>{if(r){const e=n.headers.get(r);if(Rt(e))return e}})(p,e.responseHeader);let et=C;return e.responseTransformer&&p.ok&&(et=yield e.responseTransformer(C)),{url:o,ok:p.ok,status:p.status,statusText:p.statusText,body:G??et}});return function(p){return s.apply(this,arguments)}}()),(0,pn.W)(s=>s.status?(0,te.of)({url:o,ok:s.ok,status:s.status,statusText:s.statusText,body:s.error??s.statusText}):(0,dn.$)(()=>s)),(0,kt.T)(s=>(((n,r)=>{const o={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"Im a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",...n.errors}[r.status];if(o)throw new un(n,r,o);if(!r.ok){const i=r.status??"unknown",a=r.statusText??"unknown",s=(()=>{try{return JSON.stringify(r.body,null,2)}catch{return}})();throw new un(n,r,`Generic Error: status: ${i}; status text: ${a}; body: ${s}`)}})(e,s),s.body)),(0,pn.W)(s=>(0,dn.$)(()=>s)))};let Uo=(()=>{class n{constructor(e){this.http=e}helloWorld(){return D(P,this.http,{method:"GET",url:"/"})}echo(e){return D(P,this.http,{method:"POST",url:"/echo",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postDebugTrigger(){return D(P,this.http,{method:"POST",url:"/debug_trigger"})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dt=(()=>{class n{constructor(e){this.http=e}postDetail(e){return D(P,this.http,{method:"POST",url:"/jav/detail",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postStar(e){return D(P,this.http,{method:"POST",url:"/jav/star",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postComments(e){return D(P,this.http,{method:"POST",url:"/jav/comments",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postShow(e){return D(P,this.http,{method:"POST",url:"/jav/show",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}deletePorn(e){return D(P,this.http,{method:"DELETE",url:"/jav/porn",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}deletePornFile(e){return D(P,this.http,{method:"DELETE",url:"/jav/porn_file",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}deletePornDb(e){return D(P,this.http,{method:"DELETE",url:"/jav/porn_db",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postThumbnails(e){return D(P,this.http,{method:"POST",url:"/jav/thumbnails",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postGenSeek(e){return D(P,this.http,{method:"POST",url:"/jav/gen_seek",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}getInfo(){return D(P,this.http,{method:"GET",url:"/jav/get_info"})}postReleaseDate(e){return D(P,this.http,{method:"POST",url:"/jav/release_date",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postUpsertMeta(e){return D(P,this.http,{method:"POST",url:"/jav/upsert_meta",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postAdd(e){return D(P,this.http,{method:"POST",url:"/jav/add_product",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postClearImages(){return D(P,this.http,{method:"POST",url:"/jav/clear_images"})}postGenStaticJson(){return D(P,this.http,{method:"POST",url:"/jav/gen_static_json"})}postListFolder(e){return D(P,this.http,{method:"POST",url:"/jav/local_files/",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postMainList(){return D(P,this.http,{method:"POST",url:"/jav/main_list/"})}post0Star(){return D(P,this.http,{method:"POST",url:"/jav/0star"})}postCoverRedown(e){return D(P,this.http,{method:"POST",url:"/jav/cover_redown",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postJavdbList(e){return D(P,this.http,{method:"POST",url:"/jav/javdb/list",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postSelect(e){return D(P,this.http,{method:"POST",url:"/jav/select",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hn=(()=>{class n{constructor(e){this.http=e}postList(){return D(P,this.http,{method:"POST",url:"/magnet/list"})}postDelete(e){return D(P,this.http,{method:"POST",url:"/magnet/delete",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postUpsertMeta(e){return D(P,this.http,{method:"POST",url:"/magnet/upsert",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postMulAddTags(e){return D(P,this.http,{method:"POST",url:"/magnet/mul_add_tags",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postUpsertCustom(e){return D(P,this.http,{method:"POST",url:"/magnet/upsert_custom",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postUploadTorrents(e){return D(P,this.http,{method:"POST",url:"/magnet/upload_torrents/",formData:e.formData,mediaType:"multipart/form-data",errors:{422:"Validation Error"}})}postAddTorrents2Db(e){return D(P,this.http,{method:"POST",url:"/magnet/add_torrents_2_db/",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}magnetCilisousuoPostSearch(e){return D(P,this.http,{method:"POST",url:"/magnet/cilisousuo/search",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}magnetCilisousuoPostAdd(e){return D(P,this.http,{method:"POST",url:"/magnet/cilisousuo/add",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}magnetCilisousuoPostDetail(e){return D(P,this.http,{method:"POST",url:"/magnet/cilisousuo/detail",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qo=(()=>{class n{constructor(e){this.http=e}postSearch(e){return D(P,this.http,{method:"POST",url:"/magnet/cilisousuo/search",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postAdd(e){return D(P,this.http,{method:"POST",url:"/magnet/cilisousuo/add",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postDetail(e){return D(P,this.http,{method:"POST",url:"/magnet/cilisousuo/detail",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xo=(()=>{class n{constructor(e){this.http=e}postMove(e){return D(P,this.http,{method:"POST",url:"/fs/move",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postRemove(e){return D(P,this.http,{method:"POST",url:"/fs/remove",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}postRename(e){return D(P,this.http,{method:"POST",url:"/fs/rename",body:e.requestBody,mediaType:"application/json",errors:{422:"Validation Error"}})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ho(n,r){if(1&n&&(t.j41(0,"div")(1,"mat-form-field",4)(2,"mat-label"),t.EFF(3),t.k0s(),t.nrm(4,"input",5),t.k0s()()),2&n){const e=r.$implicit;t.R7$(3),t.SpI("",e,":"),t.R7$(),t.Y8G("name",e)("formControlName",e)}}let zo=(()=>{class n{constructor(e,o,i,a){this.dialogRef=e,this.javService=o,this.guiService=i,this.data=a,this.string_keys=[]}ngOnInit(){const e={};Object.entries(this.data.b.meta).forEach(([o,i])=>{if("string"==typeof i){if(["spider_data_ver","cover_img","product_id"].includes(o))return;this.string_keys.push(o),e[o]=new v.MJ(i||"")}}),this.form=new v.gE(e)}onData(){alert(JSON.stringify(this.form.getRawValue()));const e=this.form.getRawValue();this.javService.postUpsertMeta({requestBody:{meta:{...this.data.b.meta,...e}}}).pipe((0,I.M)(i=>{this.dialogRef.close(i)})).subscribe(()=>{},this.guiService.fastApiErrorHandler())}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.CP),t.rXU(dt),t.rXU(Lt),t.rXU(j.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-modify-porn-dialog"]],standalone:!0,features:[t.aNF],decls:17,vars:3,consts:[["mat-dialog-title",""],["matInput","",3,"ngModelChange","ngModel"],[3,"formGroup"],["mat-button","",3,"click"],[2,"min-width","50vw"],["matInput","",3,"name","formControlName"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content")(3,"p"),t.EFF(4,"meta"),t.k0s(),t.j41(5,"mat-form-field")(6,"mat-label"),t.EFF(7,"releaseDate"),t.k0s(),t.j41(8,"input",1),t.mxI("ngModelChange",function(s){return t.DH7(i.data.b.meta.release_date,s)||(i.data.b.meta.release_date=s),s}),t.k0s()(),t.j41(9,"div",2),t.Z7z(10,Ho,5,3,"div",null,t.fX1),t.k0s()(),t.j41(12,"mat-dialog-actions")(13,"button",3),t.bIt("click",function(){return i.onNoClick()}),t.EFF(14,"Cancel"),t.k0s(),t.j41(15,"button",3),t.bIt("click",function(){return i.onData()}),t.EFF(16,"Update"),t.k0s()()),2&o&&(t.R7$(),t.SpI("Modify ",i.data.b.meta.product_id,""),t.R7$(7),t.R50("ngModel",i.data.b.meta.release_date),t.R7$(),t.Y8G("formGroup",i.form),t.R7$(),t.Dyx(i.string_keys))},dependencies:[l.MD,v.X1,v.me,v.BC,v.cb,v.j4,v.JD,N.RG,N.rl,N.nJ,J.fS,J.fg,v.YN,v.vS,w.Hl,w.$z,j.BI,j.Yi,j.E7]})}return n})();var Bt=h(6801);let Jo=(()=>{class n{constructor(e,o){this.dialogRef=e,this.data=o}onNoClick(){this.dialogRef.close()}onDialogClick(e){const o=e.target?.tagName?.toLowerCase();["textarea","button"].includes(o)||this.confirm()}confirm(){this.dialogRef.close(this.data.value)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.CP),t.rXU(j.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-prompt-dialog"]],hostBindings:function(o,i){1&o&&t.bIt("keyup.Enter",function(s){return i.onDialogClick(s)},!1,t.tSv)},standalone:!0,features:[t.aNF],decls:13,vars:4,consts:[["mat-dialog-title",""],[2,"width","100%","min-width","50vw"],["matInput","","name","value","cdkFocusInitial","",2,"min-height","50vh",3,"ngModelChange","ngModel"],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form")(4,"mat-form-field",1)(5,"mat-label"),t.EFF(6),t.k0s(),t.j41(7,"textarea",2),t.mxI("ngModelChange",function(s){return t.DH7(i.data.value,s)||(i.data.value=s),s}),t.k0s()()()(),t.j41(8,"mat-dialog-actions")(9,"button",3),t.bIt("click",function(){return i.onNoClick()}),t.EFF(10,"\u53d6\u6d88"),t.k0s(),t.j41(11,"button",4),t.EFF(12,"\u786e\u5b9a"),t.k0s()()),2&o&&(t.R7$(),t.JRh(i.data.title),t.R7$(5),t.JRh(i.data.label||"\u8bf7\u8f93\u5165"),t.R7$(),t.R50("ngModel",i.data.value),t.R7$(4),t.Y8G("mat-dialog-close",i.data.value))},dependencies:[N.RG,N.rl,N.nJ,J.fS,J.fg,v.YN,v.qT,v.me,v.BC,v.cb,v.vS,v.cV,w.Hl,w.$z,j.BI,j.Yi,j.E7,j.tx]})}return n})();var _t=h(5416);let Lt=(()=>{class n{constructor(e,o,i,a){this._snackBar=e,this._dialog=o,this.fsService=i,this.javService=a,this.name2cnt=new Map}alert(e){this._snackBar.open(e,"",{duration:3e3})}fastApiErrorHandler(){return e=>{const o=e();console.error(o),this.alert(String(o))}}rename_file(e){const o=e.file?.filename;return this.ngPrompt(`\u4fee\u6539\u540d\u79f0 ${o}`,o).pipe((0,pt.n)(i=>i?this.fsService.postRename({requestBody:[{src:e.file.path,newname:i}]}).pipe((0,I.M)(a=>{let s="";for(const p of a)p.success?(s+=`[${p.src} => ${p.dest}]`,e.file.filename=i):s+=`[${p.src}:${p.err_msg}]`;this.alert(s)})):(0,it.H)([])))}previewOfficial(e){return this._dialog.open(ne,{data:{product_id:e.meta.product_id,gallery:e.meta.gallery}}).afterClosed()}changeStar(e,o){return this.javService.postStar({requestBody:{product_id:e.meta.product_id,star:o}}).pipe((0,I.M)(()=>{e.custom.star=o,this.alert("Successful update")}))}ngPrompt(e,o){return this._dialog.open(Jo,{data:{title:e,value:o}}).afterClosed()}updateComments(e){return this.ngPrompt(`\u8bc4\u4ef7 ${e.meta?.product_id}`,e.custom?.comments||"").pipe((0,pt.n)(o=>null===o?(0,it.H)([]):this.javService.postComments({requestBody:{product_id:e.meta?.product_id,comments:o}}).pipe((0,I.M)(i=>{e.custom.comments=o}))))}moveFiles(e,o){if(!e)return(0,it.H)([]);if(!e.b.file)return(0,it.H)([]);if(!e.f.subVideos)return(0,it.H)([]);if(0==e.f.subVideos?.length)return(0,it.H)([]);const a=e.b.file.path.split("/");a.splice(-1);const s=a.join("/");return this.javService.postListFolder({requestBody:{base:s}}).pipe(ee("unix_files"),(0,kt.T)(p=>{const C=p.filter(G=>G.type==mt.FOLDER).map(G=>G.name);return C.sort(),""!=s&&C.unshift(".."),C}),(0,pt.n)(p=>o.open(Bo,{data:{names:p}}).afterDismissed().pipe((0,Y.p)(C=>!!C))),(0,kt.T)(p=>""==s?p:s+"/"+p),(0,pt.n)(p=>this.fsService.postMove({requestBody:{files:e.f.subVideos.map(C=>C.b.file?.path),dest:p}})),(0,I.M)(p=>{let C="";for(const G of p)C+=G.err_msg?`${G.src} : ${G.err_msg}\n`:`${G.src} => ${G.dest}\n`;this.alert(C)}))}refetch(e,o=""){return e?(this.alert(`start refetch ${e.b.meta.product_id} with engine=[${o}]`),this.javService.postAdd({requestBody:{product_ids:[e.b.meta.product_id],force:!0,engine:o}}).pipe((0,I.M)(i=>{this.alert(i.message)}))):(0,it.H)([])}modifyPorn(e){const o=e.b.meta.product_id;return this._dialog.open(zo,{data:{...structuredClone(e),frontEnd:void 0,subVideo:void 0}}).afterClosed().pipe((0,Y.p)(i=>i),(0,I.M)(i=>{e.b.meta=i,this.alert(`updated [${o}] meta`)}))}changeHide(e,o){return this.javService.postShow({requestBody:{product_id:e.b.meta.product_id,show:!o}}).pipe((0,I.M)(i=>{e.b.custom.show=!o}))}remove(e){const o=e.b.meta.product_id,i=e.f.subVideos.filter(a=>a.b.file?.path).map(a=>a.b.file?.path);return this._dialog.open(Bt._,{width:"250px",data:{text:`\u786e\u5b9a\u5220\u9664${o} (${i})?`,confirmText:"Delete"}}).afterClosed().pipe((0,Y.p)(a=>a),(0,ut.ZZ)(()=>this.javService.deletePorn({requestBody:{product_id:o,file_paths:i}})),(0,I.M)(a=>{this.alert(`${o}\u5220\u9664\u6210\u529f(${a.info.dbcnt}\u6570\u636e,${a.info.files.length}\u6587\u4ef6,${a.info.magnetcnt}\u78c1\u529b)`)}))}deleteFile(e){return this.deleteFiles(e.f.subVideos.filter(o=>o.b.file?.path).map(o=>o.b))}deleteFiles(e){const o=e.map(i=>i.file?.path);return this._dialog.open(Bt._,{width:"250px",data:{text:`\u786e\u5b9a\u5220\u9664(${o})?`,confirmText:"Delete"}}).afterClosed().pipe((0,Y.p)(i=>i),(0,ut.ZZ)(()=>this.javService.deletePornFile({requestBody:{file_paths:o}})),(0,I.M)(i=>{let a="";for(let s=0;s<i.files.length;s++){const p=i.files[s];p.success?(a+=`[\u6587\u4ef6${p.path}\u5220\u9664\u6210\u529f]`,e[s].file.path=""):a+=`[${p.message}]`}this.alert(a)}))}deleteDB(e){const o=e.meta.product_id;return this._dialog.open(Bt._,{width:"250px",data:{text:`\u786e\u5b9a\u5220\u9664 ${o} DB?`,confirmText:"Delete"}}).afterClosed().pipe((0,Y.p)(i=>i),(0,ut.ZZ)(()=>this.javService.deletePornDb({requestBody:{product_id:o}})),(0,I.M)(i=>{this.alert(`${o}:DB \u5220\u9664\u6210\u529f(count = ${i.dbcnt},magnet cnt=${i.magnetcnt})`)}))}seekthumbnails(e){this.alert(`Start seek thumbnail [${e.meta.product_id}][${e.file?.path}]]`);const o=e.file?.path;return o?this.javService.postGenSeek({requestBody:{file_path:o}}).pipe((0,I.M)(i=>{this.alert(i.success?`\u6210\u529f Generate (${i} seek thumbnails)`:i.message)}),(0,Y.p)(i=>i.success),(0,ut.ZZ)(i=>{const a=[];for(let s=0;s<i.count;s++)a.push(`/img/.cache_seek/${i.path_hash}/${s}.png`);return(0,te.of)("")})):(0,it.H)([])}thumbnails(e,o=16){this.alert(`Start thumbnail [${e.meta.product_id}][${e.file?.path}]]`);const i=e.file?.path;return i?this.javService.postThumbnails({requestBody:{file_path:i,count:o}}).pipe((0,I.M)(a=>{this.alert(a.success?`\u6210\u529f Generate (${a.pathhash} ${a.count} thumbnails)`:a.message)}),(0,Y.p)(a=>a.success),(0,ut.ZZ)(a=>{const s=[];for(let p=0;p<a.count;p++){const C=`00${p}`.substr(-3);s.push(`/img/.cache_thumbnails/${a.pathhash}_${C}.png`)}return this._dialog.open(ne,{data:{product_id:e.meta.product_id,gallery:s}}).afterClosed()})):(0,it.H)([])}apiTest(){return this.javService.postDetail({requestBody:{engine:"javdb",url:"https://javdb.com/v/2mmBZ"}}).pipe((0,I.M)(e=>{this.alert(e.message)}))}genStaticJson(){return this.javService.postGenStaticJson()}getPornList(){let e=(0,te.of)([]);return e=(0,t.naY)()?this.javService.postMainList().pipe(ee("data")):(0,it.H)(bo),e}getInfo(){return(0,it.H)(ko)}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(_t.UG),t.KVO(j.bZ),t.KVO(Xo),t.KVO(dt))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Yo=h(6860);function Ko(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.removeFile())}),t.EFF(1,"\u{1f5d1}\ufe0f\u5220\u6587\u4ef6"),t.k0s()}}function Qo(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onHideChange(!0))}),t.EFF(1,"Hide"),t.k0s()}}function Zo(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.onHideChange(!1))}),t.EFF(1,"Unhide"),t.k0s()}}function Wo(n,r){if(1&n&&(t.j41(0,"a",7)(1,"button",5),t.EFF(2,"VLC"),t.j41(3,"mat-icon"),t.EFF(4,"open_in_new"),t.k0s()()()),2&n){const e=t.XpG(3);t.FCK("href","intent://",e.window.location.host,"",null==e.porn.b.file?null:e.porn.b.file.link,"#Intent;scheme=http;package=org.videolan.vlc;end",t.B4B)}}function tr(n,r){if(1&n&&t.DNE(0,Wo,5,3,"a",7),2&n){const e=t.XpG(2);t.vxM(0,e.platform.ANDROID?0:-1)}}function er(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.previewOfficial())}),t.EFF(1),t.k0s()}if(2&n){const e=t.XpG(2);t.R7$(),t.SpI(" \u{1f5bc}\ufe0f\u9884\u89c8\u56fe(",e.porn.b.meta.gallery.length,") ")}}function nr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.thumbnails())}),t.EFF(1,"\u{1f5bc}\ufe0f\u5206\u6bb5\u622a\u56fe"),t.k0s(),t.j41(2,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.seekthumbnails())}),t.EFF(3,"\u{1f5bc}\ufe0fseek\u622a\u56fe"),t.k0s()}}function ir(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-chip-set",3)(1,"mat-chip"),t.EFF(2),t.k0s()(),t.j41(3,"div")(4,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.remove())}),t.EFF(5,"\u{1f5d1}\ufe0f\u5220\u9664"),t.k0s(),t.DNE(6,Ko,2,0,"button",5),t.j41(7,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeDB())}),t.EFF(8,"\u{1f5d1}\ufe0f\u5220meta\u6570\u636e"),t.k0s()(),t.j41(9,"div")(10,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.updateComments())}),t.EFF(11,"\u8bc4\u8bba"),t.k0s(),t.j41(12,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.moveFiles())}),t.EFF(13,"\u79fb\u52a8"),t.k0s(),t.j41(14,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.modify())}),t.EFF(15,"\u7f16\u8f91"),t.k0s(),t.DNE(16,Qo,2,0,"button",5)(17,Zo,2,0),t.k0s(),t.j41(18,"div")(19,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refetch())}),t.EFF(20,"\u{1f310}\u91cd\u65b0\u83b7\u53d6"),t.k0s(),t.j41(21,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refetch("javdb"))}),t.EFF(22,"\u{1f310}\u7528Javdb\u91cd\u65b0\u83b7\u53d6"),t.k0s(),t.j41(23,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.redown_cover(i.porn.b.meta.product_id))}),t.EFF(24," \u{1f5bc}\ufe0f\u91cd\u65b0\u4e0b\u8f7d\u5c01\u9762 "),t.k0s()(),t.j41(25,"div"),t.DNE(26,tr,1,1),t.j41(27,"a",6)(28,"button",5),t.EFF(29,"source"),t.j41(30,"mat-icon"),t.EFF(31,"open_in_new"),t.k0s()()(),t.j41(32,"a",6)(33,"button",5),t.EFF(34,"jinjier"),t.j41(35,"mat-icon"),t.EFF(36,"open_in_new"),t.k0s()()(),t.j41(37,"a",6)(38,"button",5),t.EFF(39,"njav"),t.j41(40,"mat-icon"),t.EFF(41,"open_in_new"),t.k0s()()(),t.j41(42,"a",6)(43,"button",5),t.EFF(44,"missav "),t.j41(45,"mat-icon"),t.EFF(46,"open_in_new"),t.k0s()()(),t.j41(47,"a",6)(48,"button",5),t.EFF(49,"javmost"),t.j41(50,"mat-icon"),t.EFF(51,"open_in_new"),t.k0s()()(),t.j41(52,"a",6)(53,"button",5),t.EFF(54,"Javbus"),t.j41(55,"mat-icon"),t.EFF(56,"open_in_new"),t.k0s()()(),t.j41(57,"a",6)(58,"button",5),t.EFF(59,"JavDB"),t.j41(60,"mat-icon"),t.EFF(61,"open_in_new"),t.k0s()()(),t.j41(62,"a",6)(63,"button",5),t.EFF(64,"JavLibrary"),t.j41(65,"mat-icon"),t.EFF(66,"open_in_new"),t.k0s()()(),t.j41(67,"a",6)(68,"button",5),t.EFF(69,"\u{1f9f2} \u641c\u78c1\u529b"),t.k0s()()(),t.DNE(70,er,2,1,"button",5)(71,nr,4,0)}if(2&n){const e=t.XpG();t.R7$(2),t.JRh(e.porn.b.meta.data_type),t.R7$(4),t.vxM(6,null!=e.porn.b.file&&e.porn.b.file.path?6:-1),t.R7$(10),t.vxM(16,e.porn.b.custom.show?16:17),t.R7$(10),t.vxM(26,null!=e.porn.b.file&&e.porn.b.file.link?26:-1),t.R7$(),t.Y8G("href",e.porn.b.meta.link,t.B4B),t.R7$(5),t.Y8G("href","https://jinjier.art/search?q="+e.porn.b.meta.product_id,t.B4B),t.R7$(5),t.Y8G("href","https://njav.tv/zh/search?keyword="+e.porn.b.meta.product_id,t.B4B),t.R7$(5),t.Y8G("href","https://missav.com/search/"+e.porn.b.meta.product_id,t.B4B),t.R7$(5),t.Y8G("href","https://www5.javmost.com/"+e.porn.b.meta.product_id,t.B4B),t.R7$(5),t.Y8G("href","https://www.javbus.com/search/"+e.porn.b.meta.product_id+"&type=&parent=ce",t.B4B),t.R7$(5),t.Y8G("href","https://javdb.com/search?q="+e.porn.b.meta.product_id+"&f=all",t.B4B),t.R7$(5),t.Y8G("href","https://www.javlibrary.com/tw/vl_searchbyid.php?keyword="+e.porn.b.meta.product_id,t.B4B),t.R7$(5),t.Y8G("href",e.window.location.origin+"#/recommend/porn/man/magnet?tab=cilisousuo&q="+e.porn.b.meta.product_id,t.B4B),t.R7$(3),t.vxM(70,e.porn.b.meta.gallery.length?70:-1),t.R7$(),t.vxM(71,null!=e.porn.b.file&&e.porn.b.file.path?71:-1)}}function or(n,r){if(1&n&&(t.j41(0,"a",8),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.Y8G("href","magnet:?xt=urn:btih:"+e.porn.f.magnet,t.B4B),t.R7$(),t.JRh(e.porn.f.magnet)}}function rr(n,r){if(1&n){const e=t.RV6();t.j41(0,"a",6)(1,"button",5),t.EFF(2),t.nI1(3,"sizePipe"),t.k0s()(),t.j41(4,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.renameFile(i))}),t.EFF(5,"\u91cd\u547d\u540d"),t.k0s(),t.j41(6,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.removeFileFromPornSrc(i))}),t.EFF(7,"\u{1f5d1}\ufe0f\u5220\u9664"),t.k0s(),t.j41(8,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.playVideoEvent.emit(null==i.b.file?null:i.b.file.link))}),t.EFF(9," \u64ad\u653e "),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.Y8G("href",null==e.b.file?null:e.b.file.link,t.B4B),t.R7$(2),t.Lme(" ",null==e.b.file?null:e.b.file.filename,"(",t.bMT(3,3,null==e.b.file?null:e.b.file.size),") ")}}function ar(n,r){if(1&n&&t.DNE(0,rr,10,5),2&n){const e=r.$implicit;t.vxM(0,null!=e.b.file&&e.b.file.size?0:-1)}}function sr(n,r){if(1&n&&t.Z7z(0,ar,1,1,null,null,t.Vm6),2&n){const e=t.XpG(2);t.Dyx(e.porn.f.subVideos)}}function cr(n,r){if(1&n&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.JRh(e.porn.b.custom.comments)}}function lr(n,r){if(1&n&&t.DNE(0,or,2,2,"a",8)(1,sr,2,0)(2,cr,2,1,"div",9),2&n){const e=t.XpG();t.vxM(0,e.porn.f.magnet?0:-1),t.R7$(),t.vxM(1,e.porn.f.subVideos&&e.porn.f.subVideos.length>0?1:-1),t.R7$(),t.vxM(2,e.porn.b.custom.comments?2:-1)}}let _n=(()=>{class n{constructor(e,o,i,a){this.guiService=e,this.javService=o,this.matBottomSheet=i,this.platform=a,this.devMode=(0,t.naY)(),this.customButtons=[],this.itemUpdatedEvent=new t.bkB,this.itemDeleteEvent=new t.bkB,this.playVideoEvent=new t.bkB,this.porn2view=Kt,this.window=window}renameFile(e){this.guiService.rename_file(e.b).subscribe(()=>{this.itemUpdatedEvent.emit()},this.guiService.fastApiErrorHandler())}previewOfficial(){this.guiService.previewOfficial(this.porn.b).subscribe(()=>{})}changeStar(e){this.devMode&&this.guiService.changeStar(this.porn.b,e).subscribe()}updateComments(){this.guiService.updateComments(this.porn.b).subscribe()}moveFiles(){this.guiService.moveFiles(this.porn,this.matBottomSheet).subscribe()}refetch(e=""){this.guiService.refetch(this.porn,e).subscribe(o=>{o.success&&(this.porn.b.meta=o.detail?.[0].data?.meta)},this.guiService.fastApiErrorHandler())}modify(){this.guiService.modifyPorn(this.porn).subscribe(()=>this.itemUpdatedEvent.emit())}onHideChange(e){this.guiService.changeHide(this.porn,e).subscribe()}remove(){this.guiService.remove(this.porn).subscribe(e=>{this.itemDeleteEvent.emit()})}removeFile(){this.guiService.deleteFile(this.porn).subscribe(()=>this.itemUpdatedEvent.emit())}removeFileFromPornSrc(e){this.guiService.deleteFiles([e.b]).subscribe(()=>this.itemUpdatedEvent.emit())}removeDB(){this.guiService.deleteDB(this.porn.b).subscribe(()=>this.itemUpdatedEvent.emit())}thumbnails(){this.guiService.thumbnails(this.porn.b).subscribe()}seekthumbnails(){this.guiService.seekthumbnails(this.porn.b).subscribe({error:this.guiService.fastApiErrorHandler()})}redown_cover(e){this.guiService.alert(`start redownload cover ${e}`),this.javService.postCoverRedown({requestBody:{product_id:e}}).pipe((0,I.M)(o=>{this.guiService.alert(`redownload cover ${e}: ${o.success}`)})).subscribe(()=>{},this.guiService.fastApiErrorHandler())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Lt),t.rXU(dt),t.rXU(ln),t.rXU(Yo.OD))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn-video-block"]],inputs:{porn:"porn",customButtons:"customButtons"},outputs:{itemUpdatedEvent:"itemUpdatedEvent",itemDeleteEvent:"itemDeleteEvent",playVideoEvent:"playVideoEvent"},standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[[3,"chooseStarEvent","view"],["ngProjectAs","[buttons]",5,["","buttons",""]],["ngProjectAs","[extra]",5,["","extra",""]],["aria-label","source"],["mat-button","",3,"click"],["mat-button",""],["appHrefExternalUrl","",3,"href"],[3,"href"],[1,"magnet-a",3,"href"],[1,"comments"]],template:function(o,i){1&o&&(t.j41(0,"app-video-block",0),t.bIt("chooseStarEvent",function(s){return i.changeStar(s)}),t.qex(1,1),t.DNE(2,ir,72,15),t.bVm(),t.qex(3,2),t.DNE(4,lr,3,3),t.bVm(),t.k0s()),2&o&&(t.Y8G("view",i.porn2view(i.porn)),t.R7$(2),t.vxM(2,i.devMode?2:-1),t.R7$(2),t.vxM(4,i.devMode?4:-1))},dependencies:[l.MD,St,ct.YN,ct.Jl,ct.Jo,w.Hl,w.$z,st.m_,st.An,bt,Wt],styles:[".comments[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;white-space:pre-wrap;word-break:break-all}.magnet-a[_ngcontent-%COMP%]{font-size:.7em;font-family:Courier New,Courier,monospace}"]})}return n})();var $=h(3586),ur=h(5817),fn=h(6651);const dr=["*"];let q=(()=>{class n{static#t=this.VG_ENDED="ended";static#e=this.VG_PAUSED="paused";static#n=this.VG_PLAYING="playing";static#i=this.VG_LOADING="waiting";static#o=this.\u0275fac=function(o){return new(o||n)};static#r=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H=(()=>{class n{constructor(){this.medias={},this.playerReadyEvent=new t.bkB(!0),this.isPlayerReady=!1}onPlayerReady(e){this.fsAPI=e,this.isPlayerReady=!0,this.playerReadyEvent.emit(this)}getDefaultMedia(){for(const e in this.medias)if(this.medias[e])return this.medias[e]}getMasterMedia(){let e;for(const o in this.medias)if("true"===this.medias[o].vgMaster||!0===this.medias[o].vgMaster){e=this.medias[o];break}return e||this.getDefaultMedia()}isMasterDefined(){let e=!1;for(const o in this.medias)if("true"===this.medias[o].vgMaster||!0===this.medias[o].vgMaster){e=!0;break}return e}getMediaById(e=null){let o=this.medias[e];return(!e||"*"===e)&&(o=this),o}play(){for(const e in this.medias)this.medias[e]&&this.medias[e].play()}pause(){for(const e in this.medias)this.medias[e]&&this.medias[e].pause()}get duration(){return this.$$getAllProperties("duration")}set currentTime(e){this.$$setAllProperties("currentTime",e)}get currentTime(){return this.$$getAllProperties("currentTime")}set state(e){this.$$setAllProperties("state",e)}get state(){return this.$$getAllProperties("state")}set volume(e){this.$$setAllProperties("volume",e)}get volume(){return this.$$getAllProperties("volume")}set playbackRate(e){this.$$setAllProperties("playbackRate",e)}get playbackRate(){return this.$$getAllProperties("playbackRate")}get canPlay(){return this.$$getAllProperties("canPlay")}get canPlayThrough(){return this.$$getAllProperties("canPlayThrough")}get isMetadataLoaded(){return this.$$getAllProperties("isMetadataLoaded")}get isWaiting(){return this.$$getAllProperties("isWaiting")}get isCompleted(){return this.$$getAllProperties("isCompleted")}get isLive(){return this.$$getAllProperties("isLive")}get isMaster(){return this.$$getAllProperties("isMaster")}get time(){return this.$$getAllProperties("time")}get buffer(){return this.$$getAllProperties("buffer")}get buffered(){return this.$$getAllProperties("buffered")}get subscriptions(){return this.$$getAllProperties("subscriptions")}get textTracks(){return this.$$getAllProperties("textTracks")}seekTime(e,o=!1){for(const i in this.medias)this.medias[i]&&this.$$seek(this.medias[i],e,o)}$$seek(e,o,i=!1){let a,s=e.duration;i?(this.isMasterDefined()&&(s=this.getMasterMedia().duration),a=o*s/100):a=o,e.currentTime=a}addTextTrack(e,o,i){for(const a in this.medias)this.medias[a]&&this.$$addTextTrack(this.medias[a],e,o,i)}$$addTextTrack(e,o,i,a){e.addTextTrack(o,i,a)}$$getAllProperties(e){const o={};let i;for(const s in this.medias)this.medias[s]&&(o[s]=this.medias[s]);switch(Object.keys(o).length){case 0:switch(e){case"state":i=q.VG_PAUSED;break;case"playbackRate":case"volume":i=1;break;case"time":i={current:0,total:0,left:0}}break;case 1:i=o[Object.keys(o)[0]][e];break;default:i=o[this.getMasterMedia().id][e]}return i}$$setAllProperties(e,o){for(const i in this.medias)this.medias[i]&&(this.medias[i][e]=o)}registerElement(e){this.videogularElement=e}registerMedia(e){this.medias[e.id]=e}unregisterMedia(e){delete this.medias[e.id]}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mt=(()=>{class n{constructor(){this.isHiddenSubject=new ie.B7,this.isHidden=this.isHiddenSubject.asObservable()}state(e){this.isHiddenSubject.next(e)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pt=(()=>{class n{static getZIndex(){let o,e=1;const i=document.getElementsByTagName("*");for(let a=0,s=i.length;a<s;a++)o=parseInt(window.getComputedStyle(i[a])["z-index"],10),o>e&&(e=o+1);return e}static isMobileDevice(){return typeof window.orientation<"u"||-1!==navigator.userAgent.indexOf("IEMobile")}static isiOSDevice(){return(navigator.userAgent.match(/ip(hone|ad|od)/i)||n.isIpadOS())&&!navigator.userAgent.match(/(iemobile)[\/\s]?([\w\.]*)/i)}static isIpadOS(){return navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}static isCordova(){return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Dt=(()=>{class n{constructor(){this.nativeFullscreen=!0,this.isFullscreen=!1,this.onChangeFullscreen=new t.bkB}init(e,o){this.videogularElement=e,this.medias=o;const i={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror"},newWebkit:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},oldWebkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror"},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror"},ios:{enabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",request:"webkitEnterFullscreen",exit:"webkitExitFullscreen",onchange:"webkitendfullscreen",onerror:"webkitfullscreenerror"},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",onchange:"MSFullscreenChange",onerror:"MSFullscreenError"}};for(const s in i)if(i[s].enabled in document){this.polyfill=i[s];break}if(Pt.isiOSDevice()&&(this.polyfill=i.ios),this.isAvailable=null!=this.polyfill,null==this.polyfill)return;let a;switch(this.polyfill.onchange){case"mozfullscreenchange":a=document;break;case"webkitendfullscreen":a=this.medias.toArray()[0].elem;break;default:a=e}this.fsChangeSubscription=(0,$.R)(a,this.polyfill.onchange).subscribe(()=>{this.onFullscreenChange()})}onFullscreenChange(){this.isFullscreen=!!document[this.polyfill.element],this.onChangeFullscreen.emit(this.isFullscreen)}toggleFullscreen(e=null){this.isFullscreen?this.exit():this.request(e)}request(e){e||(e=this.videogularElement),this.isFullscreen=!0,this.onChangeFullscreen.emit(!0),this.isAvailable&&this.nativeFullscreen&&(Pt.isMobileDevice()?((!this.polyfill.enabled&&e===this.videogularElement||Pt.isiOSDevice())&&(e=this.medias.toArray()[0].elem),this.enterElementInFullScreen(e)):this.enterElementInFullScreen(this.videogularElement))}enterElementInFullScreen(e){e[this.polyfill.request]()}exit(){this.isFullscreen=!1,this.onChangeFullscreen.emit(!1),this.isAvailable&&this.nativeFullscreen&&document[this.polyfill.exit]()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O=(()=>{class n{static#t=this.VG_ABORT="abort";static#e=this.VG_CAN_PLAY="canplay";static#n=this.VG_CAN_PLAY_THROUGH="canplaythrough";static#i=this.VG_DURATION_CHANGE="durationchange";static#o=this.VG_EMPTIED="emptied";static#r=this.VG_ENCRYPTED="encrypted";static#a=this.VG_ENDED="ended";static#s=this.VG_ERROR="error";static#c=this.VG_LOADED_DATA="loadeddata";static#l=this.VG_LOADED_METADATA="loadedmetadata";static#u=this.VG_LOAD_START="loadstart";static#d=this.VG_PAUSE="pause";static#p=this.VG_PLAY="play";static#m=this.VG_PLAYING="playing";static#h=this.VG_PROGRESS="progress";static#_=this.VG_RATE_CHANGE="ratechange";static#f=this.VG_SEEK="seek";static#g=this.VG_SEEKED="seeked";static#b=this.VG_SEEKING="seeking";static#k=this.VG_STALLED="stalled";static#v=this.VG_SUSPEND="suspend";static#y=this.VG_TIME_UPDATE="timeupdate";static#C=this.VG_VOLUME_CHANGE="volumechange";static#x=this.VG_WAITING="waiting";static#F=this.VG_LOAD="load";static#E=this.VG_ENTER="enter";static#T=this.VG_EXIT="exit";static#M=this.VG_START_ADS="startads";static#S=this.VG_END_ADS="endads";static#R=this.\u0275fac=function(o){return new(o||n)};static#B=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),se=(()=>{class n{constructor(e,o){this.api=e,this.ref=o,this.state=q.VG_PAUSED,this.time={current:0,total:0,left:0},this.buffer={end:0},this.canPlay=!1,this.canPlayThrough=!1,this.isMetadataLoaded=!1,this.isWaiting=!1,this.isCompleted=!1,this.isLive=!1,this.isBufferDetected=!1,this.checkInterval=200,this.currentPlayPos=0,this.lastPlayPos=0,this.playAtferSync=!1,this.bufferDetected=new ie.B7}ngOnInit(){this.elem=this.vgMedia.nodeName?this.vgMedia:this.vgMedia.elem,this.api.registerMedia(this),this.subscriptions={abort:(0,$.R)(this.elem,O.VG_ABORT),canPlay:(0,$.R)(this.elem,O.VG_CAN_PLAY),canPlayThrough:(0,$.R)(this.elem,O.VG_CAN_PLAY_THROUGH),durationChange:(0,$.R)(this.elem,O.VG_DURATION_CHANGE),emptied:(0,$.R)(this.elem,O.VG_EMPTIED),encrypted:(0,$.R)(this.elem,O.VG_ENCRYPTED),ended:(0,$.R)(this.elem,O.VG_ENDED),error:(0,$.R)(this.elem,O.VG_ERROR),loadedData:(0,$.R)(this.elem,O.VG_LOADED_DATA),loadedMetadata:(0,$.R)(this.elem,O.VG_LOADED_METADATA),loadStart:(0,$.R)(this.elem,O.VG_LOAD_START),pause:(0,$.R)(this.elem,O.VG_PAUSE),play:(0,$.R)(this.elem,O.VG_PLAY),playing:(0,$.R)(this.elem,O.VG_PLAYING),progress:(0,$.R)(this.elem,O.VG_PROGRESS),rateChange:(0,$.R)(this.elem,O.VG_RATE_CHANGE),seeked:(0,$.R)(this.elem,O.VG_SEEKED),seeking:(0,$.R)(this.elem,O.VG_SEEKING),stalled:(0,$.R)(this.elem,O.VG_STALLED),suspend:(0,$.R)(this.elem,O.VG_SUSPEND),timeUpdate:(0,$.R)(this.elem,O.VG_TIME_UPDATE),volumeChange:(0,$.R)(this.elem,O.VG_VOLUME_CHANGE),waiting:(0,$.R)(this.elem,O.VG_WAITING),startAds:(0,$.R)(window,O.VG_START_ADS),endAds:(0,$.R)(window,O.VG_END_ADS),mutation:new ur.c(e=>{const o=new MutationObserver(i=>{e.next(i)});return o.observe(this.elem,{childList:!0,attributes:!0}),()=>{o.disconnect()}}),bufferDetected:this.bufferDetected},this.mutationObs=this.subscriptions.mutation.subscribe(this.onMutation.bind(this)),this.canPlayObs=this.subscriptions.canPlay.subscribe(this.onCanPlay.bind(this)),this.canPlayThroughObs=this.subscriptions.canPlayThrough.subscribe(this.onCanPlayThrough.bind(this)),this.loadedMetadataObs=this.subscriptions.loadedMetadata.subscribe(this.onLoadMetadata.bind(this)),this.waitingObs=this.subscriptions.waiting.subscribe(this.onWait.bind(this)),this.progressObs=this.subscriptions.progress.subscribe(this.onProgress.bind(this)),this.endedObs=this.subscriptions.ended.subscribe(this.onComplete.bind(this)),this.playingObs=this.subscriptions.playing.subscribe(this.onStartPlaying.bind(this)),this.playObs=this.subscriptions.play.subscribe(this.onPlay.bind(this)),this.pauseObs=this.subscriptions.pause.subscribe(this.onPause.bind(this)),this.timeUpdateObs=this.subscriptions.timeUpdate.subscribe(this.onTimeUpdate.bind(this)),this.volumeChangeObs=this.subscriptions.volumeChange.subscribe(this.onVolumeChange.bind(this)),this.errorObs=this.subscriptions.error.subscribe(this.onError.bind(this)),this.vgMaster&&this.api.playerReadyEvent.subscribe(()=>{this.prepareSync()})}prepareSync(){const e=[];for(const o in this.api.medias)this.api.medias[o]&&e.push(this.api.medias[o].subscriptions.canPlay);this.canPlayAllSubscription=(0,U.zV)(e).pipe((0,kt.T)((...o)=>{o.some(s=>!!s?.target&&4===s.target.readyState)&&!this.syncSubscription&&(this.startSync(),this.syncSubscription.unsubscribe())})).subscribe()}startSync(){this.syncSubscription=(0,fn.O)(0,1e3).subscribe(()=>{for(const e in this.api.medias)if(this.api.medias[e]!==this){const o=this.api.medias[e].currentTime-this.currentTime;o<-.3||o>.3?(this.playAtferSync=this.state===q.VG_PLAYING,this.pause(),this.api.medias[e].pause(),this.api.medias[e].currentTime=this.currentTime):this.playAtferSync&&(this.play(),this.api.medias[e].play(),this.playAtferSync=!1)}})}onMutation(e){for(let o=0,i=e.length;o<i;o++){const a=e[o];if("attributes"===a.type&&"src"===a.attributeName){if(a.target.src&&a.target.src.length>0&&a.target.src.indexOf("blob:")<0){this.loadMedia();break}}else if("childList"===a.type&&a.removedNodes.length&&"source"===a.removedNodes[0].nodeName.toLowerCase()){this.loadMedia();break}}}loadMedia(){this.vgMedia.pause(),this.vgMedia.currentTime=0,this.stopBufferCheck(),this.isBufferDetected=!0,this.bufferDetected.next(this.isBufferDetected),setTimeout(()=>this.vgMedia.load(),10)}play(){if(!(this.playPromise||this.state!==q.VG_PAUSED&&this.state!==q.VG_ENDED))return this.playPromise=this.vgMedia.play(),this.playPromise&&this.playPromise.then&&this.playPromise.catch&&this.playPromise.then(()=>{this.playPromise=null}).catch(()=>{this.playPromise=null}),this.playPromise}pause(){this.playPromise?this.playPromise.then(()=>{this.vgMedia.pause()}):this.vgMedia.pause()}get id(){let e;return this.vgMedia&&(e=this.vgMedia.id),e}get duration(){return this.vgMedia.duration===1/0?this.specifiedDuration:this.vgMedia.duration}set currentTime(e){this.vgMedia.currentTime=e}get currentTime(){return this.vgMedia.currentTime}set volume(e){this.vgMedia.volume=e}get volume(){return this.vgMedia.volume}set playbackRate(e){this.vgMedia.playbackRate=e}get playbackRate(){return this.vgMedia.playbackRate}get buffered(){return this.vgMedia.buffered}get textTracks(){return this.vgMedia.textTracks}onCanPlay(e){this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected),this.canPlay=!0,this.ref.detectChanges()}onCanPlayThrough(e){this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected),this.canPlayThrough=!0,this.ref.detectChanges()}onLoadMetadata(e){this.isMetadataLoaded=!0,this.time={current:0,left:0,total:1e3*this.duration},this.state=q.VG_PAUSED;const o=Math.round(this.time.total);this.isLive=o===1/0,this.ref.detectChanges()}onWait(e){this.isWaiting=!0,this.ref.detectChanges()}onComplete(e){this.isCompleted=!0,this.state=q.VG_ENDED,this.ref.detectChanges()}onStartPlaying(e){this.state=q.VG_PLAYING,this.ref.detectChanges()}onPlay(e){this.state=q.VG_PLAYING,this.vgMaster&&(!this.syncSubscription||this.syncSubscription.closed)&&this.startSync(),this.startBufferCheck(),this.ref.detectChanges()}onPause(e){this.state=q.VG_PAUSED,this.vgMaster&&(this.playAtferSync||this.syncSubscription.unsubscribe()),this.stopBufferCheck(),this.ref.detectChanges()}onTimeUpdate(e){const o=this.buffered.length-1;this.time={current:1e3*this.currentTime,total:this.time.total,left:1e3*(this.duration-this.currentTime)},o>=0&&(this.buffer={end:1e3*this.buffered.end(o)}),this.ref.detectChanges()}onProgress(e){const o=this.buffered.length-1;o>=0&&(this.buffer={end:1e3*this.buffered.end(o)}),this.ref.detectChanges()}onVolumeChange(e){this.ref.detectChanges()}onError(e){this.ref.detectChanges()}bufferCheck(){const e=1/this.checkInterval;this.currentPlayPos=this.currentTime,!this.isBufferDetected&&this.currentPlayPos<this.lastPlayPos+e&&(this.isBufferDetected=!0),this.isBufferDetected&&this.currentPlayPos>this.lastPlayPos+e&&(this.isBufferDetected=!1),this.bufferDetected.closed||this.bufferDetected.next(this.isBufferDetected),this.lastPlayPos=this.currentPlayPos}startBufferCheck(){this.checkBufferSubscription=(0,fn.O)(0,this.checkInterval).subscribe(()=>{this.bufferCheck()})}stopBufferCheck(){this.checkBufferSubscription&&this.checkBufferSubscription.unsubscribe(),this.isBufferDetected=!1,this.bufferDetected.next(this.isBufferDetected)}seekTime(e,o=!1){let i;i=o?e*this.duration/100:e,this.currentTime=i}addTextTrack(e,o,i,a){const s=this.vgMedia.addTextTrack(e,o,i);return a&&(s.mode=a),s}ngOnDestroy(){this.vgMedia.src="",this.mutationObs?.unsubscribe(),this.canPlayObs?.unsubscribe(),this.canPlayThroughObs?.unsubscribe(),this.loadedMetadataObs?.unsubscribe(),this.waitingObs?.unsubscribe(),this.progressObs?.unsubscribe(),this.endedObs?.unsubscribe(),this.playingObs?.unsubscribe(),this.playObs?.unsubscribe(),this.pauseObs?.unsubscribe(),this.timeUpdateObs?.unsubscribe(),this.volumeChangeObs?.unsubscribe(),this.errorObs?.unsubscribe(),this.checkBufferSubscription?.unsubscribe(),this.syncSubscription?.unsubscribe(),this.bufferDetected?.complete(),this.bufferDetected?.unsubscribe(),this.api.unregisterMedia(this)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(H),t.rXU(t.gRc))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["","vgMedia",""]],inputs:{vgMedia:"vgMedia",vgMaster:"vgMaster"}})}return n})(),mr=(()=>{class n{constructor(e,o,i,a){this.api=o,this.fsAPI=i,this.controlsHidden=a,this.isFullscreen=!1,this.isNativeFullscreen=!1,this.areControlsHidden=!1,this.onPlayerReady=new t.bkB,this.onMediaReady=new t.bkB,this.subscriptions=[],this.elem=e.nativeElement,this.api.registerElement(this.elem)}ngAfterContentInit(){this.medias.toArray().forEach(e=>{this.api.registerMedia(e)}),this.fsAPI.init(this.elem,this.medias),this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this))),this.subscriptions.push(this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this))),this.api.onPlayerReady(this.fsAPI),this.onPlayerReady.emit(this.api)}onChangeFullscreen(e){this.fsAPI.nativeFullscreen?this.isNativeFullscreen=e:(this.isFullscreen=e,this.zIndex=e?Pt.getZIndex().toString():"auto")}onHideControls(e){this.areControlsHidden=e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H),t.rXU(Dt),t.rXU(Mt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-player"]],contentQueries:function(o,i,a){if(1&o&&t.wni(a,se,5),2&o){let s;t.mGM(s=t.lsd())&&(i.medias=s)}},hostVars:8,hostBindings:function(o,i){2&o&&(t.xc7("z-index",i.zIndex),t.AVh("fullscreen",i.isFullscreen)("native-fullscreen",i.isNativeFullscreen)("controls-hidden",i.areControlsHidden))},outputs:{onPlayerReady:"onPlayerReady",onMediaReady:"onMediaReady"},features:[t.Jv_([H,Dt,Mt])],ngContentSelectors:dr,decls:1,vars:0,template:function(o,i){1&o&&(t.NAR(),t.SdG(0))},styles:["vg-player{font-family:videogular;position:relative;display:flex;width:100%;height:100%;overflow:hidden;background-color:#000}vg-player.fullscreen{position:fixed;left:0;top:0}vg-player.native-fullscreen.controls-hidden{cursor:none}\n"],encapsulation:2})}return n})();const hr=[H,Mt,Dt,Pt,O,q];let Ut=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({providers:[...hr],imports:[l.MD]})}return n})();const ce=["*"],_r=["volumeBar"],fr=n=>({dragging:n});function br(n,r){1&n&&(t.j41(0,"span"),t.EFF(1,"LIVE"),t.k0s())}function kr(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"vgUtc"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(t.i5U(2,1,e.getTime(),e.vgFormat))}}function Cr(n,r){1&n&&t.nrm(0,"span",2)}let gn=(()=>{class n{constructor(e,o,i){this.API=e,this.hidden=i,this.isAdsPlaying="initial",this.hideControls=!1,this.vgAutohide=!1,this.vgAutohideTime=3,this.subscriptions=[],this.elem=o.nativeElement}ngOnInit(){this.mouseMove$=(0,$.R)(this.API.videogularElement,"mousemove"),this.subscriptions.push(this.mouseMove$.subscribe(this.show.bind(this))),this.touchStart$=(0,$.R)(this.API.videogularElement,"touchstart"),this.subscriptions.push(this.touchStart$.subscribe(this.show.bind(this))),this.mouseClick$=(0,$.R)(this.API.videogularElement,"click"),this.subscriptions.push(this.mouseClick$.subscribe(this.show.bind(this))),this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.target.subscriptions.play.subscribe(this.onPlay.bind(this))),this.subscriptions.push(this.target.subscriptions.pause.subscribe(this.onPause.bind(this))),this.subscriptions.push(this.target.subscriptions.startAds.subscribe(this.onStartAds.bind(this))),this.subscriptions.push(this.target.subscriptions.endAds.subscribe(this.onEndAds.bind(this)))}ngAfterViewInit(){this.vgAutohide?this.hide():this.show()}onPlay(){this.vgAutohide&&this.hide()}onPause(){clearTimeout(this.timer),this.hideControls=!1,this.hidden.state(!1)}onStartAds(){this.isAdsPlaying="none"}onEndAds(){this.isAdsPlaying="initial"}hide(){this.vgAutohide&&(clearTimeout(this.timer),this.hideAsync())}show(){clearTimeout(this.timer),this.hideControls=!1,this.hidden.state(!1),this.vgAutohide&&this.hideAsync()}hideAsync(){this.API.state===q.VG_PLAYING&&(this.timer=setTimeout(()=>{this.hideControls=!0,this.hidden.state(!0)},1e3*this.vgAutohideTime))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(H),t.rXU(t.aKT),t.rXU(Mt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-controls"]],hostVars:4,hostBindings:function(o,i){2&o&&(t.xc7("pointer-events",i.isAdsPlaying),t.AVh("hide",i.hideControls))},inputs:{vgFor:"vgFor",vgAutohide:"vgAutohide",vgAutohideTime:"vgAutohideTime"},ngContentSelectors:ce,decls:1,vars:0,template:function(o,i){1&o&&(t.NAR(),t.SdG(0))},styles:["vg-controls{position:absolute;display:flex;width:100%;height:50px;z-index:300;bottom:0;background-color:#00000080;transition:bottom 1s}vg-controls.hide{bottom:-50px}\n"],encapsulation:2})}return n})(),bn=(()=>{class n{constructor(e,o){this.API=o,this.subscriptions=[],this.elem=e.nativeElement,this.isDragging=!1}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.ariaValue=100*this.getVolume()}onClick(e){this.setVolume(this.calculateVolume(e.clientX))}onMouseDown(e){this.mouseDownPosX=e.clientX,this.isDragging=!0}onDrag(e){this.isDragging&&this.setVolume(this.calculateVolume(e.clientX))}onStopDrag(e){this.isDragging&&(this.isDragging=!1,this.mouseDownPosX===e.clientX&&this.setVolume(this.calculateVolume(e.clientX)))}arrowAdjustVolume(e){38===e.keyCode||39===e.keyCode?(e.preventDefault(),this.setVolume(Math.max(0,Math.min(100,100*this.getVolume()+10)))):(37===e.keyCode||40===e.keyCode)&&(e.preventDefault(),this.setVolume(Math.max(0,Math.min(100,100*this.getVolume()-10))))}calculateVolume(e){const o=this.volumeBarRef.nativeElement.getBoundingClientRect();return(e-o.left)/o.width*100}setVolume(e){this.target.volume=Math.max(0,Math.min(1,e/100)),this.ariaValue=100*this.target.volume}getVolume(){return this.target?this.target.volume:0}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-volume"]],viewQuery:function(o,i){if(1&o&&t.GBs(_r,7),2&o){let a;t.mGM(a=t.lsd())&&(i.volumeBarRef=a.first)}},hostBindings:function(o,i){1&o&&t.bIt("mousemove",function(s){return i.onDrag(s)},!1,t.EBC)("mouseup",function(s){return i.onStopDrag(s)},!1,t.EBC)("keydown",function(s){return i.arrowAdjustVolume(s)})},inputs:{vgFor:"vgFor"},decls:5,vars:9,consts:[["volumeBar",""],["tabindex","0","role","slider","aria-label","volume level","aria-level","polite","aria-valuemin","0","aria-valuemax","100","aria-orientation","horizontal",1,"volumeBar",3,"click","mousedown"],[1,"volumeBackground",3,"ngClass"],[1,"volumeValue"],[1,"volumeKnob"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"div",1,0),t.bIt("click",function(p){return t.eBV(a),t.Njj(i.onClick(p))})("mousedown",function(p){return t.eBV(a),t.Njj(i.onMouseDown(p))}),t.j41(2,"div",2),t.nrm(3,"div",3)(4,"div",4),t.k0s()()}2&o&&(t.BMQ("aria-valuenow",i.ariaValue)("aria-valuetext",i.ariaValue+"%"),t.R7$(2),t.Y8G("ngClass",t.eq3(7,fr,i.isDragging)),t.R7$(),t.xc7("width",85*i.getVolume()+"%"),t.R7$(),t.xc7("left",85*i.getVolume()+"%"))},dependencies:[l.YU],styles:["vg-volume{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;height:50px;width:100px;cursor:pointer;color:#fff;line-height:50px}vg-volume .volumeBar{position:relative;display:flex;flex-grow:1;align-items:center}vg-volume .volumeBackground{display:flex;flex-grow:1;height:5px;pointer-events:none;background-color:#333}vg-volume .volumeValue{display:flex;height:5px;pointer-events:none;background-color:#fff;transition:all .2s ease-out}vg-volume .volumeKnob{position:absolute;width:15px;height:15px;left:0;top:50%;transform:translateY(-50%);border-radius:15px;pointer-events:none;background-color:#fff;transition:all .2s ease-out}vg-volume .volumeBackground.dragging .volumeValue,vg-volume .volumeBackground.dragging .volumeKnob{transition:none}\n"],encapsulation:2})}return n})(),kn=(()=>{class n{transform(e,o){let i=new Date(e),a=o,s=i.getUTCSeconds(),p=i.getUTCMinutes(),C=i.getUTCHours();return s<10&&(s="0"+s),p<10&&(p="0"+p),C<10&&(C="0"+C),a=a.replace(/ss/g,s),a=a.replace(/mm/g,p),a=a.replace(/hh/g,C),a}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.EJ8({name:"vgUtc",type:n,pure:!0})}return n})(),vn=(()=>{class n{constructor(e,o){this.API=o,this.vgProperty="current",this.vgFormat="mm:ss",this.subscriptions=[],this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}getTime(){let e=0;return this.target&&(e=Math.round(this.target.time[this.vgProperty]),e=isNaN(e)||this.target.isLive?0:e),e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-time-display"]],inputs:{vgFor:"vgFor",vgProperty:"vgProperty",vgFormat:"vgFormat"},ngContentSelectors:ce,decls:3,vars:2,consts:[[4,"ngIf"]],template:function(o,i){1&o&&(t.NAR(),t.DNE(0,br,2,0,"span",0)(1,kr,3,4,"span",0),t.SdG(2)),2&o&&(t.Y8G("ngIf",null==i.target?null:i.target.isLive),t.R7$(),t.Y8G("ngIf",!(null!=i.target&&i.target.isLive)))},dependencies:[l.bT,kn],styles:["vg-time-display{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;height:50px;width:60px;cursor:pointer;color:#fff;line-height:50px;pointer-events:none;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}\n"],encapsulation:2})}return n})(),yn=(()=>{class n{constructor(e,o,i){this.API=o,this.hideScrubBar=!1,this.vgSlider=!0,this.isSeeking=!1,this.wasPlaying=!1,this.subscriptions=[],this.elem=e.nativeElement,this.subscriptions.push(i.isHidden.subscribe(a=>this.onHideScrubBar(a)))}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}seekStart(){this.target.canPlay&&(this.isSeeking=!0,this.target.state===q.VG_PLAYING&&(this.wasPlaying=!0),this.target.pause())}seekMove(e){if(this.isSeeking){const o=Math.max(Math.min(100*e/this.elem.scrollWidth,99.9),0);this.target.time.current=o*this.target.time.total/100,this.target.seekTime(o,!0)}}seekEnd(e){if(this.isSeeking=!1,this.target.canPlay){if(!1!==e){const o=Math.max(Math.min(100*e/this.elem.scrollWidth,99.9),0);this.target.seekTime(o,!0)}this.wasPlaying&&(this.wasPlaying=!1,this.target.play())}}touchEnd(){this.isSeeking=!1,this.wasPlaying&&(this.wasPlaying=!1,this.target.play())}getTouchOffset(e){let o=0,i=e.target;for(;i;)o+=i.offsetLeft,i=i.offsetParent;return e.touches[0].pageX-o}onMouseDownScrubBar(e){this.target&&(this.target.isLive||(this.vgSlider?this.seekStart():this.seekEnd(e.offsetX)))}onMouseMoveScrubBar(e){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.seekMove(e.offsetX)}onMouseUpScrubBar(e){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.seekEnd(e.offsetX)}onTouchStartScrubBar(e){this.target&&(this.target.isLive||(this.vgSlider?this.seekStart():this.seekEnd(!1)))}onTouchMoveScrubBar(e){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.seekMove(this.getTouchOffset(e))}onTouchCancelScrubBar(e){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.touchEnd()}onTouchEndScrubBar(e){this.target&&!this.target.isLive&&this.vgSlider&&this.isSeeking&&this.touchEnd()}arrowAdjustVolume(e){this.target&&(38===e.keyCode||39===e.keyCode?(e.preventDefault(),this.target.seekTime((this.target.time.current+5e3)/1e3,!1)):(37===e.keyCode||40===e.keyCode)&&(e.preventDefault(),this.target.seekTime((this.target.time.current-5e3)/1e3,!1)))}getPercentage(){return this.target?Math.round(100*this.target.time.current/this.target.time.total)+"%":"0%"}onHideScrubBar(e){this.hideScrubBar=e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H),t.rXU(Mt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-scrub-bar"]],hostVars:2,hostBindings:function(o,i){1&o&&t.bIt("mousedown",function(s){return i.onMouseDownScrubBar(s)})("mousemove",function(s){return i.onMouseMoveScrubBar(s)},!1,t.EBC)("mouseup",function(s){return i.onMouseUpScrubBar(s)},!1,t.EBC)("touchstart",function(s){return i.onTouchStartScrubBar(s)})("touchmove",function(s){return i.onTouchMoveScrubBar(s)},!1,t.EBC)("touchcancel",function(s){return i.onTouchCancelScrubBar(s)},!1,t.EBC)("touchend",function(s){return i.onTouchEndScrubBar(s)},!1,t.EBC)("keydown",function(s){return i.arrowAdjustVolume(s)}),2&o&&t.AVh("hide",i.hideScrubBar)},inputs:{vgFor:"vgFor",vgSlider:"vgSlider"},ngContentSelectors:ce,decls:2,vars:2,consts:[["tabindex","0","role","slider","aria-label","scrub bar","aria-level","polite","aria-valuemin","0","aria-valuemax","100",1,"scrubBar"]],template:function(o,i){1&o&&(t.NAR(),t.j41(0,"div",0),t.SdG(1),t.k0s()),2&o&&t.BMQ("aria-valuenow",i.getPercentage())("aria-valuetext",i.getPercentage())},styles:["vg-scrub-bar{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;width:100%;height:5px;bottom:50px;margin:0;cursor:pointer;align-items:center;background:rgba(0,0,0,.75);z-index:250;transition:bottom 1s,opacity .5s}vg-scrub-bar .scrubBar{position:relative;display:flex;flex-grow:1;align-items:center;height:100%}vg-controls vg-scrub-bar{position:relative;bottom:0;background:transparent;height:50px;flex-grow:1;flex-basis:0;margin:0 10px;transition:initial}vg-scrub-bar.hide{bottom:0;opacity:0}vg-controls vg-scrub-bar.hide{bottom:initial;opacity:initial}\n"],encapsulation:2})}return n})(),Cn=(()=>{class n{constructor(e,o,i){this.API=o,this.cdr=i,this.subscriptions=[],this.ariaValue=1,this.elem=e.nativeElement,this.playbackValues=["0.5","1.0","1.5","2.0"],this.playbackIndex=1}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}onClick(){this.updatePlaybackSpeed()}onKeyDown(e){(13===e.keyCode||32===e.keyCode)&&(e.preventDefault(),this.updatePlaybackSpeed())}updatePlaybackSpeed(){this.playbackValues.forEach((e,o)=>{1===e.length&&(this.playbackValues[o]=e+".0")}),this.playbackIndex=++this.playbackIndex%this.playbackValues.length,this.target instanceof H?this.target.playbackRate=this.playbackValues[this.playbackIndex]:this.target.playbackRate[this.vgFor]=this.playbackValues[this.playbackIndex],this.detectChanges()}getPlaybackRate(){return this.ariaValue=this.target?this.target.playbackRate:1,this.ariaValue}detectChanges(){try{this.cdr.detectChanges()}catch(e){console.warn(e)}}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-playback-button"]],hostBindings:function(o,i){1&o&&t.bIt("click",function(){return i.onClick()})("keydown",function(s){return i.onKeyDown(s)})},inputs:{vgFor:"vgFor",playbackValues:"playbackValues"},decls:2,vars:2,consts:[["tabindex","0","role","button","aria-label","playback speed button",1,"button"]],template:function(o,i){1&o&&(t.j41(0,"span",0),t.EFF(1),t.k0s()),2&o&&(t.BMQ("aria-valuetext",i.ariaValue),t.R7$(),t.SpI(" ",i.getPlaybackRate(),"x "))},styles:["vg-playback-button{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;height:50px;width:50px;cursor:pointer;color:#fff;line-height:50px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}vg-playback-button .button{display:flex;align-items:center;justify-content:center;width:50px}\n"],encapsulation:2})}return n})(),xn=(()=>{class n{constructor(e,o){this.API=o,this.subscriptions=[],this.ariaValue=q.VG_PAUSED,this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}onClick(){this.playPause()}onKeyDown(e){(13===e.keyCode||32===e.keyCode)&&(e.preventDefault(),this.playPause())}playPause(){switch(this.getState()){case q.VG_PLAYING:this.target.pause();break;case q.VG_PAUSED:case q.VG_ENDED:this.target.play()}}getState(){return this.ariaValue=this.target?this.target.state:q.VG_PAUSED,this.ariaValue}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-play-pause"]],hostBindings:function(o,i){1&o&&t.bIt("click",function(){return i.onClick()})("keydown",function(s){return i.onKeyDown(s)})},inputs:{vgFor:"vgFor"},decls:1,vars:6,consts:[["tabindex","0","role","button",1,"icon"]],template:function(o,i){1&o&&t.nrm(0,"div",0),2&o&&(t.AVh("vg-icon-pause","playing"===i.getState())("vg-icon-play_arrow","paused"===i.getState()||"ended"===i.getState()),t.BMQ("aria-label","paused"===i.getState()?"play":"pause")("aria-valuetext",i.ariaValue))},styles:["vg-play-pause{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;height:50px;width:50px;cursor:pointer;color:#fff;line-height:50px}vg-play-pause .icon{pointer-events:none}\n"],encapsulation:2})}return n})(),Fn=(()=>{class n{constructor(e,o){this.API=o,this.subscriptions=[],this.ariaValue="unmuted",this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.currentVolume=this.target.volume}onClick(){this.changeMuteState()}onKeyDown(e){(13===e.keyCode||32===e.keyCode)&&(e.preventDefault(),this.changeMuteState())}changeMuteState(){const e=this.getVolume();0===e?(0===this.target.volume&&0===this.currentVolume&&(this.currentVolume=1),this.target.volume=this.currentVolume):(this.currentVolume=e,this.target.volume=0)}getVolume(){const e=this.target?this.target.volume:0;return this.ariaValue=e?"unmuted":"muted",e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-mute"]],hostBindings:function(o,i){1&o&&t.bIt("click",function(){return i.onClick()})("keydown",function(s){return i.onKeyDown(s)})},inputs:{vgFor:"vgFor"},decls:1,vars:9,consts:[["tabindex","0","role","button","aria-label","mute button",1,"icon"]],template:function(o,i){1&o&&t.nrm(0,"div",0),2&o&&(t.AVh("vg-icon-volume_up",i.getVolume()>=.75)("vg-icon-volume_down",i.getVolume()>=.25&&i.getVolume()<.75)("vg-icon-volume_mute",i.getVolume()>0&&i.getVolume()<.25)("vg-icon-volume_off",0===i.getVolume()),t.BMQ("aria-valuetext",i.ariaValue))},styles:["vg-mute{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;height:50px;width:50px;cursor:pointer;color:#fff;line-height:50px}vg-mute .icon{pointer-events:none}\n"],encapsulation:2})}return n})(),En=(()=>{class n{constructor(e,o,i){this.API=o,this.fsAPI=i,this.isFullscreen=!1,this.subscriptions=[],this.ariaValue="normal mode",this.elem=e.nativeElement,this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this)))}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}onChangeFullscreen(e){this.ariaValue=e?"fullscreen mode":"normal mode",this.isFullscreen=e}onClick(){this.changeFullscreenState()}onKeyDown(e){(13===e.keyCode||32===e.keyCode)&&(e.preventDefault(),this.changeFullscreenState())}changeFullscreenState(){let e=this.target;this.target instanceof H&&(e=null),this.fsAPI.toggleFullscreen(e)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H),t.rXU(Dt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-fullscreen"]],hostBindings:function(o,i){1&o&&t.bIt("click",function(){return i.onClick()})("keydown",function(s){return i.onKeyDown(s)})},decls:1,vars:5,consts:[["tabindex","0","role","button","aria-label","fullscreen button",1,"icon"]],template:function(o,i){1&o&&t.nrm(0,"div",0),2&o&&(t.AVh("vg-icon-fullscreen",!i.isFullscreen)("vg-icon-fullscreen_exit",i.isFullscreen),t.BMQ("aria-valuetext",i.ariaValue))},styles:["vg-fullscreen{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:flex;justify-content:center;height:50px;width:50px;cursor:pointer;color:#fff;line-height:50px}vg-fullscreen .icon{pointer-events:none}\n"],encapsulation:2})}return n})(),Tn=(()=>{class n{constructor(e,o){this.API=o,this.subscriptions=[],this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}getBufferTime(){let e="0%";return this.target?.buffered?.length&&(e=0===this.target.time.total?"0%":this.target.buffer.end/this.target.time.total*100+"%"),e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-scrub-bar-buffering-time"]],inputs:{vgFor:"vgFor"},decls:1,vars:2,consts:[[1,"background"]],template:function(o,i){1&o&&t.nrm(0,"div",0),2&o&&t.xc7("width",i.getBufferTime())},styles:["vg-scrub-bar-buffering-time{display:flex;width:100%;height:5px;pointer-events:none;position:absolute}vg-scrub-bar-buffering-time .background{background-color:#ffffff4d}vg-controls vg-scrub-bar-buffering-time{position:absolute;top:calc(50% - 3px)}vg-controls vg-scrub-bar-buffering-time .background{border-radius:2px}\n"],encapsulation:2})}return n})(),Mn=(()=>{class n{constructor(e,o){this.API=o,this.vgSlider=!1,this.subscriptions=[],this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor)}getPercentage(){return this.target?Math.round(100*this.target.time.current/this.target.time.total)+"%":"0%"}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-scrub-bar-current-time"]],inputs:{vgFor:"vgFor",vgSlider:"vgSlider"},decls:2,vars:3,consts:[[1,"background"],["class","slider",4,"ngIf"],[1,"slider"]],template:function(o,i){1&o&&(t.nrm(0,"div",0),t.DNE(1,Cr,1,0,"span",1)),2&o&&(t.xc7("width",i.getPercentage()),t.R7$(),t.Y8G("ngIf",i.vgSlider))},dependencies:[l.bT],styles:["vg-scrub-bar-current-time{display:flex;width:100%;height:5px;pointer-events:none;position:absolute}vg-scrub-bar-current-time .background{background-color:#fff}vg-controls vg-scrub-bar-current-time{position:absolute;top:calc(50% - 3px);border-radius:2px}vg-controls vg-scrub-bar-current-time .background{border:1px solid white;border-radius:2px}vg-scrub-bar-current-time .slider{background:white;height:15px;width:15px;border-radius:50%;box-shadow:0 0 10px #000;margin-top:-5px;margin-left:-10px}\n"],encapsulation:2})}return n})(),Tr=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[l.MD,Ut]})}return n})(),Mr=(()=>{class n{constructor(e,o,i,a){this.API=o,this.fsAPI=i,this.controlsHidden=a,this.vgSkipIfControlsHidden=!1,this.vgSkipIfControlsHiddenDelay=.5,this.isNativeFullscreen=!1,this.areControlsHidden=!1,this.areControlsHiddenChangeTime=0,this.subscriptions=[],this.isBuffering=!1,this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.fsAPI.onChangeFullscreen.subscribe(this.onChangeFullscreen.bind(this))),this.subscriptions.push(this.controlsHidden.isHidden.subscribe(this.onHideControls.bind(this))),this.subscriptions.push(this.target.subscriptions.bufferDetected.subscribe(e=>this.onUpdateBuffer(e)))}onUpdateBuffer(e){this.isBuffering=e}onChangeFullscreen(e){this.fsAPI.nativeFullscreen&&(this.isNativeFullscreen=e)}onHideControls(e){this.vgSkipIfControlsHidden&&this.areControlsHidden!=e&&(this.areControlsHiddenChangeTime=Date.now()),this.areControlsHidden=e}onClick(){if(!this.vgSkipIfControlsHidden||!(this.areControlsHidden||Date.now()-this.areControlsHiddenChangeTime<1e3*this.vgSkipIfControlsHiddenDelay))switch(this.getState()){case q.VG_PLAYING:this.target.pause();break;case q.VG_PAUSED:case q.VG_ENDED:this.target.play()}}getState(){let e=q.VG_PAUSED;if(this.target)if(this.target.state instanceof Array){for(let o=0,i=this.target.state.length;o<i;o++)if(this.target.state[o]===q.VG_PLAYING){e=q.VG_PLAYING;break}}else e=this.target.state;return e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H),t.rXU(Dt),t.rXU(Mt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-overlay-play"]],hostVars:2,hostBindings:function(o,i){1&o&&t.bIt("click",function(){return i.onClick()}),2&o&&t.AVh("is-buffering",i.isBuffering)},inputs:{vgFor:"vgFor",vgSkipIfControlsHidden:"vgSkipIfControlsHidden",vgSkipIfControlsHiddenDelay:"vgSkipIfControlsHiddenDelay"},decls:2,vars:6,consts:[[1,"vg-overlay-play"],[1,"overlay-play-container"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.k0s()),2&o&&(t.AVh("native-fullscreen",i.isNativeFullscreen)("controls-hidden",i.areControlsHidden),t.R7$(),t.AVh("vg-icon-play_arrow","playing"!==i.getState()))},styles:["vg-overlay-play{z-index:200}vg-overlay-play.is-buffering{display:none}vg-overlay-play .vg-overlay-play{transition:all .5s;cursor:pointer;position:absolute;display:block;color:#fff;width:100%;height:100%;font-size:80px;filter:alpha(opacity=60);opacity:.6}vg-overlay-play .vg-overlay-play.native-fullscreen.controls-hidden{cursor:none}vg-overlay-play .vg-overlay-play .overlay-play-container.vg-icon-play_arrow{pointer-events:none;width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;font-size:80px}vg-overlay-play .vg-overlay-play:hover{filter:alpha(opacity=100);opacity:1}vg-overlay-play .vg-overlay-play:hover .overlay-play-container.vg-icon-play_arrow:before{transform:scale(1.2)}\n"],encapsulation:2})}return n})(),Sr=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[l.MD,Ut]})}return n})(),Rr=(()=>{class n{constructor(e,o){this.API=o,this.checkInterval=50,this.currentPlayPos=0,this.lastPlayPos=0,this.subscriptions=[],this.isBuffering=!1,this.elem=e.nativeElement}ngOnInit(){this.API.isPlayerReady?this.onPlayerReady():this.subscriptions.push(this.API.playerReadyEvent.subscribe(()=>this.onPlayerReady()))}onPlayerReady(){this.target=this.API.getMediaById(this.vgFor),this.subscriptions.push(this.target.subscriptions.bufferDetected.subscribe(e=>this.onUpdateBuffer(e)))}onUpdateBuffer(e){this.isBuffering=e}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(H))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["vg-buffering"]],hostVars:2,hostBindings:function(o,i){2&o&&t.AVh("is-buffering",i.isBuffering)},inputs:{vgFor:"vgFor"},decls:3,vars:0,consts:[[1,"vg-buffering"],[1,"bufferingContainer"],[1,"loadingSpinner"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"div",2),t.k0s()())},styles:["vg-buffering{display:none;z-index:201}vg-buffering.is-buffering{display:block}.vg-buffering{position:absolute;display:block;width:100%;height:100%}.vg-buffering .bufferingContainer{width:100%;position:absolute;cursor:pointer;top:50%;margin-top:-50px;zoom:1;filter:alpha(opacity=60);opacity:.6}.vg-buffering .loadingSpinner{background-color:#0000;border:5px solid rgba(255,255,255,1);opacity:.9;border-top:5px solid rgba(0,0,0,0);border-left:5px solid rgba(0,0,0,0);border-radius:50px;box-shadow:0 0 35px #fff;width:50px;height:50px;margin:0 auto;-moz-animation:spin .5s infinite linear;-webkit-animation:spin .5s infinite linear}.vg-buffering .loadingSpinner .stop{-webkit-animation-play-state:paused;-moz-animation-play-state:paused}\n"],encapsulation:2})}return n})(),Br=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[l.MD,Ut]})}return n})();const Pr=(n,r)=>r.src;function Dr(n,r){if(1&n&&t.nrm(0,"source",7),2&n){const e=r.$implicit;t.Y8G("src",e.src,t.B4B)("type",e.type)}}let Ir=(()=>{class n{onPlayerReady(e){this.api=e,this.api.getDefaultMedia().subscriptions.ended.subscribe(()=>{this.api.getDefaultMedia().currentTime=0}),this.api.getDefaultMedia().subscriptions.timeUpdate.subscribe(o=>{console.log(o.target.duration)})}handleKeyboardEvent(e){e.target==document.body&&this.api&&this.api.canPlay&&("ArrowRight"==e.key?this.api.seekTime(this.api.currentTime+5):"ArrowLeft"==e.key&&this.api.seekTime(this.api.currentTime-5))}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn-video-player"]],hostBindings:function(o,i){1&o&&t.bIt("keydown",function(s){return i.handleKeyboardEvent(s)},!1,t.EBC)},inputs:{sources:"sources"},standalone:!0,features:[t.aNF],decls:18,vars:4,consts:[["media",""],[3,"onPlayerReady"],[3,"vgAutohide","vgAutohideTime"],["vgProperty","current","vgFormat","hh:mm:ss"],[3,"vgSlider"],["vgProperty","left","vgFormat","hh:mm:ss"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia"],[3,"src","type"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"vg-player",1),t.bIt("onPlayerReady",function(p){return t.eBV(a),t.Njj(i.onPlayerReady(p))}),t.nrm(1,"vg-overlay-play")(2,"vg-buffering"),t.j41(3,"vg-controls",2),t.nrm(4,"vg-play-pause")(5,"vg-playback-button")(6,"vg-time-display",3),t.j41(7,"vg-scrub-bar"),t.nrm(8,"vg-scrub-bar-current-time",4)(9,"vg-scrub-bar-buffering-time"),t.k0s(),t.nrm(10,"vg-time-display",5)(11,"vg-mute")(12,"vg-volume")(13,"vg-fullscreen"),t.k0s(),t.j41(14,"video",6,0),t.Z7z(16,Dr,1,2,"source",7,Pr),t.k0s()()}if(2&o){const a=t.sdS(15);t.R7$(3),t.Y8G("vgAutohide",!0)("vgAutohideTime",2),t.R7$(5),t.Y8G("vgSlider",!0),t.R7$(6),t.Y8G("vgMedia",a),t.R7$(2),t.Dyx(i.sources)}},dependencies:[l.MD,Ut,se,mr,Tr,gn,bn,vn,yn,Cn,xn,Fn,En,Tn,Mn,Sr,Mr,Br,Rr]})}return n})();var wr=h(4119);const le=(n,r)=>r.b.meta.product_id,ue=n=>({"ui-hide":n});function jr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG().index,a=t.XpG();return t.Njj(a.of_clear(i))}),t.EFF(1),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" \u267b\ufe0f ",e.selectedTags.length," ")}}function $r(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(2).index,s=t.XpG();return t.Njj(s.switchOF(a,i.value))}),t.EFF(1),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.text," ")}}function Vr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(2).index,s=t.XpG();return t.Njj(s.switchOF(a,i.value))}),t.EFF(1),t.k0s()}if(2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.text," ")}}function Ar(n,r){1&n&&t.DNE(0,$r,2,1,"button",21)(1,Vr,2,1),2&n&&t.vxM(0,r.$implicit.picked?0:1)}function Or(n,r){if(1&n&&t.Z7z(0,Ar,2,1,null,null,t.Vm6),2&n){const e=t.XpG().$implicit;t.Dyx(e.tagsResult)}}function Gr(n,r){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",18)(2,"div")(3,"button",19),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG();return t.Njj(a.of_move(i,0))}),t.EFF(4," \u{1f51d} "),t.k0s(),t.j41(5,"button",19),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG();return t.Njj(a.of_move(i,i-1))}),t.EFF(6," \u2b06\ufe0f "),t.k0s(),t.j41(7,"span"),t.EFF(8),t.DNE(9,jr,2,1,"button",20),t.k0s(),t.j41(10,"button",19),t.nI1(11,"async"),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG();return t.Njj(a.of_move(i,i+1))}),t.EFF(12," \u2b07\ufe0f "),t.k0s(),t.j41(13,"button",10),t.bIt("click",function(){const i=t.eBV(e).index,a=t.XpG();return t.Njj(a.of_eye(i))}),t.EFF(14,"\u{1f441}"),t.k0s()(),t.DNE(15,Or,2,0),t.k0s(),t.bVm()}if(2&n){let e;const o=r.$implicit,i=r.index,a=t.XpG();t.R7$(3),t.Y8G("disabled",0===i),t.R7$(2),t.Y8G("disabled",0===i),t.R7$(3),t.SpI("",o.name," "),t.R7$(),t.vxM(9,o.selectedTags.length?9:-1),t.R7$(),t.Y8G("disabled",i+1===(null==(e=t.bMT(11,6,a.ordered_f$))?null:e.length)),t.R7$(5),t.vxM(15,o.zip?-1:15)}}function Nr(n,r){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.apiAddClick())}),t.EFF(2,"\u65b0\u589e"),t.k0s()(),t.j41(3,"div")(4,"h2"),t.EFF(5,"Api Test"),t.k0s(),t.j41(6,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.apiTestClick())}),t.EFF(7,"javdb"),t.k0s()()}}function Lr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.setSortKey(1))}),t.j41(1,"span"),t.EFF(2,"File Size"),t.k0s()()}if(2&n){const e=t.XpG();t.Y8G("color",1===e.sortKey$.getValue()?"primary":void 0)}}function Ur(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.sendMessage("hello world"))}),t.EFF(1,"websocket.send"),t.k0s(),t.j41(2,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.genStaticJson())}),t.EFF(3," \u{1f7e2} Generate Static Json \u2705 "),t.k0s(),t.j41(4,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refreshEvent.emit())}),t.EFF(5," Refresh db/file\u267b\ufe0f "),t.k0s(),t.j41(6,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refreshMagnetEvent.emit())}),t.EFF(7," Refresh magnets \u267b\ufe0f "),t.k0s()}}function qr(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-porn-video-block",24),t.bIt("itemUpdatedEvent",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refreshEvent.emit())})("itemDeleteEvent",function(){const i=t.eBV(e).ngIf,a=t.XpG();return t.Njj(a.onPornDeleted(i))})("playVideoEvent",function(i){t.eBV(e);const a=t.XpG(),s=t.sdS(38);return t.Njj(a.onPlayVideo(i,s))}),t.k0s()}if(2&n){const e=r.ngIf;t.Y8G("ngClass",t.eq3(2,ue,!e.b.custom.show))("porn",e)}}function Xr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.setPage(i))}),t.EFF(1),t.k0s()}if(2&n){const e=r.$implicit,o=t.XpG();t.Y8G("color",o.colorClassStr(e)),t.R7$(),t.SpI(" ",e," ")}}function Hr(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-porn-video-block",24),t.bIt("itemUpdatedEvent",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refreshEvent.emit())})("itemDeleteEvent",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.onPornDeleted(i))})("playVideoEvent",function(i){t.eBV(e);const a=t.XpG(),s=t.sdS(38);return t.Njj(a.onPlayVideo(i,s))}),t.k0s()}if(2&n){const e=r.$implicit;t.Y8G("ngClass",t.eq3(2,ue,!e.b.custom.show))("porn",e)}}function zr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.setPage(i))}),t.EFF(1),t.k0s()}if(2&n){const e=r.$implicit,o=t.XpG();t.Y8G("color",o.colorClassStr(e)),t.R7$(),t.SpI(" ",e," ")}}function Jr(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-porn-video-block",24),t.bIt("itemUpdatedEvent",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.refreshEvent.emit())})("itemDeleteEvent",function(){const i=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.onPornDeleted(i))})("playVideoEvent",function(i){t.eBV(e);const a=t.XpG(2),s=t.sdS(38);return t.Njj(a.onPlayVideo(i,s))}),t.k0s()}if(2&n){const e=r.$implicit;t.Y8G("ngClass",t.eq3(2,ue,!e.b.custom.show))("porn",e)}}function Yr(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",9)(1,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.battleClick())}),t.EFF(2,"Battle"),t.k0s(),t.j41(3,"div",25),t.Z7z(4,Jr,1,4,"app-porn-video-block",14,le),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(4),t.Dyx(e.battleporns)}}function Kr(n,r){if(1&n&&t.nrm(0,"app-porn-video-player",17),2&n){const e=t.XpG();t.Y8G("sources",e.sources)}}function Qr(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2).$implicit,a=t.XpG(3);return t.Njj(a.fetchProduct(i,i.b.file.filename))}),t.EFF(1),t.k0s(),t.j41(2,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2).$implicit,a=t.XpG(3);return t.Njj(a.fetchProduct(i,i.b.file.smart_cut_name))}),t.EFF(3),t.k0s()}if(2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" Fetch [",e.b.file.filename,"] "),t.R7$(2),t.SpI(" Smart Fetch [",e.b.file.smart_cut_name,"] ")}}function Zr(n,r){1&n&&(t.j41(0,"button",20),t.EFF(1,"Fetching"),t.k0s())}function Wr(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-video-block",27),t.qex(1,28),t.DNE(2,Qr,4,2)(3,Zr,2,0),t.j41(4,"button",10),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.rename_file(i.b))}),t.EFF(5,"rename"),t.k0s(),t.bVm(),t.k0s()}if(2&n){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("view",o.porn2view(e)),t.R7$(2),t.vxM(2,e.f.fetching?3:2)}}function ta(n,r){if(1&n&&t.DNE(0,Wr,6,2,"app-video-block",27),2&n){const e=r.$implicit;t.vxM(0,e.b.file&&!e.b.meta.product_id?0:-1)}}function ea(n,r){if(1&n&&(t.j41(0,"div",13),t.Z7z(1,ta,1,1,null,null,le),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Dyx(e.oldpornList)}}function na(n,r){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"h2",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.showMissingSwitch=!i.showMissingSwitch)}),t.EFF(2," Missing information list "),t.k0s(),t.DNE(3,ea,3,0,"div",13),t.k0s()}if(2&n){const e=t.XpG();t.R7$(3),t.vxM(3,e.showMissingSwitch?3:-1)}}const L={Star:"s",Year:"y",Month:"m",File:"f",Comments:"c",HideShow:"h",FuzzyText:"t",serial:"ser",cate:"cate",sort:"sort",page:"p",sourceType:"st",director:"di",actressNew:"act"};let de=(()=>{class n{set magnetList(e){const o=e||[],i=new Map;for(const a of o)i.set(a.meta.id_str,a.meta.magnet);this.pid2magnet$.next(i)}set pList(e){this._pList=e||[],this.handleInput(e||[])}constructor(e,o,i,a,s,p){this.dialog=e,this._snackBar=o,this._router=i,this._route=a,this._guiService=s,this._javService=p,this.socket$=void 0,this.ws_id=-1,this._pList=[],this.pid2magnet$=new u.t(new Map),this.sources=[],this.refreshEvent=new t.bkB,this.refreshMagnetEvent=new t.bkB,this.updatePornListEvent=new t.bkB,this.pageManager=new Ni,this.devMode=(0,t.naY)(),this.pornList$=new u.t([]),this.filteredPornList$=new u.t([]),this.luckporn=void 0,this.battleporns=[],this.pagedList$=new u.t([]),this.pagination$=new u.t([]),this.oldpornList=[],this.sortKey$=new u.t(0),this.pageSize=20,this.curPage=0,this.thumbCount=25,this.pathhash="",this.ParamsKey=L,this.page$=new u.t(0),this.fuzzyTextCtl=new v.MJ(""),this.fuzzyText$=new u.t(""),this.porn2view=Kt,this.showMissingSwitch=!1,this.ordered_f$=new u.t([]),this.ordered_f=[]}ngOnInit(){const e=this._route.snapshot.queryParams;this.sortKey$.next(e[L.sort]||0),this.fuzzyText$.next(e[L.FuzzyText]||""),this.page$.next(e[L.page]||0),this.fuzzyText$.subscribe(i=>{"string"==typeof i&&(this.fuzzyTextCtl.setValue(i,{emitEvent:!1}),this.updateParams(L.FuzzyText,i))}),this.fuzzyTextCtl.valueChanges.pipe(Vt(100,M.E,{leading:!0,trailing:!0})).subscribe(i=>this.fuzzyText$.next(i||""));const o=[];o.push({name:"Year",listToTags:i=>Qt(at(function Wi(n){return n.map(r=>r.b.meta.release_date.substring(0,4))}(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>a.filter(p=>s.b.meta.release_date.startsWith(`${p}`)).length>0),zip:!1,tagsResult:[],selectedTags:rt(e[L.Year]),paramKey:L.Year}),o.push({name:"Month",listToTags:i=>Qt(at(function to(n){return n.map(r=>r.b.meta.release_date.substring(5,7))}(i))),filterTags:(i,a)=>0==a.length?[...i]:function eo(n,r){return r.length?n.filter(e=>r.filter(o=>e.b.meta.release_date.substring(5,7)==o).length>0):[...n]}(i,a),zip:!1,tagsResult:[],selectedTags:rt(e[L.Month]),paramKey:L.Month}),o.push({name:"Serial",listToTags:i=>ht(at(function Xi(n){return n.map(r=>r.b.meta.product_id.split("-")[0])}(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>a.filter(p=>s.b.meta.product_id.startsWith(p)).length>0),zip:!0,tagsResult:[],selectedTags:rt(e[L.serial]),paramKey:L.serial}),o.push({name:"Actress",listToTags:i=>ht(at(function qi(n){return[].concat(...n.map(r=>r.b.meta.actress_list.map(e=>e.name)))}(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>s.b.meta.actress_list.filter(p=>a.includes(p.name)).length>0),zip:!0,tagsResult:[],selectedTags:rt(e[L.actressNew]),paramKey:L.actressNew}),o.push({name:"Categories",listToTags:i=>ht(at(function Hi(n){return[].concat(...n.map(r=>r.b.meta.categories.filter(e=>""!=e)||[]))}(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>s.b.meta.categories.filter(p=>a.includes(p)).length>0),zip:!0,tagsResult:[],selectedTags:rt(e[L.cate]),paramKey:L.cate}),(0,t.naY)()&&(o.push({name:"File",listToTags:i=>ht(at(function zi(n){return[].concat(...n.map(r=>r.b.file?.path?"Exist":"Absense")||[])}(i))),filterTags:(i,a)=>1!=a.length?[...i]:i.filter(s=>"Exist"==a[0]&&s.b.file?.size||"Absense"==a[0]&&!s.b.file?.size),zip:!0,tagsResult:[],selectedTags:rt(e[L.File]),paramKey:L.File}),o.push({name:"Comments",listToTags:i=>ht(at(function Ji(n){return[].concat(...n.map(r=>r.b.custom.comments?"Exist":"Absense")||[])}(i))),filterTags:(i,a)=>1!=a.length?[...i]:i.filter(s=>"Exist"==a[0]&&s.b.custom.comments||"Absense"==a[0]&&!s.b.custom.comments),zip:!0,tagsResult:[],selectedTags:rt(e[L.Comments]),paramKey:L.Comments}),o.push({name:"HideShow",listToTags:i=>ht(at(function Yi(n){return[].concat(...n.map(r=>r.b.custom.show?"Show":"Hide")||[])}(i))),filterTags:(i,a)=>1!=a.length?[...i]:i.filter(s=>"Hide"==a[0]&&!s.b.custom?.show||"Show"==a[0]&&s.b.custom?.show),zip:!0,tagsResult:[],selectedTags:rt(e[L.HideShow]),paramKey:L.HideShow}),o.push({name:"SourceType",listToTags:i=>ht(at(function Ki(n){return[].concat(...n.map(r=>r.b.meta.data_type||"[Empty]")||[])}(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>"[Empty]"==a[0]&&!s.b.meta.data_type||a.includes(s.b.meta.data_type)),zip:!0,tagsResult:[],selectedTags:rt(e[L.sourceType]),paramKey:L.sourceType})),o.push({name:"Director",listToTags:i=>ht(at(function Qi(n){return[].concat(...n.map(r=>r.b.meta.director||"Empty")||[])}(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>"Empty"==a[0]&&!s.b.meta.director||a.includes(s.b.meta.director)),zip:!0,tagsResult:[],selectedTags:rt(e[L.director]),paramKey:L.director}),o.push({name:"Star",listToTags:i=>Qt(at((n=>n.map(r=>String(r.b.custom?.star||0)))(i))),filterTags:(i,a)=>0==a.length?[...i]:i.filter(s=>a.includes(String(Number(s.b.custom?.star)))),zip:!0,tagsResult:[],selectedTags:rt(e[L.Star]),paramKey:L.Star}),this.ordered_f$.next(o),(0,U.zV)([this.pornList$,this.ordered_f$,this.sortKey$,this.fuzzyText$]).pipe(Vt(100,M.E,{leading:!1,trailing:!0}),(0,Y.p)(i=>i[0].length>0)).subscribe(()=>{this.devMode&&console.warn("Exec recalculate");let i=this.pornList$.getValue();i=function no(n,r=[],e){const o={};let i=n;for(const a of r){a.tagsResult=a.listToTags(i);const s=a.tagsResult.map(p=>p.value);a.selectedTags=a.selectedTags.filter(p=>s.includes(p)),a.tagsResult.forEach(p=>{p.picked=a.selectedTags.includes(p.value)}),i=a.filterTags(i,a.selectedTags),a.paramKey&&(o[a.paramKey]=a.selectedTags)}return e.navigate([],{queryParams:o,queryParamsHandling:"merge"}),[...i]}(i,this.ordered_f$.getValue(),this._router),i=function Ui(n,r){return r?(r=r.toUpperCase(),n.filter(e=>e.b.meta.name.toUpperCase().includes(r)||e.b.file?.filename.toUpperCase().includes(r)||e.b.meta.product_id.toUpperCase().includes(r)||e.b.custom?.comments.toUpperCase().includes(r))):n}(i,this.fuzzyText$.getValue()),i.sort(oo[this.sortKey$.getValue()]),this.filteredPornList$.next(i),this.luckporn=void 0}),(0,U.zV)([this.pornList$,this.filteredPornList$,this.page$,this.pid2magnet$]).pipe(Vt(100,M.E,{leading:!1,trailing:!0}),(0,Te.F)(),(0,Y.p)(i=>i[0].length>0),(0,I.M)(()=>{this.devMode&&console.warn("check page");const i=this.filteredPornList$.getValue(),a=this.page$.getValue(),s=[];for(let p=0;p*this.pageSize<i.length;p++)s.push(p);if(this.pageManager.setRange(0,Math.max(0,s.length-1),Math.max(Math.min(s.length-1,a),0)),this.pagination$.next(this.pageManager.current().list),a>=s.length&&s.length>0&&0!=a)return console.warn("set page 0"),void this.setPage(0)})).subscribe(()=>{const i=this.filteredPornList$.getValue(),a=this.page$.getValue();this.devMode&&console.warn(`\u5b9e\u9645\u8ba1\u7b97filtered+paged \u5185\u5bb9\u7684\u51fd\u6570[length=${i.length}, curPage=${a}]`);const s=[];for(let C=0;C<this.pageSize&&i[C+a*this.pageSize];C++)s.push(i[C+a*this.pageSize]);const p=this.pid2magnet$.getValue();for(const C of s)p.has(C.b.meta.product_id)&&(C.f.magnet=p.get(C.b.meta.product_id)||"");this.pagedList$.next(s)}),(0,t.naY)()&&this.init_ws()}of_move(e,o){const i=this.ordered_f$.getValue(),a=i[e],s=e<o?1:-1;for(let p=e;p!=o;p+=s)i[p]=i[p+s];i[o]=a,this.ordered_f$.next(i)}of_clear(e){const o=this.ordered_f$.getValue();o[e].selectedTags=[],this.ordered_f$.next(o)}of_eye(e){const o=this.ordered_f$.getValue();o[e].zip=!o[e].zip,this.ordered_f$.next(o)}switchOF(e,o){const i=this.ordered_f$.getValue(),a=i[e].selectedTags.indexOf(o);-1==a?i[e].selectedTags.push(o):i[e].selectedTags.splice(a,1),this.ordered_f$.next(i)}handleInput(e){if(0==e.length)return;e.forEach((a,s)=>a.f.refIdx=s);let o=e.filter(a=>a.b.meta.release_date);const i=e.filter(a=>""==a.b.meta.product_id).sort((a,s)=>(s.b.file?.path||"")>(a.b.file?.path||"")?-1:1);if(this.oldpornList=i,this.devMode){o.forEach(s=>s.f.subVideos=[]);const a=new Map;for(let s=0;s<o.length;s++){const p=o[s],C=p.b.meta.product_id;a.has(C)?a.get(C)?.f.subVideos?.push(p):(a.set(C,p),p.f.subVideos=[],p.f.subVideos.push(p))}o=o.filter(s=>(s.f.subVideos?.length||0)>0),o.forEach(s=>s.f.subVideos?.sort((p,C)=>p.b.file?.filename<C.b.file?.filename?-1:1))}this.devMode&&function io(n){const r={};n.forEach(e=>{r[e.b.meta.product_id]=r[e.b.meta.product_id]||[],r[e.b.meta.product_id].push(e)});for(const e in r)r[e].length>1&&console.warn("Dup file:",e,r[e])}(o),this.pornList$.next(o)}setSortKey(e){this.sortKey$.next(e)}updateParams(e,o){this._router.navigate([],{queryParams:{[e]:o||void 0},queryParamsHandling:"merge"})}onFilterChangeHelper(e,o,i){e.next(i),this.updateParams(o,i)}fetchProduct(e,o){o&&(e.f.fetching=!0,this.alert(`Fetching ${o}`),this._javService.postAdd({requestBody:{product_ids:[o]}}).pipe((0,I.M)(i=>{e.f.fetching=!1,this.alert(i.message)})).subscribe())}setPage(e){this.page$.next(e),this.pageManager.setRangeCurrent(e);const o=this.pagination$.getValue(),i=this.pageManager.current().list;nn(o,i)||this.pagination$.next(i),this.updateParams(L.page,0==e?"":`${e}`)}colorClassStr(e){return e==(this.page$.getValue()||0)?"accent":""}alert(e){this._snackBar.open(e,"",{duration:3e3})}luckyClick(){const e=this.filteredPornList$.getValue();if(e.length>0){let o=0;e.forEach(a=>{o+=(a.b.custom?.star||0)+1});let i=Math.floor(Math.random()*o);for(let a=0;a<e.length;a++){const s=(e[a].b.custom?.star||0)+1;if(i<=s){this.luckporn=e[a];break}i-=s}}}battleClick(){const e=this.filteredPornList$.getValue();if(e.length>0){const o=Math.floor(Math.random()*e.length),i=Math.floor(Math.random()*e.length);this.battleporns=[e[o],e[i]]}}apiAddClick(){this._guiService.ngPrompt('\u8bf7\u8f93\u5165productIds(\u591a\u4e2a\u7528\u82f1\u6587\u9017\u53f7\u5206\u5272",")',"").pipe((0,Y.p)(e=>null!=e),(0,I.M)(e=>this.alert(`Start query [${e}]`)),(0,pt.n)(e=>this._javService.postAdd({requestBody:{product_ids:e.split(",")}}))).subscribe(e=>{this.alert(e.message),this.refreshEvent.emit()},this._guiService.fastApiErrorHandler())}genStaticJson(){this._guiService.genStaticJson().subscribe(e=>this.alert(e.message))}apiTestClick(){this.alert("Start api test."),this._guiService.apiTest().subscribe(()=>{},this._guiService.fastApiErrorHandler())}rename_file(e){this._guiService.rename_file(e).subscribe(()=>{},this._guiService.fastApiErrorHandler())}onPornDeleted(e){this._pList=this._pList.filter(o=>o!=e),this.updatePornListEvent.emit(this._pList)}onPlayVideo(e,o){this.sources=[{src:e,type:"video/mp4"}],o.scrollIntoView({behavior:"smooth"})}sendMessage(e){this.socket$?.next({message:e})}init_ws(){this._javService.getInfo().pipe((0,pt.n)(e=>{this.ws_id=e.ws_id;const o=`ws://${window.location.host}/api/v1/jav/ws/${e.ws_id}`;return this.socket$=new wr.K(o),this.messages$=this.socket$?.asObservable()})).subscribe({next:e=>{console.log(e)},error:this._guiService.fastApiErrorHandler(),complete:()=>this.alert("complete")})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.bZ),t.rXU(_t.UG),t.rXU(k.Ix),t.rXU(k.nX),t.rXU(Lt),t.rXU(dt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn-man-page"]],inputs:{info:"info",magnetList:"magnetList",pList:"pList"},outputs:{refreshEvent:"refreshEvent",refreshMagnetEvent:"refreshMagnetEvent",updatePornListEvent:"updatePornListEvent"},standalone:!0,features:[t.aNF],decls:42,vars:14,consts:[["videoplayer",""],["label","OrderedFilter"],[1,"button-container"],[4,"ngFor","ngForOf"],["appearance","fill"],["matInput","","placeholder","Ex. \u641c\u7d22\u6587\u5b57",3,"formControl"],["label","SortedKey"],["mat-button","",3,"click","color"],["mat-button","",3,"color"],[2,"display","flex","align-items","center","flex-direction","column"],["mat-button","",3,"click"],[3,"ngClass","porn","itemUpdatedEvent","itemDeleteEvent","playVideoEvent",4,"ngIf"],[1,"pagination"],[1,"movie-box"],[3,"ngClass","porn"],[2,"display","flex","justify-content","center"],[2,"width","80vw"],[3,"sources"],[2,"display","block","position","relative","width","100%"],["mat-button","",3,"click","disabled"],["mat-button",""],["mat-flat-button","","color","primary"],["mat-flat-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[3,"itemUpdatedEvent","itemDeleteEvent","playVideoEvent","ngClass","porn"],[2,"display","inline-flex","flex-wrap","wrap"],[2,"text-align","center",3,"click"],[3,"view"],["buttons",""]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"mat-tab-group")(1,"mat-tab",1)(2,"div",2),t.DNE(3,Gr,16,8,"ng-container",3),t.nI1(4,"async"),t.j41(5,"div")(6,"mat-form-field",4)(7,"mat-label"),t.EFF(8,"Fuzzy Search"),t.k0s(),t.nrm(9,"input",5),t.k0s(),t.DNE(10,Nr,8,0),t.k0s()()(),t.j41(11,"mat-tab",6)(12,"div",2)(13,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.setSortKey(0))}),t.j41(14,"span"),t.EFF(15,"ReleaseDate"),t.k0s()(),t.DNE(16,Lr,3,1,"button",8),t.j41(17,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.setSortKey(2))}),t.j41(18,"span"),t.EFF(19,"Stars"),t.k0s()()()()(),t.j41(20,"div",9)(21,"h4"),t.EFF(22),t.k0s(),t.j41(23,"button",10),t.bIt("click",function(){return t.eBV(a),t.Njj(i.luckyClick())}),t.EFF(24,"\u{1f3b2} Lucky \u{1f3b2}"),t.k0s(),t.DNE(25,Ur,8,0)(26,qr,1,4,"app-porn-video-block",11),t.k0s(),t.j41(27,"div",12),t.Z7z(28,Xr,2,2,"button",8,t.fX1),t.k0s(),t.j41(30,"div",13),t.Z7z(31,Hr,1,4,"app-porn-video-block",14,le),t.k0s(),t.j41(33,"div",12),t.Z7z(34,zr,2,2,"button",8,t.fX1),t.k0s(),t.DNE(36,Yr,6,0,"div",9),t.j41(37,"div",15,0)(39,"div",16),t.DNE(40,Kr,1,1,"app-porn-video-player",17),t.k0s()(),t.DNE(41,na,4,1,"div")}2&o&&(t.R7$(3),t.Y8G("ngForOf",t.bMT(4,12,i.ordered_f$)),t.R7$(6),t.Y8G("formControl",i.fuzzyTextCtl),t.R7$(),t.vxM(10,i.devMode?10:-1),t.R7$(3),t.Y8G("color",0===i.sortKey$.getValue()?"primary":void 0),t.R7$(3),t.vxM(16,i.devMode?16:-1),t.R7$(),t.Y8G("color",2===i.sortKey$.getValue()?"primary":void 0),t.R7$(5),t.SpI("\u9759\u6001\u6587\u4ef6\u751f\u6210\u65e5\u671f:",null==i.info?null:i.info.generated_date,""),t.R7$(3),t.vxM(25,i.devMode?25:-1),t.R7$(),t.Y8G("ngIf",i.luckporn),t.R7$(2),t.Dyx(i.pagination$.getValue()),t.R7$(3),t.Dyx(i.pagedList$.getValue()),t.R7$(3),t.Dyx(i.pagination$.getValue()),t.R7$(2),t.vxM(36,i.devMode?36:-1),t.R7$(4),t.vxM(40,i.devMode?40:-1),t.R7$(),t.vxM(41,i.devMode&&0!==i.oldpornList.length?41:-1))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.Jj,g.RI,g.mq,g.T8,w.Hl,w.$z,v.YN,v.me,v.BC,N.RG,N.rl,N.nJ,J.fS,J.fg,v.X1,v.l_,_n,St,Ir],styles:[".global[_ngcontent-%COMP%]{font-size:50px}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:solid lightgrey;border-width:0px 1px 1px 0px}.porn-image[_ngcontent-%COMP%]{max-height:34vh;max-width:50vw}*[_ngcontent-%COMP%]{box-sizing:border-box}.button-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;overflow:hidden;box-sizing:border-box;padding:1em}button[_ngcontent-%COMP%]{margin-bottom:8px}.movie-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:center}.ui-hide[_ngcontent-%COMP%]{filter:drop-shadow(2px 4px 6px black)}.pagination[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;justify-content:center;box-sizing:border-box;padding:1em;flex-wrap:wrap}"]})}return n})(),pe=(()=>{class n{constructor(e,o){this.guiService=e,this.magnetService=o,this.pList=[],this.magnetList=[],this.guiService.getInfo().pipe((0,I.M)(i=>this.info=i)).subscribe()}ngOnInit(){this.onRefresh(),this.onRefreshMagnetList()}onRefresh(){this.guiService.getPornList().pipe((0,I.M)(e=>this.pList=on(e))).subscribe()}onRefreshMagnetList(){(0,t.naY)()&&(console.warn("TODO refresh [\u964d\u4f4e\u5168\u5217\u8868\u83b7\u53d6\u7684\u884c\u4e3a\u6b21\u6570]"),this.magnetService.postList().subscribe(e=>this.magnetList=e))}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Lt),t.rXU(hn))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn"]],standalone:!0,features:[t.aNF],decls:1,vars:3,consts:[[3,"updatePornListEvent","refreshEvent","refreshMagnetEvent","pList","info","magnetList"]],template:function(o,i){1&o&&(t.j41(0,"app-porn-man-page",0),t.bIt("updatePornListEvent",function(s){return i.pList=s})("refreshEvent",function(){return i.onRefresh()})("refreshMagnetEvent",function(){return i.onRefreshMagnetList()}),t.k0s()),2&o&&t.Y8G("pList",i.pList)("info",i.info)("magnetList",i.magnetList)},dependencies:[de]})}return n})();function ia(n,r){1&n&&(t.j41(0,"div",1)(1,"div",2)(2,"a",3)(3,"div",4),t.nrm(4,"img",5),t.k0s()()(),t.j41(5,"div",6)(6,"a",7)(7,"div",4),t.nrm(8,"img",5),t.k0s()(),t.j41(9,"div",8)(10,"h3",9)(11,"a",10)(12,"div",11),t.EFF(13," \u6807\u9898 "),t.k0s()()(),t.j41(14,"div",12)(15,"div",13),t.EFF(16,"pingdaoming"),t.k0s(),t.j41(17,"div",13),t.EFF(18,"\u89c2\u770b\u7387"),t.k0s()()()()())}let oa=(()=>{class n{constructor(){this.itemList=[{company:""},{}]}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-actress"]],standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[["class","rich-grid-media",4,"ngFor","ngForOf"],[1,"rich-grid-media"],[1,"thumbnail"],[1,"thumbnail-a"],[1,"img-shadow"],["src","https://i.ytimg.com/an_webp/bKbRMcxPDrg/mqdefault_6s.webp?du=3000&sqp=CKi5rYQG&rs=AOn4CLBgngLJ0KRau40qZytOUaUT1YKwdA",1,"img"],[1,"detail"],[1,"avatar-link"],[1,"meta"],[1,"grid-title"],[1,"title-link"],[1,"string"],[1,"grid-media"],[1,"meta-line"]],template:function(o,i){1&o&&(t.j41(0,"div"),t.DNE(1,ia,19,0,"div",0),t.k0s()),2&o&&(t.R7$(),t.Y8G("ngForOf",i.itemList))},dependencies:[l.pM],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.rich-grid-media[_ngcontent-%COMP%]{margin-bottom:40px;margin-left:8px;margin-right:8px;display:inline-block;width:360px;position:relative}.rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:100%;height:200px;background-color:#90ee90}.rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .thumbnail-a[_ngcontent-%COMP%], .rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .thumbnail-a[_ngcontent-%COMP%]   .img-shadow[_ngcontent-%COMP%], .rich-grid-media[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .thumbnail-a[_ngcontent-%COMP%]   .img-shadow[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:100%}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{display:flex}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .avatar-link[_ngcontent-%COMP%]{padding-top:12px;padding-right:12px}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .avatar-link[_ngcontent-%COMP%]   .img-shadow[_ngcontent-%COMP%]{width:36px;height:36px}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .avatar-link[_ngcontent-%COMP%]   .img-shadow[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{border-radius:50%;width:36px;height:36px;background-color:#add8e6}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{flex:1}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .grid-title[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:4px;background-color:#e0ffff}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .grid-title[_ngcontent-%COMP%]   .title-link[_ngcontent-%COMP%]   .string[_ngcontent-%COMP%]{font-size:16px}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .grid-media[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.rich-grid-media[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .grid-media[_ngcontent-%COMP%]   .meta-line[_ngcontent-%COMP%]{display:inline-flex;color:#606060;font-size:14px;background-color:#90ee90}"]})}return n})();var ra=h(3077);const Sn="recommend";let he=(()=>{class n{constructor(e){this.localStorageService=e}setInfo(e){this.localStorageService.setItem(Sn,JSON.stringify(e),6048e5)}getInfo(){return this.localStorageService.getItem(Sn,JSON.stringify({over18:!1})).pipe((0,kt.T)(e=>{if(null==e)return{over18:!1};try{return JSON.parse(e)}catch{return{over18:!1}}}))}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(ra.s))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),_e=(()=>{class n{constructor(e){this.recommendLocalstorage=e,this.over18=!1,this.redirectUrl="",this.recommendLocalstorage.getInfo().subscribe(o=>{this.over18=o.over18})}login(){this.recommendLocalstorage.setInfo({over18:!0})}logout(){this.recommendLocalstorage.setInfo({over18:!1})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(he))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),fe=(()=>{class n{constructor(e,o){this.r18confirmService=e,this.router=o,this.baseUrl="recommend"}canActivate(e,o){return e.routeConfig?.data?.R18GuardSelf?!this.r18confirmService.over18:!!this.r18confirmService.over18||(this.r18confirmService.redirectUrl=o.url,this.router.createUrlTree(["/recommend/r18confirm"]))}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(_e),t.KVO(k.Ix))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac})}return n})(),Rn=(()=>{class n{constructor(e,o,i,a){this.r18confirmService=e,this.recommendLocalstorage=o,this.location=i,this.router=a}ngOnInit(){this.recommendLocalstorage.getInfo().pipe((0,Gt.s)(1)).subscribe(e=>{e.over18&&this.location.back()})}Login(){this.r18confirmService.login();const e=this.r18confirmService.redirectUrl;e?(this.r18confirmService.redirectUrl="",this.router.navigateByUrl(e)):this.location.back()}GoHome(){this.router.navigateByUrl("/")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(_e),t.rXU(he),t.rXU(l.aZ),t.rXU(k.Ix))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-r18confirm"]],standalone:!0,features:[t.aNF],decls:8,vars:0,consts:[[1,"ui-content"],["mat-stroked-button","","color","primary",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"Are you over 18 years of age?"),t.k0s(),t.j41(3,"div")(4,"button",1),t.bIt("click",function(){return i.Login()}),t.EFF(5,"Yes"),t.k0s(),t.j41(6,"button",1),t.bIt("click",function(){return i.GoHome()}),t.EFF(7,"No"),t.k0s()()())},dependencies:[w.Hl,w.$z],styles:[".ui-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}"]})}return n})();var Bn=h(6010),ge=h(4046);function qt(n,r){const e=[],o={};for(let i=0;i<r.length;i++)o[r[i].isbn]=r[i];for(let i=0;i<n.length;i++)o[n[i].isbn]&&e.push({...n[i],...o[n[i].isbn]});return e}var Pn=h(7575),Dn=h(1997),ft=h(5596),In=h(2798);const It="/api/recommend/book/douban/";let aa=(()=>{class n{constructor(e){this.http=e}POST(e,o){return this.http.post(`${It}${e}`,o)}search(e){return this.POST("search",{text:e})}url2isbn(e){return this.http.post(`${It}url2isbn`,{url:e})}add2List(e,o){return this.http.post(`${It}add2list`,{url:e.url,isbn:e.isbn,dest:o})}delete(e,o){return this.http.post(`${It}delete`,{isbn:e,dest:o})}list(e){return this.http.post(`${It}list`,{dest:e})}chooseStar(e,o,i){return this.POST("star",{dest:e,isbn:o,star:i})}comments(e,o,i){return this.POST("comments",{dest:e,isbn:o,comments:i})}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sa(n,r){if(1&n&&(t.j41(0,"mat-option",14),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.value),t.R7$(),t.JRh(e.text)}}function ca(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.isbn)}}function la(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.doubanQueryIsbn(i))}),t.EFF(1," \u67e5\u8be2ISBN "),t.k0s()}}function ua(n,r){1&n&&t.nrm(0,"mat-progress-bar",23)}function da(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-card",15)(1,"mat-card-subtitle"),t.DNE(2,ca,2,1,"span",16),t.k0s(),t.j41(3,"mat-card-title"),t.EFF(4,"Title"),t.k0s(),t.j41(5,"div",17),t.nrm(6,"img",18),t.k0s(),t.j41(7,"mat-card-content")(8,"p"),t.EFF(9,"content"),t.k0s()(),t.nrm(10,"mat-divider",19),t.j41(11,"mat-card-actions"),t.DNE(12,la,2,0,"button",20),t.j41(13,"button",21),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.addDoubanBook(i))}),t.EFF(14," \u6dfb\u52a0\u5230\u5217\u8868 "),t.k0s()(),t.j41(15,"mat-card-footer"),t.DNE(16,ua,1,0,"mat-progress-bar",22),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(2),t.Y8G("ngIf",e.isbn),t.R7$(4),t.Y8G("src",e.img||e.cover_url,t.B4B),t.R7$(6),t.Y8G("ngIf",!e.isbn),t.R7$(4),t.Y8G("ngIf",e.querying)}}function pa(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",26)(1,"button",21),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG().$implicit,s=t.XpG();return t.Njj(s.deleteDoubanBook(i,a.value))}),t.EFF(2," \u274c "),t.k0s(),t.j41(3,"button",21),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG().$implicit,s=t.XpG();return t.Njj(s.commentsClick(a.value,i.isbn,i.reaction))}),t.EFF(4," \u{1f4ac} "),t.k0s(),t.j41(5,"button",27),t.EFF(6,"\u{1f310}"),t.k0s(),t.j41(7,"div",28)(8,"app-star-rating",29),t.bIt("chooseStarEvent",function(i){const a=t.eBV(e).$implicit,s=t.XpG().$implicit,p=t.XpG();return t.Njj(p.chooseStar(s.value,a.isbn,i))}),t.k0s(),t.j41(9,"app-star-rating",30),t.bIt("chooseStarEvent",function(i){const a=t.eBV(e).$implicit,s=t.XpG().$implicit,p=t.XpG();return t.Njj(p.chooseStar(s.value,a.isbn,-i))}),t.k0s()(),t.j41(10,"div",31),t.nrm(11,"img",32),t.k0s(),t.j41(12,"div",33),t.EFF(13),t.k0s()()}if(2&n){const e=r.$implicit,o=t.XpG(2);t.R7$(8),t.Y8G("rating",o.Math.max(e.recommendedLevel,0))("starCount",5),t.R7$(),t.Y8G("rating",o.Math.max(0,-e.recommendedLevel))("starCount",5),t.R7$(2),t.Y8G("src",e.pic,t.B4B),t.R7$(2),t.JRh(e.title)}}function ma(n,r){if(1&n&&(t.j41(0,"mat-tab",24),t.DNE(1,pa,14,6,"div",25),t.k0s()),2&n){const e=r.$implicit;t.Y8G("label",e.text),t.R7$(),t.Y8G("ngForOf",e.data)}}var wt=function(n){return n.TECH="tech",n.MAIN="book-main",n}(wt||{});const wn=(n,r)=>n.recommendedLevel==r.recommendedLevel?n.isbn<r.isbn?-1:1:r.recommendedLevel-n.recommendedLevel;let jn=(()=>{class n{constructor(e,o,i,a,s){this.bookService=e,this._snackBar=o,this.dialog=i,this.router=a,this.route=s,this.bookname="",this.selectedAble=[{text:"\u666e\u901a",value:wt.MAIN,data:[]},{text:"\u6280\u672f\u7c7b",value:wt.TECH,data:[]}],this.mainRef=this.selectedAble[0],this.techRef=this.selectedAble[1],this.selected=this.selectedAble[0].value,this.list=[],this.Math=window.Math}ngOnInit(){const e=this.route.snapshot.queryParams,o=e.selected;this.selectedAble.map(a=>a.value).includes(o)&&(this.selected=o);const i=e.bookname;i&&(this.bookname=i),this.bookService.list(wt.TECH).pipe((0,ge.$)()).subscribe(a=>{0==a.status?(this.techRef.data=qt(a.custom,a.base),this.techRef.data.sort(wn)):this._snackBar.open(a.message,"",{duration:3e3})}),this.bookService.list(wt.MAIN).pipe((0,ge.$)()).subscribe(a=>{0==a.status?(this.mainRef.data=qt(a.custom,a.base),this.mainRef.data.sort(wn)):this._snackBar.open(a.message,"",{duration:3e3})})}doubanSearch(e){e&&this.bookService.search(e).subscribe(o=>{0==o.status?this.list=o.result:console.error(o)})}doubanQueryIsbn(e){const o=e.url;o&&this.bookService.url2isbn(o).subscribe(i=>{0==i.status?e.isbn=i.isbn:this._snackBar.open(i.message,"",{duration:3e3})})}addDoubanBook(e){this.router.navigate([],{queryParams:{selected:this.selected,bookname:this.bookname},queryParamsHandling:"merge"}),e.querying=!0,this.bookService.add2List(e,this.selected).subscribe(o=>{e.querying=!1,this._snackBar.open(o.message,"",{duration:3e3})})}msg(e){this._snackBar.open(e,"",{duration:3e3})}deleteDoubanBook(e,o){this.dialog.open(Bt._,{width:"250px",data:{text:`\u786e\u5b9a\u5220\u9664${e.title} (${e.isbn})?`,confirmText:"Delete"}}).afterClosed().subscribe(a=>{a&&this.bookService.delete(e.isbn,o).pipe((0,ge.$)()).subscribe(s=>{this.msg(0!=s.status?s.message:`${e.title}\u5220\u9664\u6210\u529f(${s.base}\u57fa\u7840,${s.custom}\u81ea\u5b9a\u4e49)`)})})}chooseStar(e,o,i){this.bookService.chooseStar(e,o,i).subscribe(a=>{this.msg(a.status?a.message:"updated")})}commentsClick(e,o,i){const a=prompt("\u8bf7\u8f93\u5165\u8bc4\u8bba",i);null!==a&&this.bookService.comments(e,o,a).subscribe(s=>{this.msg(s.status?s.message:"updated")})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(aa),t.rXU(_t.UG),t.rXU(j.bZ),t.rXU(k.Ix),t.rXU(k.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-man"]],standalone:!0,features:[t.aNF],decls:21,vars:5,consts:[[1,"full-page"],[1,"left-part"],[2,"display","flex","padding","0.5em"],["appearance","fill",2,"width","500px"],["matInput","","placeholder","\u8f93\u5165\u4e66\u540d","name","bookname",3,"ngModelChange","ngModel"],[2,"display","inline-flex","justify-content","center","align-items","center","margin","0.5em"],["mat-stroked-button","","color","primary",3,"click"],[2,"flex","1","display","inline-block"],["appearance","fill"],[3,"valueChange","value"],[3,"value",4,"ngFor","ngForOf"],["class","example-card",4,"ngFor","ngForOf"],[1,"right-part"],[3,"label",4,"ngFor","ngForOf"],[3,"value"],[1,"example-card"],[4,"ngIf"],["mat-card-image","",1,"example-image"],["alt","Photo of book",3,"src"],["inset",""],["mat-stroked-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"],[3,"label"],["class","book-row",4,"ngFor","ngForOf"],[1,"book-row"],["mat-stroked-button",""],[2,"display","inline-flex","flex-direction","column"],["iconOn","thumb_up_alt","iconOff","thumb_up_off_alt","color","primary",3,"chooseStarEvent","rating","starCount"],["iconOn","thumb_down_alt","iconOff","thumb_down_off_alt","color","primary",3,"chooseStarEvent","rating","starCount"],[1,"book-cover"],[3,"src"],[1,"book-title"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"form")(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"\u4e66\u540d"),t.k0s(),t.j41(7,"input",4),t.mxI("ngModelChange",function(s){return t.DH7(i.bookname,s)||(i.bookname=s),s}),t.k0s()(),t.j41(8,"div",5)(9,"button",6),t.bIt("click",function(){return i.doubanSearch(i.bookname)}),t.EFF(10," \u641c\u7d22 "),t.k0s()(),t.nrm(11,"div",7),t.j41(12,"mat-form-field",8)(13,"mat-label"),t.EFF(14,"\u6dfb\u52a0\u81f3"),t.k0s(),t.j41(15,"mat-select",9),t.mxI("valueChange",function(s){return t.DH7(i.selected,s)||(i.selected=s),s}),t.DNE(16,sa,2,2,"mat-option",10),t.k0s()()()(),t.DNE(17,da,17,4,"mat-card",11),t.k0s(),t.j41(18,"div",12)(19,"mat-tab-group"),t.DNE(20,ma,2,2,"mat-tab",13),t.k0s()()()),2&o&&(t.R7$(7),t.R50("ngModel",i.bookname),t.R7$(8),t.R50("value",i.selected),t.R7$(),t.Y8G("ngForOf",i.selectedAble),t.R7$(),t.Y8G("ngForOf",i.list),t.R7$(3),t.Y8G("ngForOf",i.selectedAble))},dependencies:[v.YN,v.qT,v.me,v.BC,v.cb,v.vS,v.cV,N.RG,N.rl,N.nJ,J.fS,J.fg,w.Hl,w.$z,In.Ve,In.VO,z.wT,l.pM,z.Sy,ft.Hu,ft.RN,ft.YY,ft.m2,ft.WQ,ft.kF,ft.Lc,ft.dh,l.bT,Dn.w,Dn.q,Pn.PO,Pn.HM,g.RI,g.mq,g.T8,At],styles:[".example-card[_ngcontent-%COMP%]{display:inline-block;margin:20px}.example-image[_ngcontent-%COMP%]{width:240px;height:200px;align-self:center;justify-self:center;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box}.example-image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.example-header-image[_ngcontent-%COMP%]{background-size:cover}.full-page[_ngcontent-%COMP%]{display:flex}.full-page[_ngcontent-%COMP%]   .left-part[_ngcontent-%COMP%]{flex:1}.full-page[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]{flex:1;box-sizing:border-box}.full-page[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]   .book-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5em}.full-page[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]   .book-row[_ngcontent-%COMP%]   .book-cover[_ngcontent-%COMP%]{position:relative;width:2em;height:2em;display:inline-flex;justify-content:center}.full-page[_ngcontent-%COMP%]   .right-part[_ngcontent-%COMP%]   .book-row[_ngcontent-%COMP%]   .book-title[_ngcontent-%COMP%]{flex:1;display:inline-block;text-overflow:ellipsis}"]})}return n})();var X=h(2042),F=h(9159);function ha(n,r){1&n&&(t.j41(0,"th",19),t.EFF(1,"\u5c01\u9762"),t.k0s())}function _a(n,r){if(1&n&&(t.j41(0,"td",20)(1,"a",21),t.nrm(2,"img",22),t.k0s()()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("href",o.douBanUrl(e),t.B4B),t.R7$(),t.Y8G("src",e.pic,t.B4B)}}function fa(n,r){1&n&&(t.j41(0,"th",23),t.EFF(1," \u4e66\u540d "),t.k0s())}function ga(n,r){if(1&n&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.title," ")}}function ba(n,r){1&n&&(t.j41(0,"th",25),t.EFF(1," \u51fa\u7248 "),t.k0s())}function ka(n,r){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.year," ")}}function va(n,r){1&n&&(t.j41(0,"th",27),t.EFF(1," \u63a8\u8350\u5ea6 "),t.k0s())}function ya(n,r){if(1&n&&t.nrm(0,"app-star-rating",31),2&n){const e=t.XpG().$implicit;t.Y8G("rating",e.recommendedLevel)("starCount",5)}}function Ca(n,r){if(1&n&&t.nrm(0,"app-star-rating",32),2&n){const e=t.XpG().$implicit;t.Y8G("rating",e.recommendedLevel)("starCount",5)}}function xa(n,r){if(1&n&&t.nrm(0,"app-star-rating",33),2&n){const e=t.XpG().$implicit;t.Y8G("rating",-e.recommendedLevel)("starCount",5)}}function Fa(n,r){if(1&n&&(t.j41(0,"td",26),t.DNE(1,ya,1,2,"app-star-rating",28)(2,Ca,1,2,"app-star-rating",29)(3,xa,1,2,"app-star-rating",30),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("ngIf",e.recommendedLevel>0),t.R7$(),t.Y8G("ngIf",0===e.recommendedLevel),t.R7$(),t.Y8G("ngIf",e.recommendedLevel<0)}}function Ea(n,r){1&n&&(t.j41(0,"th",19),t.EFF(1,"\u77ed\u8bc4"),t.k0s())}function Ta(n,r){1&n&&(t.j41(0,"div"),t.EFF(1,"(\u6682\u672a\u9605\u8bfb)"),t.k0s())}function Ma(n,r){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.reaction)}}function Sa(n,r){if(1&n&&(t.j41(0,"td",26),t.DNE(1,Ta,2,0,"div",34)(2,Ma,2,1,"div",34),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("ngIf",0===e.recommendedLevel),t.R7$(),t.Y8G("ngIf",e.reaction)}}function Ra(n,r){1&n&&(t.j41(0,"th",35),t.EFF(1," ISBN "),t.k0s())}function Ba(n,r){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.isbn," ")}}function Pa(n,r){1&n&&(t.j41(0,"th",19),t.EFF(1,"\u94fe\u63a5"),t.k0s())}function Da(n,r){if(1&n&&(t.j41(0,"td",20)(1,"a",21),t.EFF(2," \u8c46\u74e3 "),t.k0s()()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("href",o.douBanUrl(e),t.B4B)}}function Ia(n,r){1&n&&t.nrm(0,"tr",36)}function wa(n,r){1&n&&t.nrm(0,"tr",37)}let $n=(()=>{class n{constructor(e){this._liveAnnouncer=e,this.displayedColumns=["cover","title","recommendedLevel","reaction","year","isbn"],this.dataSource=new F.I6([])}ngAfterViewInit(){var e=this;setTimeout((0,d.A)(function*(){const o=yield h.e(880).then(h.bind(h,5880));e.dataSource=new F.I6(qt(o.TECH_CUSTOM,o.TECH_BASE)),e.sort.sort({id:"recommendedLevel",start:"desc"}),e.dataSource.sort=e.sort}),0)}announceSortChange(e){this._liveAnnouncer.announce(e.direction?`Sorted ${e.direction}ending`:"Sorting cleared")}goDouBan(e){window.open(this.douBanUrl(e),"_blank")}douBanUrl(e){return`https://book.douban.com/subject_search?search_text=${e.isbn}`}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Tt.Ai))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-tech"]],viewQuery:function(o,i){if(1&o&&t.GBs(X.B4,5),2&o){let a;t.mGM(a=t.lsd())&&(i.sort=a.first)}},standalone:!0,features:[t.aNF],decls:25,vars:3,consts:[[2,"display","block","overflow-x","scroll","min-width","800px"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"matSortChange","dataSource"],["matColumnDef","cover"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by title",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 12em; padding: 0.5em",4,"matCellDef"],["matColumnDef","year"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year",4,"matHeaderCellDef"],["mat-cell","","style","padding: 0.5em",4,"matCellDef"],["matColumnDef","recommendedLevel"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by RecommendedLevel",4,"matHeaderCellDef"],["matColumnDef","reaction"],["matColumnDef","isbn"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name",4,"matHeaderCellDef"],["matColumnDef","douban"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["appHrefExternalUrl","",3,"href"],[1,"cover-img",3,"src"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by title"],["mat-cell","",2,"max-width","12em","padding","0.5em"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year"],["mat-cell","",2,"padding","0.5em"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by RecommendedLevel"],["iconOn","thumb_up_alt","iconOff","thumb_up_off_alt","color","primary",3,"rating","starCount",4,"ngIf"],["color","basic",3,"rating","starCount",4,"ngIf"],["iconOn","thumb_down_alt","iconOff","thumb_down_off_alt","color","primary",3,"rating","starCount",4,"ngIf"],["iconOn","thumb_up_alt","iconOff","thumb_up_off_alt","color","primary",3,"rating","starCount"],["color","basic",3,"rating","starCount"],["iconOn","thumb_down_alt","iconOff","thumb_down_off_alt","color","primary",3,"rating","starCount"],[4,"ngIf"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"table",1),t.bIt("matSortChange",function(s){return i.announceSortChange(s)}),t.qex(2,2),t.DNE(3,ha,2,0,"th",3)(4,_a,3,2,"td",4),t.bVm(),t.qex(5,5),t.DNE(6,fa,2,0,"th",6)(7,ga,2,1,"td",7),t.bVm(),t.qex(8,8),t.DNE(9,ba,2,0,"th",9)(10,ka,2,1,"td",10),t.bVm(),t.qex(11,11),t.DNE(12,va,2,0,"th",12)(13,Fa,4,3,"td",10),t.bVm(),t.qex(14,13),t.DNE(15,Ea,2,0,"th",3)(16,Sa,3,2,"td",10),t.bVm(),t.qex(17,14),t.DNE(18,Ra,2,0,"th",15)(19,Ba,2,1,"td",10),t.bVm(),t.qex(20,16),t.DNE(21,Pa,2,0,"th",3)(22,Da,3,1,"td",4),t.bVm(),t.DNE(23,Ia,1,0,"tr",17)(24,wa,1,0,"tr",18),t.k0s()()),2&o&&(t.R7$(),t.Y8G("dataSource",i.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns))},dependencies:[F.tP,F.Zl,F.tL,F.ji,F.cC,F.YV,F.iL,F.KS,F.$R,F.YZ,F.NB,X.NQ,X.B4,X.aE,bt,l.bT,At],styles:["table[_ngcontent-%COMP%]{width:100%}.cover-img[_ngcontent-%COMP%]{height:3em}"]})}return n})();function ja(n,r){1&n&&(t.j41(0,"th",19),t.EFF(1,"\u5c01\u9762"),t.k0s())}function $a(n,r){if(1&n&&(t.j41(0,"td",20)(1,"a",21),t.nrm(2,"img",22),t.k0s()()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("href",o.douBanUrl(e),t.B4B),t.R7$(),t.Y8G("src",e.pic,t.B4B)}}function Va(n,r){1&n&&(t.j41(0,"th",23),t.EFF(1," \u4e66\u540d "),t.k0s())}function Aa(n,r){if(1&n&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.title," ")}}function Oa(n,r){1&n&&(t.j41(0,"th",25),t.EFF(1," \u51fa\u7248 "),t.k0s())}function Ga(n,r){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.year," ")}}function Na(n,r){1&n&&(t.j41(0,"th",27),t.EFF(1," \u63a8\u8350\u5ea6 "),t.k0s())}function La(n,r){if(1&n&&t.nrm(0,"app-star-rating",31),2&n){const e=t.XpG().$implicit;t.Y8G("rating",e.recommendedLevel)("starCount",5)}}function Ua(n,r){if(1&n&&t.nrm(0,"app-star-rating",32),2&n){const e=t.XpG().$implicit;t.Y8G("rating",e.recommendedLevel)("starCount",5)}}function qa(n,r){if(1&n&&t.nrm(0,"app-star-rating",33),2&n){const e=t.XpG().$implicit;t.Y8G("rating",-e.recommendedLevel)("starCount",5)}}function Xa(n,r){if(1&n&&(t.j41(0,"td",26),t.DNE(1,La,1,2,"app-star-rating",28)(2,Ua,1,2,"app-star-rating",29)(3,qa,1,2,"app-star-rating",30),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("ngIf",e.recommendedLevel>0),t.R7$(),t.Y8G("ngIf",0===e.recommendedLevel),t.R7$(),t.Y8G("ngIf",e.recommendedLevel<0)}}function Ha(n,r){1&n&&(t.j41(0,"th",19),t.EFF(1,"\u77ed\u8bc4"),t.k0s())}function za(n,r){1&n&&(t.j41(0,"div"),t.EFF(1,"(\u6682\u672a\u9605\u8bfb)"),t.k0s())}function Ja(n,r){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.reaction)}}function Ya(n,r){if(1&n&&(t.j41(0,"td",26),t.DNE(1,za,2,0,"div",34)(2,Ja,2,1,"div",34),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("ngIf",0===e.recommendedLevel),t.R7$(),t.Y8G("ngIf",e.reaction)}}function Ka(n,r){1&n&&(t.j41(0,"th",35),t.EFF(1," ISBN "),t.k0s())}function Qa(n,r){if(1&n&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.isbn," ")}}function Za(n,r){1&n&&(t.j41(0,"th",19),t.EFF(1,"\u94fe\u63a5"),t.k0s())}function Wa(n,r){if(1&n&&(t.j41(0,"td",20)(1,"a",21),t.EFF(2," \u8c46\u74e3 "),t.k0s()()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("href",o.douBanUrl(e),t.B4B)}}function ts(n,r){1&n&&t.nrm(0,"tr",36)}function es(n,r){1&n&&t.nrm(0,"tr",37)}let Vn=(()=>{class n{constructor(e){this._liveAnnouncer=e,this.displayedColumns=["cover","title","recommendedLevel","reaction","year","isbn"],this.dataSource=new F.I6([])}ngAfterViewInit(){var e=this;setTimeout((0,d.A)(function*(){const o=yield h.e(880).then(h.bind(h,5880));e.dataSource=new F.I6(qt(o.BOOK_MAIN_CUSTOM,o.BOOK_MAIN_BASE)),e.sort.sort({id:"recommendedLevel",start:"desc"}),e.dataSource.sort=e.sort}),0)}announceSortChange(e){this._liveAnnouncer.announce(e.direction?`Sorted ${e.direction}ending`:"Sorting cleared")}goDouBan(e){window.open(this.douBanUrl(e),"_blank")}douBanUrl(e){return`https://book.douban.com/subject_search?search_text=${e.isbn}`}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Tt.Ai))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-book-main"]],viewQuery:function(o,i){if(1&o&&t.GBs(X.B4,5),2&o){let a;t.mGM(a=t.lsd())&&(i.sort=a.first)}},standalone:!0,features:[t.aNF],decls:25,vars:3,consts:[[2,"display","block","overflow-x","scroll","min-width","800px"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"matSortChange","dataSource"],["matColumnDef","cover"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by title",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 12em; padding: 0.5em",4,"matCellDef"],["matColumnDef","year"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year",4,"matHeaderCellDef"],["mat-cell","","style","padding: 0.5em",4,"matCellDef"],["matColumnDef","recommendedLevel"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by RecommendedLevel",4,"matHeaderCellDef"],["matColumnDef","reaction"],["matColumnDef","isbn"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name",4,"matHeaderCellDef"],["matColumnDef","douban"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["appHrefExternalUrl","",3,"href"],[1,"cover-img",3,"src"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by title"],["mat-cell","",2,"max-width","12em","padding","0.5em"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year"],["mat-cell","",2,"padding","0.5em"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by RecommendedLevel"],["iconOn","thumb_up_alt","iconOff","thumb_up_off_alt","color","primary",3,"rating","starCount",4,"ngIf"],["color","basic",3,"rating","starCount",4,"ngIf"],["iconOn","thumb_down_alt","iconOff","thumb_down_off_alt","color","primary",3,"rating","starCount",4,"ngIf"],["iconOn","thumb_up_alt","iconOff","thumb_up_off_alt","color","primary",3,"rating","starCount"],["color","basic",3,"rating","starCount"],["iconOn","thumb_down_alt","iconOff","thumb_down_off_alt","color","primary",3,"rating","starCount"],[4,"ngIf"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"table",1),t.bIt("matSortChange",function(s){return i.announceSortChange(s)}),t.qex(2,2),t.DNE(3,ja,2,0,"th",3)(4,$a,3,2,"td",4),t.bVm(),t.qex(5,5),t.DNE(6,Va,2,0,"th",6)(7,Aa,2,1,"td",7),t.bVm(),t.qex(8,8),t.DNE(9,Oa,2,0,"th",9)(10,Ga,2,1,"td",10),t.bVm(),t.qex(11,11),t.DNE(12,Na,2,0,"th",12)(13,Xa,4,3,"td",10),t.bVm(),t.qex(14,13),t.DNE(15,Ha,2,0,"th",3)(16,Ya,3,2,"td",10),t.bVm(),t.qex(17,14),t.DNE(18,Ka,2,0,"th",15)(19,Qa,2,1,"td",10),t.bVm(),t.qex(20,16),t.DNE(21,Za,2,0,"th",3)(22,Wa,3,1,"td",4),t.bVm(),t.DNE(23,ts,1,0,"tr",17)(24,es,1,0,"tr",18),t.k0s()()),2&o&&(t.R7$(),t.Y8G("dataSource",i.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns))},dependencies:[F.tP,F.Zl,F.tL,F.ji,F.cC,F.YV,F.iL,F.KS,F.$R,F.YZ,F.NB,X.NQ,X.B4,X.aE,bt,l.bT,At],styles:["table[_ngcontent-%COMP%]{width:100%}.cover-img[_ngcontent-%COMP%]{height:3em}"]})}return n})();var Xt=h(882),be=h(5911);const ns=(n,r)=>r.url,is=n=>[n];function os(n,r){if(1&n&&(t.j41(0,"mat-list-option",7),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("value",e.url)("routerLink",t.eq3(3,is,e.url)),t.R7$(),t.SpI(" ",e.text," ")}}let An=(()=>{class n{constructor(){this.urlList=[{url:"./",text:"home"},{url:"./ctl",text:"control"},{url:"./local",text:"local"},{url:"./javdb",text:"javdb"},{url:"./magnet",text:"magnet"},{url:"./0",text:"0 star"},{url:"./javbus",text:"javbus(\u5f03\u7528)"},{url:"./top3",text:"top3(\u5f03\u7528)"}]}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn-route"]],standalone:!0,features:[t.aNF],decls:16,vars:2,consts:[["snav",""],[1,"container"],["color","primary"],["mat-icon-button","",3,"click"],["matRipple",""],[1,"sidenav",3,"mode"],[3,"multiple"],[3,"value","routerLink"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"div",1)(1,"mat-toolbar",2)(2,"mat-toolbar-row")(3,"button",3),t.bIt("click",function(){t.eBV(a);const p=t.sdS(10);return t.Njj(p.toggle())}),t.j41(4,"mat-icon"),t.EFF(5,"menu"),t.k0s()(),t.j41(6,"span",4),t.EFF(7,"Porn Manager"),t.k0s()()(),t.j41(8,"mat-sidenav-container",1)(9,"mat-sidenav",5,0)(11,"mat-selection-list",6),t.Z7z(12,os,2,5,"mat-list-option",7,ns),t.k0s()(),t.j41(14,"mat-sidenav-content"),t.nrm(15,"router-outlet"),t.k0s()()()}2&o&&(t.R7$(9),t.Y8G("mode","push"),t.R7$(2),t.Y8G("multiple",!1),t.R7$(),t.Dyx(i.urlList))},dependencies:[be.s5,be.KQ,be.uu,w.Hl,w.iY,st.m_,st.An,z.pZ,z.r6,Xt.vg,Xt.LG,Xt.US,Xt.El,yt.Fg,yt.p6,yt.oh,k.Wk,k.n3],styles:[".example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.container[_ngcontent-%COMP%]{position:relative;height:100vh;box-sizing:border-box;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{flex:1;background-color:#e7eaec;color:#000;width:100%;height:100%;display:block}"]})}return n})();const rs=(n,r)=>r.name;function as(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",3),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openParentDir())}),t.j41(1,"div",4),t.EFF(2,".."),t.k0s()()}}function ss(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",3),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.openDir(i.path))}),t.j41(1,"div",4),t.EFF(2),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(2),t.JRh(e.name)}}function cs(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-porn-man-page",5),t.bIt("refreshEvent",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.refresh.next(1))})("updatePornListEvent",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.pornList$.next(i))}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("pList",e.pornList$.getValue())}}var On=function(n){return n[n.UnFetch=0]="UnFetch",n[n.Fetching=1]="Fetching",n}(On||{});let Gn=(()=>{class n{ngOnInit(){this.path$.next(this.route.snapshot.queryParams.path||""),this.path$.subscribe(o=>{this.router.navigate([],{queryParams:{path:o||void 0},queryParamsHandling:"merge"})}),(0,U.zV)([this.path$,this.refresh]).pipe(Vt(100,M.E,{leading:!0,trailing:!0}),(0,ut.ZZ)(()=>this.javService.postListFolder({requestBody:{base:this.path$.getValue()}})),ee("unix_files"),(0,I.M)(o=>{const i=[];for(const a of o)a.type==mt.FOLDER&&i.push(a);i.sort((a,s)=>a.name<s.name?-1:1),this.folderList$.next(i)}),(0,I.M)(o=>this.pornList$.next(on(function ls(n){return n.filter(r=>r.type==mt.MP4).map(r=>r.data)}(o))))).subscribe()}openParentDir(){const e=this.path$.getValue().split("/");e.pop();const o=e.join("/");this.path$.next(o)}openDir(e){this.path$.next(e)}constructor(e,o,i,a){this.javService=e,this.router=o,this.route=i,this.dialog=a,this.folderList$=new u.t([]),this.pornList$=new u.t([]),this.rootDirs=[],this.refresh=new u.t(1),this.FileType=mt,this.FetchStat=On,this.path$=new u.t("")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(dt),t.rXU(k.Ix),t.rXU(k.nX),t.rXU(j.bZ))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn"]],standalone:!0,features:[t.aNF],decls:6,vars:4,consts:[[1,"dirlist-box"],[1,"folder-div"],[3,"pList"],[1,"folder-div",3,"click"],[1,"inner"],[3,"refreshEvent","updatePornListEvent","pList"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.DNE(1,as,3,0,"div",1),t.nI1(2,"async"),t.Z7z(3,ss,3,1,"div",1,rs),t.k0s(),t.DNE(5,cs,1,1,"app-porn-man-page",2)),2&o&&(t.R7$(),t.vxM(1,t.bMT(2,2,i.path$)?1:-1),t.R7$(2),t.Dyx(i.folderList$.getValue()),t.R7$(2),t.vxM(5,i.pornList$.getValue().length?5:-1))},dependencies:[de,l.Jj],styles:[".dirlist-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;padding:8px}.dirlist-box[_ngcontent-%COMP%]   .folder-div[_ngcontent-%COMP%]{display:inline-block;width:360px;padding-left:8px;padding-right:8px;padding-bottom:40px;position:relative}.dirlist-box[_ngcontent-%COMP%]   .folder-div[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:240px;background-color:#d3d3d3}.dirlist-box[_ngcontent-%COMP%]   .mp4-div[_ngcontent-%COMP%]{display:inline-block;width:360px;padding-left:8px;padding-right:8px;padding-bottom:40px;position:relative}.dirlist-box[_ngcontent-%COMP%]   .mp4-div[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:240px;background-color:#ffffe0}"]})}return n})();const us=h.e(426).then(h.t.bind(h,5426,19)).then(n=>n.default);let Ln=(()=>{class n{protoPOST(e,o){return this.http.post(`/api/${e}`,{params:o})}POST(e,o){return this.http.post(`/api/${e}`,{params:o})}javbus_genre(e){return this.POST("javbus_genre",e)}javbus_single(e){return this.POST("javbus_single",{url:e})}top3_get(){return(0,t.naY)()?this.http.get("/api/top3_get"):(0,it.H)(us)}top3_collect_all(){return this.POST("top3_collect_all",{})}top3_collect(e){return this.POST("top3_collect",e)}top3_remove(e){return this.POST("top3_remove",e)}constructor(e){this.http=e}static#t=this.\u0275fac=function(o){return new(o||n)(t.KVO(lt.Qq))};static#e=this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ds=n=>({"bg-red":n});function ps(n,r){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.get_top3())}),t.EFF(2,"Refresh"),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.collect_all())}),t.EFF(4,"Collect all(\u53ea\u6536\u96c6\u7a7a\u6570\u636e)"),t.k0s(),t.bVm()}}function ms(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.year$.next(i))}),t.EFF(1),t.k0s()}if(2&n){const e=r.$implicit,o=t.XpG();t.Y8G("color",o.year$.getValue()===e?"primary":void 0),t.R7$(),t.SpI(" ",e," ")}}function hs(n,r){if(1&n&&(t.qex(0),t.j41(1,"h2"),t.EFF(2),t.k0s(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.SpI("",e.start_year," \u5e74\u5ea6")}}function _s(n,r){if(1&n&&(t.qex(0),t.j41(1,"h3"),t.EFF(2),t.k0s(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.Lme("",e.start_year," - ",e.start_month," \u5b63\u5ea6")}}function fs(n,r){if(1&n&&(t.qex(0),t.j41(1,"h4"),t.EFF(2),t.k0s(),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(2),t.Lme("",e.start_year," - ",e.start_month," \u6708\u5ea6")}}function gs(n,r){if(1&n){const e=t.RV6();t.j41(0,"button",9),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.collect(i.range_type,i.start_year,i.start_month))}),t.EFF(1," recollect "),t.k0s()}}function bs(n,r){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG(2).$implicit,s=t.XpG();return t.Njj(s.top3_remove(a.range_type,a.start_year,a.start_month,i.b.meta.product_id))}),t.EFF(2," remove from top3 "),t.k0s(),t.bVm()}}function ks(n,r){if(1&n&&(t.j41(0,"div",16),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e.b.custom.comments," ")}}function vs(n,r){if(1&n&&(t.qex(0),t.DNE(1,ks,2,1,"div",15),t.bVm()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.b.custom.comments)}}function ys(n,r){if(1&n&&(t.qex(0),t.j41(1,"app-video-block",10),t.qex(2,11),t.DNE(3,bs,3,0,"ng-container",1),t.j41(4,"a",12)(5,"button",13),t.EFF(6,"missav"),t.k0s()(),t.bVm(),t.qex(7,14),t.DNE(8,vs,2,1,"ng-container",1),t.bVm(),t.k0s(),t.bVm()),2&n){const e=r.$implicit,o=t.XpG(3);t.R7$(),t.Y8G("view",o.porn2view(e)),t.R7$(2),t.Y8G("ngIf",o.isDevMode),t.R7$(),t.Y8G("href","https://missav.com/search/"+e.b.meta.product_id,t.B4B),t.R7$(4),t.Y8G("ngIf",o.isDevMode)}}function Cs(n,r){if(1&n&&(t.qex(0),t.DNE(1,ys,9,4,"ng-container",1),t.bVm()),2&n){const e=r.$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.productKV[e])}}function xs(n,r){if(1&n&&(t.j41(0,"div")(1,"div",6),t.DNE(2,hs,3,1,"ng-container",1)(3,_s,3,2,"ng-container",1)(4,fs,3,2,"ng-container",1)(5,gs,2,0,"button",7),t.k0s(),t.j41(6,"div",8),t.DNE(7,Cs,2,1,"ng-container",3),t.k0s()()),2&n){const e=r.$implicit,o=t.XpG();t.R7$(2),t.Y8G("ngIf",e.range_type===o.RANGE_TYPE.YEAR),t.R7$(),t.Y8G("ngIf",e.range_type===o.RANGE_TYPE.QUARTER),t.R7$(),t.Y8G("ngIf",e.range_type===o.RANGE_TYPE.MONTH),t.R7$(),t.Y8G("ngIf",o.isDevMode),t.R7$(),t.Y8G("ngClass",t.eq3(6,ds,o.redBg(e))),t.R7$(),t.Y8G("ngForOf",e.l)}}let Un=(()=>{class n{constructor(e,o,i,a){this.service=e,this._snackBar=o,this.route=i,this.router=a,this.data$=new u.t([]),this.paged_data=[],this.isDevMode=(0,t.naY)(),this.eachPage=5,this.maxPage$=new u.t(0),this.yearList=[],this.year$=new u.t(String((new Date).getFullYear())),this.productKV={},this.RANGE_TYPE=nt,this.porn2view=Kt}update_router(e,o){this.router.navigate([],{queryParams:{[e]:o||void 0},queryParamsHandling:"merge",replaceUrl:!0})}ngOnInit(){this.data$.subscribe(e=>{const o=e.length,i=o%this.eachPage;this.maxPage$.next((o-i)/this.eachPage-1+ +!!i),this.yearList=[];for(let C=(new Date).getFullYear();C>=2010;C--)this.yearList.push(`${C}`)}),this.route.queryParamMap.subscribe(e=>{this.year$.next(e.get("year")||String((new Date).getFullYear()))}),this.year$.subscribe(e=>{this.update_router("year",String(e))}),(0,U.zV)([this.data$,this.year$]).pipe((0,Te.F)()).subscribe(()=>{const e=this.data$.getValue(),o=this.year$.getValue();this.paged_data=e.filter(i=>i.start_year==o)})}alert(e){this._snackBar.open(e,"",{duration:3e3})}get_top3(){this.service.top3_get().subscribe(e=>{this.alert("Top3 get success"),this.data$.next(e)})}collect_all(){this.service.top3_collect_all().subscribe(e=>{this.alert(e.message)})}collect(e,o,i){this.service.top3_collect({range_type:e,start_year:o,start_month:i}).subscribe(a=>{this.alert(0==a.status?"ok":a.message)})}top3_remove(e,o,i,a){this.service.top3_remove({range_type:e,start_year:o,start_month:i,product_id:a}).subscribe(s=>{this.alert(s.message)})}redBg(e){return e.range_type==nt.MONTH?e.l.length>3:e.range_type==nt.QUARTER?e.l.length>5:e.l.length>10}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Ln),t.rXU(_t.UG),t.rXU(k.nX),t.rXU(k.Ix))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-top3"]],standalone:!0,features:[t.aNF],decls:8,vars:3,consts:[[2,"font-size",".5em","color","lightcoral"],[4,"ngIf"],["mat-raised-button","",3,"color","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],["mat-raised-button","",3,"click","color"],[2,"display","flex","align-items","center"],["mat-stroked-button","",3,"click",4,"ngIf"],[2,"display","flex","flex-wrap","wrap",3,"ngClass"],["mat-stroked-button","",3,"click"],[3,"view"],["ngProjectAs","[buttons]",5,["","buttons",""]],["appHrefExternalUrl","",3,"href"],["mat-button",""],["ngProjectAs","[extra]",5,["","extra",""]],["class","comments",4,"ngIf"],[1,"comments"]],template:function(o,i){1&o&&(t.j41(0,"h1"),t.EFF(1,"Top 3(\u6708\u5ea6),Top 5(\u5b63\u5ea6),Top 10(\u5e74\u5ea6) "),t.j41(2,"span",0),t.EFF(3,"\u7ea2\u8272\u80cc\u666f\u4e3a\u672a\u6574\u7406"),t.k0s()(),t.DNE(4,ps,5,0,"ng-container",1),t.j41(5,"div"),t.DNE(6,ms,2,2,"button",2),t.k0s(),t.DNE(7,xs,8,8,"div",3)),2&o&&(t.R7$(4),t.Y8G("ngIf",i.isDevMode),t.R7$(2),t.Y8G("ngForOf",i.yearList),t.R7$(),t.Y8G("ngForOf",i.paged_data))},dependencies:[l.bT,w.Hl,w.$z,l.pM,l.YU,St,bt],styles:[".bg-red[_ngcontent-%COMP%]{background-color:#f08080}[_nghost-%COMP%]{padding:2em;box-sizing:border-box;display:block}"]})}return n})();var qn=h(5024);const Fs=["button"],Es=["*"];function Ts(n,r){if(1&n&&t.nrm(0,"mat-pseudo-checkbox",3),2&n){const e=t.XpG();t.Y8G("disabled",e.disabled)}}function Ms(n,r){if(1&n&&t.nrm(0,"mat-pseudo-checkbox",3),2&n){const e=t.XpG();t.Y8G("disabled",e.disabled)}}const Xn=new t.nKC("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:function Ss(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1}}}),Hn=new t.nKC("MatButtonToggleGroup"),Rs={provide:v.kq,useExisting:(0,t.Rfq)(()=>Yn),multi:!0};let zn=0;class Jn{constructor(r,e){this.source=r,this.value=e}}let Yn=(()=>{class n{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(o=>o.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}constructor(e,o){this._changeDetector=e,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+zn++,this.valueChange=new t.bkB,this.change=new t.bkB,this.appearance=o&&o.appearance?o.appearance:"standard",this.hideSingleSelectionIndicator=o?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=o?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new qn.CB(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(e){const o=new Jn(e,this.value);this._rawValue=o.value,this._controlValueAccessorChangeFn(o.value),this.change.emit(o)}_syncButtonToggle(e,o,i=!1,a=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?o?this._selectionModel.select(e):this._selectionModel.deselect(e):a=!0,a?Promise.resolve().then(()=>this._updateModelValue(e,i)):this._updateModelValue(e,i)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return!(typeof this._rawValue>"u")&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(o=>null!=e.value&&o===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(o=>this._selectValue(o))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const o=this._buttonToggles.find(i=>null!=i.value&&i.value===e);o&&(o.checked=!0,this._selectionModel.select(o))}_updateModelValue(e,o){o&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(Xn,8))};static#e=this.\u0275dir=t.FsC({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(o,i,a){if(1&o&&t.wni(a,ke,5),2&o){let s;t.mGM(s=t.lsd())&&(i._buttonToggles=s)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(o,i){2&o&&(t.BMQ("aria-disabled",i.disabled),t.AVh("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard","standard"===i.appearance))},inputs:{appearance:"appearance",name:"name",vertical:[t.Mj6.HasDecoratorInputTransform,"vertical","vertical",t.L39],value:"value",multiple:[t.Mj6.HasDecoratorInputTransform,"multiple","multiple",t.L39],disabled:[t.Mj6.HasDecoratorInputTransform,"disabled","disabled",t.L39],hideSingleSelectionIndicator:[t.Mj6.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",t.L39],hideMultipleSelectionIndicator:[t.Mj6.HasDecoratorInputTransform,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",t.L39]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[t.Jv_([Rs,{provide:Hn,useExisting:n}]),t.GFd]})}return n})(),ke=(()=>{class n{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}constructor(e,o,i,a,s,p){this._changeDetectorRef=o,this._elementRef=i,this._focusMonitor=a,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new t.bkB;const C=Number(s);this.tabIndex=C||0===C?C:null,this.buttonToggleGroup=e,this.appearance=p&&p.appearance?p.appearance:"standard"}ngOnInit(){const e=this.buttonToggleGroup;this.id=this.id||"mat-button-toggle-"+zn++,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector()||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Jn(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Hn,8),t.rXU(t.gRc),t.rXU(t.aKT),t.rXU(Tt.FN),t.kS0("tabindex"),t.rXU(Xn,8))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(o,i){if(1&o&&t.GBs(Fs,5),2&o){let a;t.mGM(a=t.lsd())&&(i._buttonElement=a.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(o,i){1&o&&t.bIt("focus",function(){return i.focus()}),2&o&&(t.BMQ("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),t.AVh("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{ariaLabel:[t.Mj6.None,"aria-label","ariaLabel"],ariaLabelledby:[t.Mj6.None,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[t.Mj6.HasDecoratorInputTransform,"disableRipple","disableRipple",t.L39],appearance:"appearance",checked:[t.Mj6.HasDecoratorInputTransform,"checked","checked",t.L39],disabled:[t.Mj6.HasDecoratorInputTransform,"disabled","disabled",t.L39]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[t.GFd,t.aNF],ngContentSelectors:Es,decls:8,vars:11,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(o,i){if(1&o){const a=t.RV6();t.NAR(),t.j41(0,"button",1,0),t.bIt("click",function(){return t.eBV(a),t.Njj(i._onButtonClick())}),t.j41(2,"span",2),t.DNE(3,Ts,1,1,"mat-pseudo-checkbox",3)(4,Ms,1,1,"mat-pseudo-checkbox",3),t.SdG(5),t.k0s()(),t.nrm(6,"span",4)(7,"span",5)}if(2&o){const a=t.sdS(1);t.Y8G("id",i.buttonId)("disabled",i.disabled||null),t.BMQ("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),t.R7$(3),t.vxM(3,i.buttonToggleGroup&&i.checked&&!i.buttonToggleGroup.multiple&&!i.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),t.R7$(),t.vxM(4,i.buttonToggleGroup&&i.checked&&i.buttonToggleGroup.multiple&&!i.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),t.R7$(3),t.Y8G("matRippleTrigger",a)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[z.r6,z.wg],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-standard-button-toggle-selected-state-text-color )}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-legacy-button-toggle-selected-state-text-color )}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-legacy-button-toggle-disabled-state-text-color )}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font);font-size:var(--mat-standard-button-toggle-label-text-size);line-height:var(--mat-standard-button-toggle-label-text-line-height);font-weight:var(--mat-standard-button-toggle-label-text-weight);letter-spacing:var(--mat-standard-button-toggle-label-text-tracking)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-standard-button-toggle-disabled-selected-state-text-color )}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape);border-bottom-right-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape);border-bottom-left-radius:var(--mat-standard-button-toggle-shape)}"],encapsulation:2,changeDetection:0})}return n})(),Bs=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[z.yE,z.pZ,ke,z.yE]})}return n})();const Kn=(n,r)=>r.meta.product_id;function Ps(n,r){1&n&&(t.j41(0,"mat-chip"),t.EFF(1,"\u{1f1e8}\u{1f1f3}\u4e2d\u6587"),t.k0s())}function Ds(n,r){1&n&&(t.j41(0,"mat-chip"),t.EFF(1,"\u{1f517}\u78c1\u529b"),t.k0s())}function Is(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-video-block",12),t.qex(1,13),t.j41(2,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit;return t.Njj(i.removed=!0)}),t.EFF(3,"Remove"),t.k0s(),t.j41(4,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.AddPorn0(i))}),t.EFF(5,"Add"),t.k0s(),t.j41(6,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.preview(i))}),t.EFF(7,"Preview"),t.k0s(),t.j41(8,"a",15)(9,"button",16),t.EFF(10,"missav"),t.k0s()(),t.bVm(),t.qex(11,17),t.j41(12,"mat-chip-set",18),t.DNE(13,Ps,2,0,"mat-chip")(14,Ds,2,0,"mat-chip"),t.j41(15,"mat-chip"),t.EFF(16),t.k0s()(),t.bVm(),t.k0s()}if(2&n){const e=t.XpG().$implicit,o=t.XpG();t.Y8G("view",o.pornViewTransformer(e)),t.R7$(8),t.Y8G("href","https://missav.com/search/"+e.meta.product_id,t.B4B),t.R7$(5),t.vxM(13,e.meta.has_chinese?13:-1),t.R7$(),t.vxM(14,e.meta.has_magnet?14:-1),t.R7$(2),t.Lme("",e.meta.score,"\u5206, ",e.meta.comments_cnt,"\u4eba")}}function ws(n,r){if(1&n&&t.DNE(0,Is,17,6,"app-video-block",12),2&n){const e=r.$implicit;t.vxM(0,e.added||e.removed?-1:0)}}function js(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e)}}function $s(n,r){if(1&n&&(t.j41(0,"a",21),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.Y8G("href",e.url,t.B4B),t.R7$(),t.SpI(" ",e.name," ")}}function Vs(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",19)(1,"div"),t.EFF(2),t.k0s(),t.j41(3,"div"),t.EFF(4),t.k0s(),t.nrm(5,"img",20),t.j41(6,"div"),t.Z7z(7,js,2,1,"span",null,t.Vm6),t.k0s(),t.j41(9,"div"),t.Z7z(10,$s,2,2,"a",21,t.Vm6),t.k0s(),t.j41(12,"button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.gallery(i))}),t.EFF(13,"gallery"),t.k0s(),t.j41(14,"button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.AddPorn1(i))}),t.EFF(15,"Add"),t.k0s(),t.j41(16,"button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit;return t.Njj(i.removed=!0)}),t.EFF(17,"Remove"),t.k0s()()}if(2&n){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.meta.product_id),t.R7$(2),t.JRh(e.meta.name),t.R7$(),t.Y8G("src",e.meta.cover_url,t.B4B),t.R7$(2),t.Dyx(e.meta.categories),t.R7$(3),t.Dyx(e.meta.actress_list)}}function As(n,r){if(1&n&&t.DNE(0,Vs,18,3,"div",19),2&n){const e=r.$implicit;t.vxM(0,e.added||e.removed?-1:0)}}function Os(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",8)(1,"mat-form-field",4)(2,"mat-label"),t.EFF(3,"Page"),t.k0s(),t.j41(4,"input",5),t.mxI("ngModelChange",function(i){t.eBV(e);const a=t.XpG();return t.DH7(a.page,i)||(a.page=i),t.Njj(i)}),t.k0s()(),t.j41(5,"button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return i.page=i.page-1,t.Njj(i.query())}),t.EFF(6,"-1 & Q"),t.k0s(),t.j41(7,"button",6),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return i.page=i.page+1,t.Njj(i.query())}),t.EFF(8,"+1 & Q"),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(4),t.R50("ngModel",e.page)}}let Qn=(()=>{class n{constructor(e,o,i){this.dialog=e,this.javService=o,this._snackBar=i,this.page=1,this.cur_page=1,this.display_state={page:1,vft:"2"},this.query_result_list=[],this.preview_list=[],this.vftControl=new v.MJ("2")}query(){const e=this.page;this.alert(`start query genre = sub, page = ${e}`);const o=this.vftControl.value;this.javService.postJavdbList({requestBody:{vft:o,vst:"1",page:String(e)}}).subscribe(i=>{i.success?(this.display_state={page:e,vft:o},this.query_result_list=i.data.map(a=>({meta:a,removed:!1,added:!1}))):this.alert(`fetch vft=${o},vst=1,page=${e} failed`)},this.fastApiErrorHandler())}pornViewTransformer(e){const o=e.meta;return{type:mt.MP4,productId:o.product_id,name:o.title,alt:"",coverUrl:o.cover_url,releaseDate:o.date_str,director:"",href:"https://javdb.com/"+o.href,categories:[],actressList:[],fetching:!1}}AddPorn0(e){this.alert(`add ${e.meta.product_id}`),this.javService.postAdd({requestBody:{product_ids:[e.meta.product_id]}}).subscribe(o=>{o.success&&(e.added=!0),this.alert(o.message)},this.fastApiErrorHandler())}AddPorn1(e){this.alert(`add ${e.meta.product_id}`),this.javService.postAdd({requestBody:{product_ids:[e.meta.product_id]}}).subscribe(o=>{o.success&&(e.added=!0),this.alert(o.message)},this.fastApiErrorHandler())}preview(e){this.alert(`preview ${e.meta.product_id}`),this.javService.postDetail({requestBody:{engine:"javdb",url:e.meta.href}}).subscribe(o=>{this.alert(o.message),o.status&&this.preview_list.push({meta:o.data,removed:!1,added:!1})},this.fastApiErrorHandler())}fastApiErrorHandler(){return e=>{const o=e();console.error(o),this.alert(String(o))}}alert(e){this._snackBar.open(e,"",{duration:3e3})}gallery(e){this.dialog.open(ne,{data:{product_id:e.meta.product_id,gallery:e.meta.gallery}}).afterClosed().subscribe()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.bZ),t.rXU(dt),t.rXU(_t.UG))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-javdb-man"]],standalone:!0,features:[t.aNF],decls:37,vars:7,consts:[[2,"display","block","padding","0.5em"],[3,"formControl"],["value","1"],["value","2"],["appearance","fill"],["matInput","","placeholder","\u8f93\u5165\u9875\u6570","name","page",3,"ngModelChange","ngModel"],["mat-stroked-button","",3,"click"],["label","query result"],[2,"text-align","center"],[1,"movie-box"],["label","preview list"],[2,"display","block","padding","16px"],[3,"view"],["ngProjectAs","[buttons]",5,["","buttons",""]],["mat-button","",3,"click"],["appHrefExternalUrl","",3,"href"],["mat-button",""],["ngProjectAs","[extra]",5,["","extra",""]],["aria-label","Fish selection"],[1,"preview-item"],["width","360","priority","",3,"src"],[3,"href"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"javdb Newest with chinese subtitle"),t.k0s(),t.j41(3,"form")(4,"mat-button-toggle-group",1)(5,"mat-button-toggle",2),t.EFF(6,"\u542b\u78c1\u94fe"),t.k0s(),t.j41(7,"mat-button-toggle",3),t.EFF(8,"\u542b\u5b57\u5e55"),t.k0s()(),t.j41(9,"mat-form-field",4)(10,"mat-label"),t.EFF(11,"Page"),t.k0s(),t.j41(12,"input",5),t.mxI("ngModelChange",function(s){return t.DH7(i.page,s)||(i.page=s),s}),t.k0s()(),t.j41(13,"button",6),t.bIt("click",function(){return i.page=i.page-1}),t.EFF(14,"-"),t.k0s(),t.j41(15,"button",6),t.bIt("click",function(){return i.page=i.page-0+1}),t.EFF(16,"+"),t.k0s(),t.j41(17,"button",6),t.bIt("click",function(){return i.query()}),t.EFF(18,"\u67e5\u8be2"),t.k0s(),t.j41(19,"button",6),t.bIt("click",function(){return i.page=i.page-1,i.query()}),t.EFF(20," \u9875\u6570-1 \u5e76 \u67e5\u8be2 "),t.k0s(),t.j41(21,"button",6),t.bIt("click",function(){return i.page=i.page-0+1,i.query()}),t.EFF(22," \u9875\u6570+1 \u5e76 \u67e5\u8be2 "),t.k0s()()(),t.j41(23,"mat-tab-group")(24,"mat-tab",7)(25,"h1",8),t.EFF(26),t.k0s(),t.j41(27,"div",9),t.Z7z(28,ws,1,1,null,null,Kn),t.k0s(),t.j41(30,"h1",8),t.EFF(31),t.k0s()(),t.j41(32,"mat-tab",10)(33,"div",11),t.Z7z(34,As,1,1,null,null,Kn),t.k0s()()(),t.DNE(36,Os,9,1,"div",8)),2&o&&(t.R7$(4),t.Y8G("formControl",i.vftControl),t.R7$(8),t.R50("ngModel",i.page),t.R7$(14),t.Lme(" Display page=",i.display_state.page,", vft=",i.display_state.vft," "),t.R7$(2),t.Dyx(i.query_result_list),t.R7$(3),t.Lme(" Display page=",i.display_state.page,", vft=",i.display_state.vft," "),t.R7$(3),t.Dyx(i.preview_list),t.R7$(2),t.vxM(36,i.query_result_list.length>0?36:-1))},dependencies:[l.MD,v.YN,v.qT,v.me,v.BC,v.cb,v.vS,v.cV,v.X1,v.l_,N.RG,N.rl,N.nJ,J.fS,J.fg,w.Hl,w.$z,Bs,Yn,ke,g.RI,g.mq,g.T8,ct.YN,ct.Jl,ct.Jo,St,bt],styles:[".movie-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:center}"]})}return n})(),Gs=(()=>{class n{constructor(e,o,i){this.fastapiService=e,this.javService=o,this._snackBar=i}clearImages(){this.javService.postClearImages().subscribe(e=>{this.alert(`removed ${e.cnt} images`)})}debugTrigger(){this.fastapiService.postDebugTrigger().pipe((0,I.M)(()=>{this.alert("debug trigger clicked")})).subscribe(e=>{this.alert(`${e}`)})}alert(e){this._snackBar.open(e,"",{duration:3e3})}fastApiErrorHandler(){return e=>{const o=e();console.error(o),this.alert(String(o))}}fastapiEcho(){const e="heart!";this.fastapiService.echo({requestBody:{message:e}}).pipe((0,I.M)(o=>{o.message==e?this.alert("Echo success"):(console.log(o),this.alert("Echo Failed"))})).subscribe(()=>{},this.fastApiErrorHandler())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Uo),t.rXU(dt),t.rXU(_t.UG))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-porn-man-home"]],standalone:!0,features:[t.aNF],decls:24,vars:0,consts:[[2,"display","block","box-sizing","border-box","padding","2em"],["mat-raised-button","",3,"click"],["href","/api/v1/redoc"],["mat-raised-button",""],["href","/api/v1/docs"],["href","/api/v1/tamper/code.js"],["href","/#/recommend/porn/man/top3"],["href","/#/recommend/porn/man/javbus"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"button",1),t.bIt("click",function(){return i.clearImages()}),t.EFF(2,"Clear Images"),t.k0s(),t.j41(3,"button",1),t.bIt("click",function(){return i.debugTrigger()}),t.EFF(4,"Debug Trigger"),t.k0s(),t.j41(5,"a",2)(6,"button",3),t.EFF(7,"api redocly"),t.k0s()(),t.j41(8,"a",4)(9,"button",3),t.EFF(10,"api swagger docs"),t.k0s()(),t.j41(11,"button",1),t.bIt("click",function(){return i.fastapiEcho()}),t.EFF(12,"Echo FastApi Server"),t.k0s(),t.j41(13,"a",5)(14,"button",3),t.EFF(15,"tamper/code.js"),t.k0s()(),t.j41(16,"h2"),t.EFF(17,"\u5931\u6548"),t.k0s(),t.j41(18,"a",6)(19,"button",3),t.EFF(20,"porn/top3 (\u5f03\u7528)"),t.k0s()(),t.j41(21,"a",7)(22,"button",3),t.EFF(23,"porn/man/javbus (\u9700\u8981\u767b\u5f55\u9a8c\u8bc1,\u529f\u80fd\u5931\u6548)"),t.k0s()()())},dependencies:[l.MD,w.Hl,w.$z]})}return n})();function Ns(n,r){if(1&n){const e=t.RV6();t.j41(0,"app-video-block",11),t.qex(1,12),t.j41(2,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit;return t.Njj(i.removed=!0)}),t.EFF(3,"Remove"),t.k0s(),t.j41(4,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.AddPorn(i))}),t.EFF(5,"Add"),t.k0s(),t.j41(6,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.preview(i))}),t.EFF(7,"Preview"),t.k0s(),t.bVm(),t.eu8(8,14),t.k0s()}if(2&n){const e=t.XpG().$implicit,o=t.XpG();t.Y8G("view",o.pornViewTransformer(e))}}function Ls(n,r){if(1&n&&(t.qex(0),t.DNE(1,Ns,9,1,"app-video-block",10),t.bVm()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("ngIf",!e.added&&!e.removed)}}function Us(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.text)}}function qs(n,r){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.text)}}function Xs(n,r){if(1&n&&(t.qex(0),t.nrm(1,"img",16),t.bVm()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("src",e,t.B4B)}}function Hs(n,r){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",15)(2,"div"),t.EFF(3),t.k0s(),t.j41(4,"div"),t.EFF(5),t.k0s(),t.nrm(6,"img",16),t.j41(7,"div"),t.DNE(8,Us,2,1,"span",6),t.k0s(),t.j41(9,"div"),t.DNE(10,qs,2,1,"span",6),t.k0s(),t.j41(11,"div"),t.EFF(12),t.k0s(),t.j41(13,"div"),t.EFF(14),t.k0s(),t.j41(15,"div"),t.DNE(16,Xs,2,1,"ng-container",6),t.k0s(),t.j41(17,"button",3),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,a=t.XpG();return t.Njj(a.AddPorn(i))}),t.EFF(18,"Add"),t.k0s(),t.j41(19,"button",3),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit;return t.Njj(i.removed=!0)}),t.EFF(20," Remove "),t.k0s()(),t.bVm()}if(2&n){const e=t.XpG().$implicit;t.R7$(3),t.JRh(e.meta.product_id),t.R7$(2),t.JRh(e.meta.title),t.R7$(),t.Y8G("src",e.meta.cover_url,t.B4B),t.R7$(2),t.Y8G("ngForOf",e.meta.tags),t.R7$(2),t.Y8G("ngForOf",e.meta.artists),t.R7$(2),t.JRh(e.meta.director),t.R7$(2),t.JRh(e.meta.producers),t.R7$(2),t.Y8G("ngForOf",e.meta.sample_images)}}function zs(n,r){if(1&n&&(t.j41(0,"div"),t.DNE(1,Hs,21,8,"ng-container",9),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("ngIf",!e.added&&!e.removed)}}function Js(n,r){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",17)(2,"mat-form-field",1)(3,"mat-label"),t.EFF(4,"Page"),t.k0s(),t.j41(5,"input",2),t.mxI("ngModelChange",function(i){t.eBV(e);const a=t.XpG();return t.DH7(a.page,i)||(a.page=i),t.Njj(i)}),t.k0s()(),t.j41(6,"button",3),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return i.page=i.page-1,t.Njj(i.query())}),t.EFF(7," -1 & Q "),t.k0s(),t.j41(8,"button",3),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return i.page=i.page+1,t.Njj(i.query())}),t.EFF(9," +1 & Q "),t.k0s()(),t.bVm()}if(2&n){const e=t.XpG();t.R7$(5),t.R50("ngModel",e.page)}}let Zn=(()=>{class n{constructor(e,o,i){this.pornProviderService=e,this.javService=o,this._snackBar=i,this.page=1,this.query_result_list=[],this.preview_list=[]}query(){this.msg(`start query genre = sub, page = ${this.page}`),this.pornProviderService.javbus_genre({genre:"sub",page:String(this.page)}).pipe((0,I.M)(e=>{0==e.status?this.query_result_list=e.data.map(o=>({meta:o,removed:!1,added:!1})):this.msg(e.message)})).subscribe()}pornViewTransformer(e){const o=e.meta;return{type:mt.MP4,productId:o.product_id,name:o.title,alt:"",coverUrl:o.cover_url,releaseDate:o.date_str,director:"",href:o.href,categories:o.tags,actressList:[],fetching:!1}}msg(e){this._snackBar.open(e,"",{duration:3e3})}AddPorn(e){this.msg(`add ${e.meta.product_id}`),this.javService.postAdd({requestBody:{product_ids:[e.meta.product_id]}}).subscribe(o=>{e.added=!0,this.msg(o.message)})}preview(e){this.msg(`preview ${e.meta.product_id}`),this.pornProviderService.javbus_single(e.meta.href).subscribe(o=>{0==o.status?(this.msg(`preview ${e.meta.product_id} queryed`),this.preview_list.push({meta:o.data,removed:!1,added:!1})):this.msg(o.message)})}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(Ln),t.rXU(dt),t.rXU(_t.UG))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-javbus-man"]],standalone:!0,features:[t.aNF],decls:26,vars:4,consts:[[2,"display","block","padding","1em"],["appearance","fill"],["matInput","","placeholder","\u8f93\u5165\u9875\u6570","name","page",3,"ngModelChange","ngModel"],["mat-stroked-button","",3,"click"],["label","query result",1,"tab-content"],[1,"movie-box"],[4,"ngFor","ngForOf"],["label","preview list"],[2,"display","block","padding","16px"],[4,"ngIf"],[3,"view",4,"ngIf"],[3,"view"],["ngProjectAs","[buttons]",5,["","buttons",""]],["mat-button","",3,"click"],["ngProjectAs","[extra]",5,["","extra",""]],[1,"preview-item"],[3,"src"],[2,"text-align","center"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"h1"),t.EFF(2,"\u6709\u5b57\u5e55 /sub"),t.k0s(),t.j41(3,"form")(4,"mat-form-field",1)(5,"mat-label"),t.EFF(6,"Page"),t.k0s(),t.j41(7,"input",2),t.mxI("ngModelChange",function(s){return t.DH7(i.page,s)||(i.page=s),s}),t.k0s()(),t.j41(8,"button",3),t.bIt("click",function(){return i.page=i.page-1}),t.EFF(9,"-"),t.k0s(),t.j41(10,"button",3),t.bIt("click",function(){return i.page=i.page-0+1}),t.EFF(11,"+"),t.k0s(),t.j41(12,"button",3),t.bIt("click",function(){return i.query()}),t.EFF(13,"query"),t.k0s(),t.j41(14,"button",3),t.bIt("click",function(){return i.page=i.page-1,i.query()}),t.EFF(15," -1 & Q "),t.k0s(),t.j41(16,"button",3),t.bIt("click",function(){return i.page=i.page-0+1,i.query()}),t.EFF(17," +1 & Q "),t.k0s()()(),t.j41(18,"mat-tab-group")(19,"mat-tab",4)(20,"div",5),t.DNE(21,Ls,2,1,"ng-container",6),t.k0s()(),t.j41(22,"mat-tab",7)(23,"div",8),t.DNE(24,zs,2,1,"div",6),t.k0s()()(),t.DNE(25,Js,10,1,"ng-container",9)),2&o&&(t.R7$(7),t.R50("ngModel",i.page),t.R7$(14),t.Y8G("ngForOf",i.query_result_list),t.R7$(3),t.Y8G("ngForOf",i.preview_list),t.R7$(),t.Y8G("ngIf",i.query_result_list.length>0))},dependencies:[v.YN,v.qT,v.me,v.BC,v.cb,v.vS,v.cV,N.RG,N.rl,N.nJ,J.fS,J.fg,w.Hl,w.$z,g.RI,g.mq,g.T8,l.pM,l.bT,St],styles:[".movie-box[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;justify-content:center}"]})}return n})();class Ys{constructor(r){this.imdb=r,this.note_date="",this.reaction="",this.star=""}}class Ht{constructor(){}}var ot=h(6440);const Ks=()=>[10];function Qs(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1," IMDb "),t.k0s())}function Zs(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.imdb," ")}}function Ws(n,r){1&n&&(t.j41(0,"th",20),t.EFF(1," Cover "),t.k0s())}function tc(n,r){if(1&n&&(t.j41(0,"td",19)(1,"a",21),t.nrm(2,"img",22),t.k0s()()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("href",e.metadata.site_url,t.B4B),t.R7$(),t.Y8G("src",e.metadata.cover_url,t.B4B)}}function ec(n,r){1&n&&(t.j41(0,"th",20),t.EFF(1," Name "),t.k0s())}function nc(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.name," ")}}function ic(n,r){1&n&&(t.j41(0,"th",23),t.EFF(1," Star "),t.k0s())}function oc(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.custom.star," ")}}function rc(n,r){1&n&&(t.j41(0,"th",20),t.EFF(1," Reaction "),t.k0s())}function ac(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.custom.reaction," ")}}function sc(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1," Language "),t.k0s())}function cc(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.language," ")}}function lc(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1," Duration "),t.k0s())}function uc(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.duration," ")}}function dc(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1," Release"),t.k0s())}function pc(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.release_date," ")}}function mc(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1," LastEdit"),t.k0s())}function hc(n,r){if(1&n&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.custom.note_date," ")}}function _c(n,r){1&n&&(t.j41(0,"th",20),t.EFF(1," operation "),t.k0s())}function fc(n,r){if(1&n&&(t.j41(0,"td",19)(1,"a",24),t.EFF(2,"IMDb.com"),t.k0s()()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("href","https://www.imdb.com/title/"+e.metadata.imdb,t.B4B)}}function gc(n,r){1&n&&t.nrm(0,"tr",25)}function bc(n,r){1&n&&t.nrm(0,"tr",26)}let vc=(()=>{class n{constructor(e){this.http=e,this.movie_list=new F.I6([]),this.displayedColumns=["imdb","cover","name","star","reaction","language","duration","release","operation"],this.get_full_list()}ngAfterViewInit(){this.movie_list.paginator=this.paginator,this.movie_list.sort=this.sort,this.movie_list.sortingDataAccessor=(e,o)=>({imdb:e.metadata.imdb,star:e.custom.star,language:e.metadata.language,release:e.metadata.release_date,duration:e.metadata.duration,note_date:e.custom.note_date}[o])}post(e,o){return this.http.post(e,o)}get_full_list(){var e=this;this.log("get_full_list"),setTimeout((0,d.A)(function*(){const o=yield h.e(183).then(h.bind(h,9183));e.movie_list.data=o.STATIC_DB.map(i=>({metadata:i.metadata,custom:i.custom,frontstate:new Ht}))}),0),this.post("/api/recommend/movie/douban_movie_list",{}).subscribe(o=>{-1==o.status?this.log(`Error ${o.message}`):(this.log(`Success full_list len=${o.data.length}`),this.movie_list.data=o.data.map(i=>({metadata:i.metadata,custom:i.custom,frontstate:new Ht})))})}log(e){console.warn(e)}openimdb(){throw new Error("Method not implemented.")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(lt.Qq))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-main"]],viewQuery:function(o,i){if(1&o&&(t.GBs(ot.iy,5),t.GBs(X.B4,5)),2&o){let a;t.mGM(a=t.lsd())&&(i.paginator=a.first),t.mGM(a=t.lsd())&&(i.sort=a.first)}},standalone:!0,features:[t.aNF],decls:34,vars:5,consts:[["mat-table","","matSort","","matSortActive","star","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["matColumnDef","imdb"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cover"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","star"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by star",4,"matHeaderCellDef"],["matColumnDef","reaction"],["matColumnDef","language"],["matColumnDef","duration"],["matColumnDef","release"],["matColumnDef","note_date"],["matColumnDef","operation"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["appHrefExternalUrl","",3,"href"],[1,"table-cover-img",3,"src"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by star"],["mat-raised-button","","appHrefExternalUrl","",3,"href"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.j41(0,"table",0),t.qex(1,1),t.DNE(2,Qs,2,0,"th",2)(3,Zs,2,1,"td",3),t.bVm(),t.qex(4,4),t.DNE(5,Ws,2,0,"th",5)(6,tc,3,2,"td",3),t.bVm(),t.qex(7,6),t.DNE(8,ec,2,0,"th",5)(9,nc,2,1,"td",3),t.bVm(),t.qex(10,7),t.DNE(11,ic,2,0,"th",8)(12,oc,2,1,"td",3),t.bVm(),t.qex(13,9),t.DNE(14,rc,2,0,"th",5)(15,ac,2,1,"td",3),t.bVm(),t.qex(16,10),t.DNE(17,sc,2,0,"th",2)(18,cc,2,1,"td",3),t.bVm(),t.qex(19,11),t.DNE(20,lc,2,0,"th",2)(21,uc,2,1,"td",3),t.bVm(),t.qex(22,12),t.DNE(23,dc,2,0,"th",2)(24,pc,2,1,"td",3),t.bVm(),t.qex(25,13),t.DNE(26,mc,2,0,"th",2)(27,hc,2,1,"td",3),t.bVm(),t.qex(28,14),t.DNE(29,_c,2,0,"th",5)(30,fc,3,1,"td",3),t.bVm(),t.DNE(31,gc,1,0,"tr",15)(32,bc,1,0,"tr",16),t.k0s(),t.nrm(33,"mat-paginator",17)),2&o&&(t.Y8G("dataSource",i.movie_list),t.R7$(31),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(4,Ks)))},dependencies:[l.MD,w.Hl,w.It,F.tP,F.Zl,F.tL,F.ji,F.cC,F.YV,F.iL,F.KS,F.$R,F.YZ,F.NB,ot.Ou,ot.iy,X.NQ,X.B4,X.aE],styles:[".table-cover-img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}"]})}return n})();const Wn=()=>[10];function yc(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",6)(1,"a",36),t.nrm(2,"img",37),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.addMovie(i.href))}),t.EFF(4,"add"),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(),t.Y8G("href",e.href,t.B4B),t.R7$(),t.Y8G("src",e.img_src,t.B4B)}}function Cc(n,r){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e)}}function xc(n,r){1&n&&(t.j41(0,"th",38),t.EFF(1," IMDb "),t.k0s())}function Fc(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.imdb," ")}}function Ec(n,r){1&n&&(t.j41(0,"th",40),t.EFF(1," Cover "),t.k0s())}function Tc(n,r){if(1&n&&(t.j41(0,"td",39)(1,"a",36),t.nrm(2,"img",41),t.k0s()()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("href",e.metadata.site_url,t.B4B),t.R7$(),t.Y8G("src",e.metadata.cover_url,t.B4B)}}function Mc(n,r){1&n&&(t.j41(0,"th",40),t.EFF(1," Name "),t.k0s())}function Sc(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.name," ")}}function Rc(n,r){1&n&&(t.j41(0,"th",42),t.EFF(1," Star "),t.k0s())}function Bc(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.custom.star," ")}}function Pc(n,r){1&n&&(t.j41(0,"th",40),t.EFF(1," Reaction "),t.k0s())}function Dc(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.custom.reaction," ")}}function Ic(n,r){1&n&&(t.j41(0,"th",38),t.EFF(1," Language "),t.k0s())}function wc(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.language," ")}}function jc(n,r){1&n&&(t.j41(0,"th",38),t.EFF(1," Duration "),t.k0s())}function $c(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.duration," ")}}function Vc(n,r){1&n&&(t.j41(0,"th",38),t.EFF(1," Release"),t.k0s())}function Ac(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.metadata.release_date," ")}}function Oc(n,r){1&n&&(t.j41(0,"th",38),t.EFF(1," LastEdit"),t.k0s())}function Gc(n,r){if(1&n&&(t.j41(0,"td",39),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.custom.note_date," ")}}function Nc(n,r){1&n&&(t.j41(0,"th",40),t.EFF(1," operation "),t.k0s())}function Lc(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",39)(1,"button",4),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.edit(i))}),t.EFF(2,"Edit"),t.k0s(),t.j41(3,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.todo())}),t.EFF(4,"Delete"),t.k0s(),t.j41(5,"a",43),t.EFF(6,"IMDb.com"),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(5),t.Y8G("href","https://www.imdb.com/title/"+e.metadata.imdb,t.B4B)}}function Uc(n,r){1&n&&t.nrm(0,"tr",44)}function qc(n,r){1&n&&t.nrm(0,"tr",45)}const jt=n=>`/api/recommend/movie/${n}`;let Xc=(()=>{class n{ngAfterViewInit(){this.movie_list.paginator=this.paginator,this.movie_list.sort=this.sort,this.movie_list.sortingDataAccessor=(e,o)=>({imdb:e.metadata.imdb,star:e.custom.star,language:e.metadata.language,release:e.metadata.release_date,duration:e.metadata.duration,note_date:e.custom.note_date}[o])}constructor(e){this.http=e,this.text=new v.MJ(""),this.editForm=new v.gE({imdb:new v.MJ("",{nonNullable:!0,validators:[v.k0.required]}),star:new v.MJ("",{nonNullable:!0,validators:[v.k0.required]}),reaction:new v.MJ("",{nonNullable:!0,validators:[v.k0.required]})}),this.displayedColumns=["imdb","cover","name","star","reaction","language","duration","release","operation"],this.movie_list=new F.I6([]),this.search_result=[],this.logs=[],this.get_full_list()}post(e,o){return this.http.post(e,o)}log(e){this.logs.unshift(e)}addMovie(e){this.log(`add movie ${e} started`),this.post(jt("douban_add_movie"),{href:e}).subscribe(o=>{if(-1==o.status)this.log(`Error ${o.message}`);else{this.log(`Add Data Success ${JSON.stringify(o.data)}`);const i=this.movie_list.data.filter(a=>a.metadata.site_url==e);i.length>0?i[0].metadata=o.data:this.movie_list.data.push({metadata:o.data,custom:new Ys(o.data.imdb),frontstate:new Ht}),this.movie_list.data=[...this.movie_list.data]}})}searchText(){const e=this.text.value||"";this.log(`Search ${e} started`),this.post(jt("douban_search"),{text:e}).subscribe(o=>{-1==o.status?this.log(`Error ${o.message}`):(this.log(`Success search ${e}`),this.search_result=o.data)})}get_full_list(){this.log("get_full_list"),this.post(jt("douban_movie_list"),{}).subscribe(e=>{-1==e.status?this.log(`Error ${e.message}`):(this.log(`Success full_list len=${e.data.length}`),this.movie_list.data=e.data.map(o=>({metadata:o.metadata,custom:o.custom,frontstate:new Ht})))})}edit(e){this.editForm.patchValue({imdb:e.metadata.imdb,star:e.custom.star||"",reaction:e.custom.reaction||""})}onEditEnd(){this.log(`start update movie ${this.editForm.value.imdb} started`);const e=this.editForm.value.imdb||"";e&&this.post(jt("douban_custom_update"),{imdb:e,star:this.editForm.value.star||"",reaction:this.editForm.value.reaction||""}).subscribe(o=>{0==o.status?(this.log("update success"),this.movie_list.data.forEach(i=>{i.metadata.imdb==e&&(i.custom=o.data)}),this.editForm.patchValue({imdb:"",star:"",reaction:""})):this.log(`update failed:${o.message}`)})}gen_static_db(){this.log("start gen static db"),this.post(jt("douban_gen_static_db"),{}).subscribe(e=>{this.log(0===e.status?`genstatic db:${e.data.message}`:`genstatic db:${e.message}`)})}todo(){alert("TODO")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(lt.Qq))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-ctl"]],viewQuery:function(o,i){if(1&o&&(t.GBs(ot.iy,5),t.GBs(X.B4,5)),2&o){let a;t.mGM(a=t.lsd())&&(i.paginator=a.first),t.mGM(a=t.lsd())&&(i.sort=a.first)}},standalone:!0,features:[t.aNF],decls:72,vars:9,consts:[[1,"left-side"],[1,"top"],["for","text"],["id","text","type","text",3,"formControl"],["mat-raised-button","",3,"click"],[1,"movie-box"],[1,"item-box"],[1,"bottom"],[1,"right-side"],[1,"head"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-table","","matSort","","matSortActive","star","matSortDirection","desc","matSortDisableClear","",3,"dataSource"],["matColumnDef","imdb"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","cover"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","star"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by star",4,"matHeaderCellDef"],["matColumnDef","reaction"],["matColumnDef","language"],["matColumnDef","duration"],["matColumnDef","release"],["matColumnDef","note_date"],["matColumnDef","operation"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"ngSubmit","formGroup"],["for","imdb"],["id","imdb","readonly","","type","text","formControlName","imdb"],["for","star"],["id","star","type","text","formControlName","star"],["for","reaction"],["id","reaction","type","text","formControlName","reaction"],["mat-raised-button","","type","submit"],["appHrefExternalUrl","",3,"href"],[3,"src"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"table-cover-img",3,"src"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by star"],["mat-raised-button","","appHrefExternalUrl","",3,"href"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"label",2),t.EFF(3,"Search Text: "),t.k0s(),t.nrm(4,"input",3),t.j41(5,"button",4),t.bIt("click",function(){return i.searchText()}),t.EFF(6,"search"),t.k0s(),t.j41(7,"div",5),t.Z7z(8,yc,5,2,"div",6,t.Vm6),t.k0s()(),t.j41(10,"div",7)(11,"h2"),t.EFF(12,"logs"),t.k0s(),t.Z7z(13,Cc,2,1,"div",null,t.Vm6),t.k0s()(),t.j41(15,"div",8)(16,"div",1)(17,"div",9)(18,"button",4),t.bIt("click",function(){return i.get_full_list()}),t.EFF(19,"Manual refresh"),t.k0s(),t.j41(20,"button",4),t.bIt("click",function(){return i.gen_static_db()}),t.EFF(21,"Dump static json"),t.k0s()(),t.nrm(22,"mat-paginator",10),t.j41(23,"table",11),t.qex(24,12),t.DNE(25,xc,2,0,"th",13)(26,Fc,2,1,"td",14),t.bVm(),t.qex(27,15),t.DNE(28,Ec,2,0,"th",16)(29,Tc,3,2,"td",14),t.bVm(),t.qex(30,17),t.DNE(31,Mc,2,0,"th",16)(32,Sc,2,1,"td",14),t.bVm(),t.qex(33,18),t.DNE(34,Rc,2,0,"th",19)(35,Bc,2,1,"td",14),t.bVm(),t.qex(36,20),t.DNE(37,Pc,2,0,"th",16)(38,Dc,2,1,"td",14),t.bVm(),t.qex(39,21),t.DNE(40,Ic,2,0,"th",13)(41,wc,2,1,"td",14),t.bVm(),t.qex(42,22),t.DNE(43,jc,2,0,"th",13)(44,$c,2,1,"td",14),t.bVm(),t.qex(45,23),t.DNE(46,Vc,2,0,"th",13)(47,Ac,2,1,"td",14),t.bVm(),t.qex(48,24),t.DNE(49,Oc,2,0,"th",13)(50,Gc,2,1,"td",14),t.bVm(),t.qex(51,25),t.DNE(52,Nc,2,0,"th",16)(53,Lc,7,1,"td",14),t.bVm(),t.DNE(54,Uc,1,0,"tr",26)(55,qc,1,0,"tr",27),t.k0s(),t.nrm(56,"mat-paginator",10),t.k0s(),t.j41(57,"div",7)(58,"h2"),t.EFF(59,"Update"),t.k0s(),t.j41(60,"form",28),t.bIt("ngSubmit",function(){return i.onEditEnd()}),t.j41(61,"label",29),t.EFF(62,"IMDb: "),t.k0s(),t.nrm(63,"input",30),t.j41(64,"label",31),t.EFF(65,"Star: "),t.k0s(),t.nrm(66,"input",32),t.j41(67,"label",33),t.EFF(68,"reaction: "),t.k0s(),t.nrm(69,"textarea",34),t.j41(70,"button",35),t.EFF(71,"Submit"),t.k0s()()()()),2&o&&(t.R7$(4),t.Y8G("formControl",i.text),t.R7$(4),t.Dyx(i.search_result),t.R7$(5),t.Dyx(i.logs),t.R7$(9),t.Y8G("pageSizeOptions",t.lJ4(7,Wn)),t.R7$(),t.Y8G("dataSource",i.movie_list),t.R7$(31),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(),t.Y8G("pageSizeOptions",t.lJ4(8,Wn)),t.R7$(4),t.Y8G("formGroup",i.editForm))},dependencies:[l.MD,v.X1,v.qT,v.me,v.BC,v.cb,v.l_,v.j4,v.JD,w.Hl,w.It,w.$z,F.tP,F.Zl,F.tL,F.ji,F.cC,F.YV,F.iL,F.KS,F.$R,F.YZ,F.NB,ot.Ou,ot.iy,X.NQ,X.B4,X.aE],styles:["[_nghost-%COMP%]{display:flex;box-sizing:border-box;padding:1em}[_nghost-%COMP%]   .left-side[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}[_nghost-%COMP%]   .right-side[_ngcontent-%COMP%]{flex:3;display:flex;flex-direction:column}[_nghost-%COMP%]   .top[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{margin:1em}[_nghost-%COMP%]   .bottom[_ngcontent-%COMP%]{flex:1}.movie-box[_ngcontent-%COMP%]{display:block}.movie-box[_ngcontent-%COMP%]   .item-box[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.movie-box[_ngcontent-%COMP%]   .item-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px}.movie-info[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.movie-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px;max-height:200px}.table-cover-img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}"]})}return n})();const Hc=["input"],zc=["label"],Jc=["*"],Yc=new t.nKC("mat-checkbox-default-options",{providedIn:"root",factory:ti});function ti(){return{color:"accent",clickAction:"check-indeterminate"}}var Z=function(n){return n[n.Init=0]="Init",n[n.Checked=1]="Checked",n[n.Unchecked=2]="Unchecked",n[n.Indeterminate=3]="Indeterminate",n}(Z||{});const Kc={provide:v.kq,useExisting:(0,t.Rfq)(()=>ve),multi:!0};class Qc{}let Zc=0;const ei=ti();let ve=(()=>{class n{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){const o=new Qc;return o.source=this,o.checked=e,o}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,o,i,a,s,p){this._elementRef=e,this._changeDetectorRef=o,this._ngZone=i,this._animationMode=s,this._options=p,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new t.bkB,this.indeterminateChange=new t.bkB,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=Z.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||ei,this.color=this._options.color||ei.color,this.tabIndex=parseInt(a)||0,this.id=this._uniqueId="mat-mdc-checkbox-"+ ++Zc}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const o=e!=this._indeterminate;this._indeterminate=e,o&&(this._transitionCheckState(this._indeterminate?Z.Indeterminate:this.checked?Z.Checked:Z.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&!0!==e.value?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let o=this._currentCheckState,i=this._getAnimationTargetElement();if(o!==e&&i&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(o,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const a=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(a)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const e=this._options?.clickAction;this.disabled||"noop"===e?!this.disabled&&"noop"===e&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==e&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?Z.Checked:Z.Unchecked),this._emitChangeEvent())}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,o){if("NoopAnimations"===this._animationMode)return"";switch(e){case Z.Init:if(o===Z.Checked)return this._animationClasses.uncheckedToChecked;if(o==Z.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case Z.Unchecked:return o===Z.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case Z.Checked:return o===Z.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case Z.Indeterminate:return o===Z.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){const o=this._inputElement;o&&(o.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.aKT),t.rXU(t.gRc),t.rXU(t.SKi),t.kS0("tabindex"),t.rXU(t.bc$,8),t.rXU(Yc,8))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["mat-checkbox"]],viewQuery:function(o,i){if(1&o&&(t.GBs(Hc,5),t.GBs(zc,5),t.GBs(z.r6,5)),2&o){let a;t.mGM(a=t.lsd())&&(i._inputElement=a.first),t.mGM(a=t.lsd())&&(i._labelElement=a.first),t.mGM(a=t.lsd())&&(i.ripple=a.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:14,hostBindings:function(o,i){2&o&&(t.Mr5("id",i.id),t.BMQ("tabindex",null)("aria-label",null)("aria-labelledby",null),t.HbH(i.color?"mat-"+i.color:"mat-accent"),t.AVh("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked))},inputs:{ariaLabel:[t.Mj6.None,"aria-label","ariaLabel"],ariaLabelledby:[t.Mj6.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[t.Mj6.None,"aria-describedby","ariaDescribedby"],id:"id",required:[t.Mj6.HasDecoratorInputTransform,"required","required",t.L39],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[t.Mj6.HasDecoratorInputTransform,"disableRipple","disableRipple",t.L39],tabIndex:[t.Mj6.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>null==e?void 0:(0,t.Udg)(e)],color:"color",checked:[t.Mj6.HasDecoratorInputTransform,"checked","checked",t.L39],disabled:[t.Mj6.HasDecoratorInputTransform,"disabled","disabled",t.L39],indeterminate:[t.Mj6.HasDecoratorInputTransform,"indeterminate","indeterminate",t.L39]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[t.Jv_([Kc,{provide:v.cz,useExisting:n,multi:!0}]),t.GFd,t.OA$,t.aNF],ngContentSelectors:Jc,decls:15,vars:19,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(o,i){if(1&o){const a=t.RV6();t.NAR(),t.j41(0,"div",3),t.bIt("click",function(p){return t.eBV(a),t.Njj(i._preventBubblingFromLabel(p))}),t.j41(1,"div",4,0)(3,"div",5),t.bIt("click",function(){return t.eBV(a),t.Njj(i._onTouchTargetClick())}),t.k0s(),t.j41(4,"input",6,1),t.bIt("blur",function(){return t.eBV(a),t.Njj(i._onBlur())})("click",function(){return t.eBV(a),t.Njj(i._onInputClick())})("change",function(p){return t.eBV(a),t.Njj(i._onInteractionEvent(p))}),t.k0s(),t.nrm(6,"div",7),t.j41(7,"div",8),t.qSk(),t.j41(8,"svg",9),t.nrm(9,"path",10),t.k0s(),t.joV(),t.nrm(10,"div",11),t.k0s(),t.nrm(11,"div",12),t.k0s(),t.j41(12,"label",13,2),t.SdG(14),t.k0s()()}if(2&o){const a=t.sdS(2);t.Y8G("labelPosition",i.labelPosition),t.R7$(4),t.AVh("mdc-checkbox--selected",i.checked),t.Y8G("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled)("id",i.inputId)("required",i.required)("tabIndex",i.disabled?-1:i.tabIndex),t.BMQ("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-checked",i.indeterminate?"mixed":null)("name",i.name)("value",i.value),t.R7$(7),t.Y8G("matRippleTrigger",a)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),t.R7$(),t.Y8G("for",i.inputId)}},dependencies:[z.r6,z.tO],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})(),el=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[ve,z.yE,z.yE]})}return n})();var ni=h(2350);let nl=(()=>{class n{constructor(e,o){this.dialogRef=e,this.cfg=o}onNoClick(){this.dialogRef.close()}okNew(){throw new Error("Method not implemented.")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.CP),t.rXU(j.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-magnet-dialog"]],standalone:!0,features:[t.aNF],decls:36,vars:9,consts:[[1,"head"],[1,"example-form"],[1,"example-full-width"],["matInput","","placeholder","\u5173\u952e\u5b57 \u5fc5\u586b","name","id_str",3,"ngModelChange","ngModel"],["matInput","","placeholder","\u6807\u9898","name","title",3,"ngModelChange","ngModel"],["matInput","","placeholder","\u78c1\u529b\u94fe\u63a5","name","magnet",3,"ngModelChange","ngModel"],["matInput","","placeholder","yyyy-mm-dd","name","release_date",3,"ngModelChange","ngModel"],["matInput","","placeholder","https://... jpg","name","cover_url",3,"ngModelChange","ngModel"],["matInput","","placeholder","size_text","name","size_text",3,"ngModelChange","ngModel"],[3,"selectedTagsChange","existTags","selectedTags"],[1,"actions"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1,"\u4fee\u6539/\u65b0\u589e magnet"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"id_str (\u66f4\u6539id_str \u4f1a\u4ea7\u751f\u65b0\u6761\u76ee)"),t.k0s(),t.j41(7,"input",3),t.mxI("ngModelChange",function(s){return t.DH7(i.cfg.data.id_str,s)||(i.cfg.data.id_str=s),s}),t.k0s()(),t.j41(8,"mat-form-field",2)(9,"mat-label"),t.EFF(10,"title"),t.k0s(),t.j41(11,"input",4),t.mxI("ngModelChange",function(s){return t.DH7(i.cfg.data.title,s)||(i.cfg.data.title=s),s}),t.k0s()(),t.j41(12,"mat-form-field",2)(13,"mat-label"),t.EFF(14,"magnet"),t.k0s(),t.j41(15,"input",5),t.mxI("ngModelChange",function(s){return t.DH7(i.cfg.data.magnet,s)||(i.cfg.data.magnet=s),s}),t.k0s()(),t.j41(16,"mat-form-field",2)(17,"mat-label"),t.EFF(18,"release_date"),t.k0s(),t.j41(19,"input",6),t.mxI("ngModelChange",function(s){return t.DH7(i.cfg.data.release_date,s)||(i.cfg.data.release_date=s),s}),t.k0s()(),t.j41(20,"mat-form-field",2)(21,"mat-label"),t.EFF(22,"cover_url"),t.k0s(),t.j41(23,"input",7),t.mxI("ngModelChange",function(s){return t.DH7(i.cfg.data.cover_url,s)||(i.cfg.data.cover_url=s),s}),t.k0s()(),t.j41(24,"mat-form-field",2)(25,"mat-label"),t.EFF(26,"size_text"),t.k0s(),t.j41(27,"input",8),t.mxI("ngModelChange",function(s){return t.DH7(i.cfg.data.size_text,s)||(i.cfg.data.size_text=s),s}),t.k0s()(),t.j41(28,"cm-mat-chips-input",9),t.mxI("selectedTagsChange",function(s){return t.DH7(i.cfg.data.tags,s)||(i.cfg.data.tags=s),s}),t.k0s()()(),t.j41(29,"mat-dialog-actions",10)(30,"button",11),t.bIt("click",function(){return i.onNoClick()}),t.EFF(31,"Cancel"),t.k0s(),t.j41(32,"button",12),t.EFF(33,"Ok"),t.k0s(),t.j41(34,"button",11),t.bIt("click",function(){return i.okNew()}),t.EFF(35,"Ok wait send"),t.k0s()()),2&o&&(t.R7$(7),t.R50("ngModel",i.cfg.data.id_str),t.R7$(4),t.R50("ngModel",i.cfg.data.title),t.R7$(4),t.R50("ngModel",i.cfg.data.magnet),t.R7$(4),t.R50("ngModel",i.cfg.data.release_date),t.R7$(4),t.R50("ngModel",i.cfg.data.cover_url),t.R7$(4),t.R50("ngModel",i.cfg.data.size_text),t.R7$(),t.Y8G("existTags",i.cfg.existTags),t.R50("selectedTags",i.cfg.data.tags),t.R7$(4),t.Y8G("mat-dialog-close",i.cfg.data))},dependencies:[N.RG,N.rl,N.nJ,J.fS,J.fg,v.YN,v.qT,v.me,v.BC,v.cb,v.vS,v.cV,w.Hl,w.$z,j.Yi,j.E7,j.tx,st.m_,v.X1,ni.jI],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.head[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{box-sizing:border-box;padding:20px 24px}"]})}return n})();class ii{constructor(){this.id_str="",this.title="",this.magnet="",this.release_date="",this.tags=[],this.add_date="",this.cover_url="",this.size_text=""}}class ye{constructor(){this.id_str="",this.star=0,this.comments="",this.comments_date=""}}function gt(n){return{front:{picked:!1},back:n}}var oi=h(850);function ol(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-form-field",2)(1,"mat-label"),t.EFF(2,"comments date"),t.k0s(),t.j41(3,"input",9),t.mxI("ngModelChange",function(i){t.eBV(e);const a=t.XpG();return t.DH7(a.data.comments_date,i)||(a.data.comments_date=i),t.Njj(i)}),t.k0s()()}if(2&n){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.data.comments_date)}}let rl=(()=>{class n{constructor(e,o){this.dialogRef=e,this.data=o,this.tagCtrl=new v.MJ("")}onNoClick(){this.dialogRef.close()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(j.CP),t.rXU(j.Vh))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-magnet-custom-dialog"]],standalone:!0,features:[t.aNF],decls:22,vars:5,consts:[[1,"head"],[1,"example-form"],[1,"example-full-width"],["matInput","","placeholder","\u5173\u952e\u5b57 \u5fc5\u586b","readonly","","name","id_str",3,"ngModelChange","ngModel"],["matInput","","placeholder","\u6253\u5206","name","star",3,"ngModelChange","ngModel"],["matInput","","placeholder","\u8bc4\u8bba","name","comments",3,"ngModelChange","ngModel"],[1,"actions"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["matInput","","placeholder","YYYY-MM-DD","readonly","","name","comments_date",3,"ngModelChange","ngModel"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1,"\u4fee\u6539 magnet custom"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"id_str"),t.k0s(),t.j41(7,"input",3),t.mxI("ngModelChange",function(s){return t.DH7(i.data.id_str,s)||(i.data.id_str=s),s}),t.k0s()(),t.DNE(8,ol,4,1,"mat-form-field",2),t.j41(9,"mat-form-field",2)(10,"mat-label"),t.EFF(11,"star"),t.k0s(),t.j41(12,"input",4),t.mxI("ngModelChange",function(s){return t.DH7(i.data.star,s)||(i.data.star=s),s}),t.k0s()(),t.j41(13,"mat-form-field",2)(14,"mat-label"),t.EFF(15,"\u8bc4\u8bba"),t.k0s(),t.j41(16,"textarea",5),t.mxI("ngModelChange",function(s){return t.DH7(i.data.comments,s)||(i.data.comments=s),s}),t.k0s()()()(),t.j41(17,"mat-dialog-actions",6)(18,"button",7),t.bIt("click",function(){return i.onNoClick()}),t.EFF(19,"Cancel"),t.k0s(),t.j41(20,"button",8),t.EFF(21,"Ok"),t.k0s()()),2&o&&(t.R7$(7),t.R50("ngModel",i.data.id_str),t.R7$(),t.vxM(8,i.data.comments_date?8:-1),t.R7$(4),t.R50("ngModel",i.data.star),t.R7$(4),t.R50("ngModel",i.data.comments),t.R7$(4),t.Y8G("mat-dialog-close",i.data))},dependencies:[l.MD,N.RG,N.rl,N.nJ,J.fS,J.fg,v.YN,v.qT,v.me,v.BC,v.cb,v.vS,v.cV,w.Hl,w.$z,j.Yi,j.E7,j.tx,oi.jL,v.X1],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.head[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]{box-sizing:border-box;padding:20px 24px}"]})}return n})(),al=(()=>{class n{transform(e){return typeof e>"u"?"":new Date(1e3*e).toISOString()}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.EJ8({name:"timestampPipe",type:n,pure:!0,standalone:!0})}return n})(),sl=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-todo-and-done"]],standalone:!0,features:[t.aNF],decls:6,vars:0,template:function(o,i){1&o&&(t.j41(0,"pre"),t.EFF(1,"1. husky + \u81ea\u52a8 git commit\u524d \u505a\u683c\u5f0f\u5316?\n1. add log \u9875\u9762\n1. add websocket \u6d88\u606f\n1. tags \u6765\u6e90 db \u4e0d\u8981\u7eaf\u9759\u6001\n1. javdb top250 \u8bc6\u522b\n1. \u52a8\u6001 TODO page\n1. \u5bf9\u4e8e refetch\u5b9e\u73b0 \u975e\u7a7a\u4e0d\u8986\u76d6??? \u5982\u4f55\u5b9e\u73b0\u5bf9\u52a8\u6001\u5b57\u6bb5\u53d8\u5316\u7684 \u4ee3\u7801\u7ef4\u62a4\u652f\u6301?\n1. \u6279\u91cf\u9009\u62e9 + magnet \u5230\u526a\u8d34\u677f\n1. \u652f\u6301\u4e0d\u540c\u5f15\u64ce \u662f\u5426\u8d70proxy\u53ef\u9009\n1. javdb \u652f\u6301 subtitle cat\u7684\u5b57\u5e55\u8df3\u8f6c\n1. javdb \u641c\u7d22\n1. \u6587\u672c\u5206\u4eab page\n1. account and auth\n1. magnet 2 torrent with update trackerslist\n1. mock\u529f\u80fd\n1. \u4e8c\u8fdb\u5236 paginator\n1. i18n ?\n1. \u589e\u52a0\u5f15\u64ce ja.javhub.net / freejavbt\n1. \u4f7f\u7528 SQLModel, https://sqlmodel.tiangolo.com/\n1. \u589e\u52a0 \u81ea\u5b9a\u4e49\u7684 \u989d\u5916\u7684 tags\n1. \u5b9e\u73b0\u6f14\u5458page\n1. \u5b9e\u73b0 \u91d1\u9e21\u513f\u5956 (\u7eafjs)\u7684 video preview https://jinjier.art/search?q=DVMM-076\n1. \u5b9e\u73b0\u591a\u6e90 \u56fe\u7247 \u901a\u8fc7index \u5b8c\u6210\u7b80\u5355\u7684\u56fe\u7247\u6e90 \u52a0\u8f7d\u4f18\u5316?\n1. \u4ecersshub\u5b66\u4e60 \u5904\u7406 cloudflare\u7684\u65b9\u6cd5\n1. \u83b7\u53d6 \u8bc4\u8bba preview \u5b9e\u73b0\n1. \u4e0d\u518d\u5220\u9664meta,\u4fee\u6539 \u76f8\u5173\u903b\u8f91\uff0c\u5c55\u793a\u548c\u8f93\u51fa \u662f\u6839\u636e star >=0 \u76f8\u5173\u7684\u6765\u5b8c\u6210? \u56fe\u7247\u7684\u5220\u9664\u4e5f\u662f\u548cstar \u548c 0\u6bd4\u5927\u5c0f \u76f8\u5173\n1. \u591a\u4e2aapi\u7ec6\u7c92\u5ea6\uff0c\u5148\u6539server \u80fd\u8fd4\u56de\u5c40\u90e8\u7ed3\u679c, \u51cf\u5c11\u5b8c\u6574\u5217\u8868\u83b7\u53d6\u6b21\u6570\n1. protobuf \u5b8c\u5168\u79fb\u9664\n1. \u91cd\u590dWarning move to backend\n1. ordered_filter \u987a\u5e8f\u4e5f\u8fdb\u5165 params \u6216\u8005 localstorage?\n1. \u65e0meta\u7684\u672c\u5730\u6587\u4ef6 \u505a\u524d\u7aef\u5757\n1. meta \u66f4\u65b0\u529f\u80fd \u4e0d\u53ea\u662frelease_date\n\n2. \u8fc5\u96f7\u8c03\u7528 win32com.client Dispatch\n2. sortedkey \u652f\u6301 \u987a\u5e8f \u4e0eparam, \u4e0e asc desc\n2. ng17\u5347\u7ea7\u5230ng18?\n2. \u589e\u52a0\u989d\u5916\u7684jav\u641c\u7d22\u5f15\u64ce\n2. \u589e\u52a0\u78c1\u529bmagnet\u641c\u7d22\u5f15\u64ce\n2. \u548c\u73b0\u6709 porn \u5173\u8054\u5b9e\u73b0 ? how design, Jav\u7c7b\u578btitle/cover_url\u4ecedb.metadata\u83b7\u53d6? more?\n2. \u89e3\u51b3Fastapi\u751f\u6210\u7684service\u7684\u8bbe\u8ba1\u4e0d\u591fnested\u7684\u95ee\u9898\n2. \u589e\u52a0\u591a\u4e2a\u7ef4\u5ea6\u7684STAR? \u5267\u60c5\uff0c\u5b9e\u7528\u5ea6?\n2. jellyfin \u4e0a\u627e\u4e00\u4e0b\u7075\u611f\n2. \u5fc5\u586b \u8f93\u5165\u6846 \u6837\u5f0f\uff0c\u987a\u5e8f\uff0c\u63d0\u793a\n2. \u70b9ok\u65f6,\u5148\u63d0\u4ea4,\u6210\u529f\u518d\u5173\u95eddialog\n?. category \u66ff\u6362\u73b0\u5728tag\u89e3\u51b3\u5206\u6e90\u7684\u7c7b\uff0c\u65b0\u589etag\u505a\u4e3a\u5185\u5bb9\u6807\u793a\n  "),t.k0s(),t.j41(2,"h2"),t.EFF(3,"\u5df2\u5b8c\u6210"),t.k0s(),t.j41(4,"pre"),t.EFF(5,"1. [2024-10-17]\n      \u5b9e\u73b0\u7c7b\u4f3cmissav\u7684\u90e8\u5206seek\u529f\u80fd, \u901f\u5ea6\u6162\n      libtorrent\u8fd8\u4e0d\u652f\u6301py3.11 hatch\u914d\u7f6e\u6539\u6210 py3.10\n\n1. [2024-08-30]\n      \u5b8c\u6210 yyyy-mm-dd \u65e5\u671f\u9009\u62e9\u53cc\u5411\u7ed1\u5b9a\u7ec4\u4ef6\n      \u5206\u79bb2\u4e2a\u7ec4\u4ef6 \u5230ng lib\n\n1. [2024-08-28]\n      fastapi openapi-ts \u7684 \u51fd\u6570\u540d\uff0ctags\u7684\u8bbe\u8ba1 \u91cd\u5199\uff0c\u90e8\u5206\u4e34\u65f6\u89e3\u51b3\u4f9d\u7136\u6709\u6f5c\u5728\u95ee\u9898 https://github.com/orgs/hey-api/discussions/988\n      javmeta \u6240\u6709string\u5b57\u6bb5\u7684\u66f4\u65b0 \u90e8\u5206ui\u652f\u6301\n      routing\u4e2d\u914d\u7f6e\u9875\u9762title\n1. [2024-08-27]\n      \u5355\u72ec todo and done \u7684\u9875\u9762\n      \u66f4\u65b0fc2ppvdb core, \u589e\u52a0tamper\u9875\u9762\u89e3\u6790\u4f20\u9012, tamper \u7684\u4ee3\u7801\u53ef\u4ee5\u76f4\u63a5\u9875\u9762\u83b7\u53d6\n      \u8bc4\u8bba\u652f\u6301\u9875\u9762\u5c55\u793a\u65f6 \\n \u6362\u884c\n      \u589e\u5927prompt\u6846\n      \u66f4\u65b0yarn.lock\n1. [2024-08-19]\n      porn\n        fix cover_img database\u91cc\u5b8c\u5168\u5f03\u7528\u8be5\u5b57\u6bb5\n        fix pyproject/hatch \u4f9d\u8d56\u5199\u6cd5\n        \u5b9e\u73b0\u65b0\u7684 smart cut\n        \u589e\u52a0 smart cut unit test\n        javdb title\u6e05\u9664 \u5199\u771f\u9644\u8d60 \u540e\u7f00\n1. [2024-08-14]\n      porn\n        \u91cd\u4e0b\u56fe\u7247\u529f\u80fd\n        \u589e\u52a0tampermonkey\u548cjavbus\n        magnet \u6279\u91cf\u9009\u62e9 + tags\u589e\u52a0\n        javdb \u7684tags\u5220\u6389 \u201c\u7121\u78bc\u7834\u89e3\u201d\n        static\u6587\u4ef6\u7684\u751f\u6210\u65f6\u95f4 \u5c55\u793a\u5728\u9875\u9762\n        refetch \u6307\u5b9aengine\n1. [2024-08-07]\n      porn\n        fix bug, javmenu\u8865\u5168url\n        \u53ef\u5217\u51fa\u975e\u4e2d\u5b57\u6700\u8fd1\u4e0a\u67b6\n        javdb \u6700\u65b0porn\u589e\u52a0\u662f\u5426\u4e2d\u5b57\u5b57\u6bb5\n        custom\u4e2d0star\u7684\u5217\u8868, /porn/0\n        javdb en \u89e3\u6790\u652f\u6301\n        javdb \u589e\u52a0\u5b57\u6bb5\u652f\u6301\n        javmenu ja \u89e3\u6790\u652f\u6301\n1. [2024-08-01]\n      porn\n        database metadata\u8868\u589e\u52a0\u591a\u4e2a\u5b57\u6bb5\n        \u66f4\u65b0javmenu\u4f9d\u8d56\u548c\u5b57\u6bb5\n        \u91cd\u65b0\u83b7\u53d6\u53ea\u5237\u65b0\u5355\u4e2a\u6570\u636e\n        avsox \u65e0relase_date => 9999-01-01\n        avsox site\u907f\u514d\u4e8c\u6b21\u83b7\u53d6\n        javmenu \u4f5c\u4e3a\u9ed8\u8ba4\u641c\u7d22\u5f15\u64ce\n        \u4f7f\u7528\u65b0\u5f15\u64ce \u66ff\u6362\u90e8\u5206javbusdata\u7684\u6570\u636e\n1. [2024-07-31]\n      porn\n        fc2ppvdb.com \u652f\u6301\n        backend dockerfile \u652f\u6301\u591a\u4e2aindexurl\n        \u9759\u6001\u6587\u4ef6\u4e0d\u751f\u62101\u661f\u548c\u4ee5\u4e0b\u7684\n        fix battle ui\n        android vlc\u8df3\u8f6c\n        magnet cilisousuo \u652f\u6301\u67e5\u770bmagent\u4e0d\u6dfb\u52a0\u5230database + timed cache\n        \u591a\u4e2a window.prompt \u6362 \u5f39\u51fa\u6846\n1. [2024-07-23]\n      porn\n        magnet\n          \u5b8c\u6210torrents\u4e0a\u4f20\u5206\u6790\u5165\u6570\u636e\u5e93\u529f\u80fd\n          \u652f\u6301torrents\u641c\u7d22\u8df3\u8f6c\n1. [2024-07-20]\n      porn\n        \u672c\u5730\u652f\u6301 data_type filter \u66f4\u65b0\u5386\u53f2\u7684data_type (source_type)\n        \u6587\u4ef6\u5bf9\u4e8e \u5206part\u7684\u5220\u9664\u652f\u6301 \u903b\u8f91\u66f4\u6539, \u5bf9srt\u7684\u5173\u8054\u5220\u9664\u652f\u6301\u90e8\u5206\u5931\u6548\n        man/magnet/list\n          star/tags/add_date \u589e\u52a0sort\n1. [2024-07-15]\n      man/magnet/list tags \u8fc7\u6ee4\n      man/magnet/list \u8bc4\u8bba\u533a\n      njav.tv \u641c\u7d22\u8df3\u8f6c\n1. [2024-07-12] \u79fb\u52a8/\u5220\u9664\u6587\u4ef6\u65f6 \u5982\u679c\u6709\u540c\u540dsrt\u540c\u65f6\u5220\u9664\u540c\u540dsrt\n1. [2024-07-11] porn/man/magnet \u589e\u52a0 queryparams \u548ctab\u5173\u8054, porn\u7684querymagnet\u80fd\u76f4\u63a5\u8df3\u9875\u9762+tab\n1. [2024-07] porn/man/magnet?tab=list \u589e\u52a0 id_str,title,comments,magnet \u7684filter\n1. [2024-07 \u4e4b\u524d]\n  1. star\n  1. comments\n  1. auto-params\n  1. local folder viewer\n  1. local file control (move rename)\n  1. lucky button\n  1. vs button\n  1. missav/javmost/javlibrary jump button\n  1. gallery\n  1. thumbnails(with opencv) [outdated]\n  1. sortable filter\n  1. r18 spider [outdated]\n  1. javbus spider [outdated]\n  1. javdb spider\n  1. avsox spider\n  1. magnet (cilisousuo.com spider)\n  1. fc2\u652f\u6301(msin spider)\n  1. json -> sqlitedb\n  1. static website json db\n  1. name smart cut\n  1. \u6838\u5fc3spider\u5206\u79bb\n"),t.k0s())}})}return n})();const cl=(n,r)=>r.b.tmp_name,ll=(n,r)=>r.path,ul=(n,r)=>r.key,dl=()=>[10,25];function pl(n,r){if(1&n&&(t.j41(0,"pre"),t.EFF(1),t.nI1(2,"sizePipe"),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Lme("",e.name," (",t.bMT(2,2,e.size),")")}}function ml(n,r){if(1&n&&(t.j41(0,"div")(1,"div",45),t.EFF(2),t.nI1(3,"sizePipe"),t.k0s(),t.EFF(4),t.k0s()),2&n){const e=r.$implicit;t.R7$(2),t.JRh(t.bMT(3,2,e.size)),t.R7$(2),t.SpI(" ",e.path," ")}}function hl(n,r){if(1&n&&(t.j41(0,"div"),t.Z7z(1,ml,5,4,"div",null,ll),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.Dyx(null==e.b.meta?null:e.b.meta.files)}}function _l(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",10)(1,"pre"),t.EFF(2),t.k0s(),t.j41(3,"pre"),t.EFF(4),t.k0s(),t.j41(5,"pre"),t.EFF(6),t.k0s(),t.j41(7,"pre"),t.EFF(8),t.k0s(),t.j41(9,"pre"),t.EFF(10),t.k0s(),t.j41(11,"pre"),t.EFF(12),t.nI1(13,"sizePipe"),t.k0s(),t.j41(14,"pre"),t.EFF(15),t.nI1(16,"timestampPipe"),t.k0s(),t.j41(17,"pre"),t.EFF(18),t.k0s(),t.j41(19,"pre"),t.EFF(20),t.k0s(),t.j41(21,"pre"),t.EFF(22),t.k0s(),t.j41(23,"div")(24,"mat-form-field",40)(25,"mat-label"),t.EFF(26,"id_str"),t.k0s(),t.j41(27,"input",44,3),t.bIt("keyup",function(){const i=t.eBV(e).$implicit,a=t.sdS(28);return t.Njj(i.f.id_str=a.value)}),t.k0s()(),t.j41(29,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.add_to_database(i))}),t.EFF(30," Add to database "),t.k0s()(),t.j41(31,"div")(32,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.ignore_torrent(i))}),t.EFF(33," \u5ffd\u7565 "),t.k0s()(),t.j41(34,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit;return t.Njj(i.f.show_detail=!i.f.show_detail)}),t.EFF(35," Detail switch "),t.k0s(),t.DNE(36,hl,3,0,"div"),t.k0s()}if(2&n){const e=r.$implicit;t.R7$(2),t.SpI("id_str :",e.f.id_str,""),t.R7$(2),t.SpI("src    :",e.b.src,""),t.R7$(2),t.SpI("tmp    :",e.b.tmp_name,""),t.R7$(2),t.SpI("name   :",null==e.b.meta?null:e.b.meta.name,""),t.R7$(2),t.SpI("magnet :",null==e.b.meta?null:e.b.meta.info_hash,""),t.R7$(2),t.SpI("size   :",t.bMT(13,12,null==e.b.meta?null:e.b.meta.total_size),""),t.R7$(3),t.Lme("date   :",t.bMT(16,14,null==e.b.meta?null:e.b.meta.creation_date)," (",null==e.b.meta?null:e.b.meta.creation_date,")"),t.R7$(3),t.SpI("creator:",null==e.b.meta?null:e.b.meta.creator,""),t.R7$(2),t.SpI("comment:",null==e.b.meta?null:e.b.meta.comment,""),t.R7$(2),t.SpI("files  :",null==e.b.meta?null:e.b.meta.num_files,""),t.R7$(14),t.vxM(36,e.f.show_detail?36:-1)}}function fl(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",46)(1,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.pickAllFiltered())}),t.EFF(2," pick "),t.k0s(),t.j41(3,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.unpickAllFiltered())}),t.EFF(4," unpick "),t.k0s()()}}function gl(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",47)(1,"mat-checkbox",48),t.bIt("click",function(i){return t.eBV(e),t.Njj(i.stopPropagation())})("change",function(i){const a=t.eBV(e).$implicit,s=t.XpG();return t.Njj(i?s.selection.toggle(a):null)}),t.k0s()()}if(2&n){const e=r.$implicit,o=t.XpG();t.R7$(),t.Y8G("checked",o.selection.isSelected(e))("aria-label",o.checkboxLabel(e))}}function bl(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",46)(1,"div")(2,"div",49),t.EFF(3," id_str "),t.k0s(),t.j41(4,"mat-form-field",50)(5,"mat-label"),t.EFF(6,"id_str"),t.k0s(),t.j41(7,"input",44),t.bIt("keyup",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilter("id_str",i))}),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("mat-sort-header",e.TABLE_COL.id_str)}}function kl(n,r){if(1&n&&t.nrm(0,"img",52),2&n){const e=t.XpG().$implicit;t.Y8G("src",e.back.meta.cover_url,t.B4B)}}function vl(n,r){if(1&n&&(t.j41(0,"td",47)(1,"div",51),t.EFF(2),t.DNE(3,kl,1,1,"img",52),t.k0s()()),2&n){const e=r.$implicit;t.R7$(2),t.SpI(" ",e.back.meta.id_str," "),t.R7$(),t.vxM(3,e.back.meta.cover_url?3:-1)}}function yl(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",46)(1,"div")(2,"div",53),t.EFF(3,"Title"),t.k0s(),t.j41(4,"mat-form-field",50)(5,"mat-label"),t.EFF(6,"Title"),t.k0s(),t.j41(7,"input",54),t.bIt("keyup",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilter("title",i))}),t.k0s()()()()}}function Cl(n,r){if(1&n&&(t.j41(0,"td",47),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.back.meta.title)}}function xl(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",46)(1,"div")(2,"div",53),t.EFF(3,"Magnet"),t.k0s(),t.j41(4,"mat-form-field",50)(5,"mat-label"),t.EFF(6,"Magnet"),t.k0s(),t.j41(7,"input",55),t.bIt("keyup",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilter("magnet",i))}),t.k0s()()()()}}function Fl(n,r){if(1&n&&(t.j41(0,"td",47)(1,"a",56),t.EFF(2),t.k0s()()),2&n){const e=r.$implicit;t.R7$(),t.Y8G("href","magnet:?xt=urn:btih:"+e.back.meta.magnet,t.B4B),t.R7$(),t.SpI(" ",e.back.meta.magnet," ")}}function El(n,r){if(1&n&&(t.j41(0,"th",57),t.EFF(1,"star"),t.k0s()),2&n){const e=t.XpG();t.Y8G("mat-sort-header",e.TABLE_COL.star)}}function Tl(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",47)(1,"div",58)(2,"button",59),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateStar(i.back.custom,-1))}),t.EFF(3," - "),t.k0s(),t.EFF(4),t.j41(5,"button",59),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateStar(i.back.custom,1))}),t.EFF(6," + "),t.k0s()()()}if(2&n){const e=r.$implicit;t.R7$(4),t.SpI(" ",e.back.custom.star||0," ")}}function Ml(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",46)(1,"div")(2,"div",53),t.EFF(3," comments "),t.k0s(),t.j41(4,"mat-form-field",50)(5,"mat-label"),t.EFF(6,"comments"),t.k0s(),t.j41(7,"input",55),t.bIt("keyup",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilter("comments",i))}),t.k0s()()()()}}function Sl(n,r){if(1&n&&(t.j41(0,"td",47),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.back.custom.comments," ")}}function Rl(n,r){1&n&&(t.j41(0,"mat-icon",62),t.EFF(1,"Check"),t.k0s())}function Bl(n,r){1&n&&(t.j41(0,"mat-icon",63),t.EFF(1,"Close"),t.k0s())}function Pl(n,r){if(1&n){const e=t.RV6();t.j41(0,"mat-chip",61),t.bIt("click",function(i){const a=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.onTagsClick(a.key,i))}),t.DNE(1,Rl,2,0,"mat-icon",62)(2,Bl,2,0,"mat-icon",63),t.EFF(3),t.k0s()}if(2&n){const e=r.$implicit,o=t.XpG(2);t.R7$(),t.vxM(1,o.filter_tab[e.key]==o.TAG_STATE.select?1:-1),t.R7$(),t.vxM(2,o.filter_tab[e.key]==o.TAG_STATE.notselect?2:-1),t.R7$(),t.SpI(" ",e.text,"")}}function Dl(n,r){if(1&n&&(t.j41(0,"th",46)(1,"p",60),t.EFF(2,"tags"),t.k0s(),t.j41(3,"div"),t.Z7z(4,Pl,4,3,"mat-chip",null,ul),t.k0s()()),2&n){const e=t.XpG();t.R7$(),t.Y8G("mat-sort-header",e.TABLE_COL.tag),t.R7$(3),t.Dyx(e.tags_list)}}function Il(n,r){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e)}}function wl(n,r){if(1&n&&(t.j41(0,"td",47),t.Z7z(1,Il,2,1,"div",null,t.Vm6),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.Dyx(e.back.meta.tags)}}function jl(n,r){if(1&n&&(t.j41(0,"th",57),t.EFF(1,"add_date"),t.k0s()),2&n){const e=t.XpG();t.Y8G("mat-sort-header",e.TABLE_COL.add_date)}}function $l(n,r){if(1&n&&(t.j41(0,"td",47),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.SpI(" ",e.back.meta.add_date," ")}}function Vl(n,r){1&n&&(t.j41(0,"th",46),t.EFF(1,"control"),t.k0s())}function Al(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",47)(1,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.delete_magnet(i))}),t.EFF(2," \u{1f5d1}\ufe0fdelete "),t.k0s(),t.j41(3,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.modify_magnet(i))}),t.EFF(4," \u270f\ufe0fmeta "),t.k0s(),t.j41(5,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.modify_magnet_custom(i))}),t.EFF(6," \u270f\ufe0fcustom "),t.k0s()()}}function Ol(n,r){1&n&&t.nrm(0,"tr",64)}function Gl(n,r){1&n&&t.nrm(0,"tr",65)}function Nl(n,r){1&n&&(t.j41(0,"tr",66)(1,"td",67),t.EFF(2,"No data matching the filter"),t.k0s()())}function Ll(n,r){if(1&n&&(t.j41(0,"mat-chip-option"),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.back.meta.id_str)}}function Ul(n,r){if(1&n&&(t.j41(0,"span",69),t.EFF(1),t.k0s(),t.j41(2,"span",69),t.EFF(3),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI("magnet: ",e.back.detail.meta.magnet,""),t.R7$(2),t.SpI("release_date: ",e.back.detail.meta.release_date,"")}}function ql(n,r){if(1&n){const e=t.RV6();t.j41(0,"div",39)(1,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.cilisousuo_add(i))}),t.EFF(2," \u6dfb\u52a0\u5230\u6570\u636e\u5e93 "),t.k0s(),t.j41(3,"button",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.cilisousuo_detail(i))}),t.EFF(4," \u67e5\u770b\u78c1\u529b\u548c\u65e5\u671f "),t.k0s(),t.j41(5,"div",68)(6,"span",69),t.EFF(7),t.k0s(),t.j41(8,"span",70),t.EFF(9),t.k0s(),t.j41(10,"span",71),t.EFF(11),t.k0s(),t.DNE(12,Ul,4,2),t.k0s()()}if(2&n){const e=r.$implicit;t.R7$(7),t.SpI("titile: ",e.back.search_res.title,""),t.R7$(2),t.SpI("subtitle: ",e.back.search_res.subtitle,""),t.R7$(2),t.SpI("size_text: ",e.back.search_res.size_text,""),t.R7$(),t.vxM(12,e.back.detail?12:-1)}}const Ce="cilisousuo",xe="tags",Fe="tags_rev";function zt(n,r){return n.getValue().findIndex(i=>i.back.meta.id_str==r)}var W=function(n){return n.select="select",n.id_str="id_str",n.title="title",n.star="star",n.comments="comments",n.tag="tag",n.magnet="magnet",n.control="control",n.add_date="add_date",n}(W||{}),$t=function(n){return n[n.init=0]="init",n[n.select=1]="select",n[n.notselect=2]="notselect",n[n.size=3]="size",n}($t||{});function Ee(n){try{return JSON.parse(n)}catch(r){return n&&console.error(r),{}}}let Xl=(()=>{class n{constructor(e,o,i,a,s){this._snackBar=e,this.magnetService=o,this.magnetCilisousuoService=i,this.route=a,this.dialog=s,this.picked_files=[],this.uploaded_files=[],this.searchTextCtl=new v.MJ(""),this.selectedTab=new v.MJ(0),this.TABLE_COL=W,this.TAG_STATE=$t,this.tabs=["list",Ce,"HELPER","TODO"],this.TAB_LIST="list",this.TAB_CILISOUSUO=Ce,this.TAB_TODO="TODO",this.TAB_HELPER="HELPER",this.search_result_list=[],this.filter_tab={},this.tags_list=[],this.displayedColumns=[W.select,W.id_str,W.title,W.star,W.comments,W.tag,W.magnet,W.control,W.add_date],this.dataSource=new F.I6([]),this.dataSource$=new u.t([]),this.selection=new qn.CB(!0,[]),this.existTags=[],this.mul_tags=[]}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnInit(){const e=this.route.snapshot.queryParams,o=e.tab||"";if(o&&this.tabs.includes(o)&&this.selectedTab.setValue(this.tabs.indexOf(o)),o==Ce){const i=e.q||"";i&&(this.searchTextCtl.patchValue(i),this.search(i))}this.dataSource.filterPredicate=(i,a)=>{const s=Ee(a);for(const et of["title","id_str","magnet"]){const Ct=s[et];if(Ct&&!i.back.meta[et].trim().toLowerCase().includes(Ct))return!1}for(const et of["comments"]){const Ct=s[et];if(Ct&&!i.back.custom[et].trim().toLowerCase().includes(Ct))return!1}const p=s[xe]||[],C=s[Fe]||[];if(0==p.length&&0==C.length||p.includes("notag")&&0==i.back.meta.tags.length)return!0;console.log(JSON.stringify(p)),console.log(JSON.stringify(C));let G=0==p.length;for(const et of p)i.back.meta.tags.includes(et)&&(G=!0);for(const et of C)i.back.meta.tags.includes(et)&&(G=!1);return G},this.dataSource$.pipe((0,I.M)(i=>{this.dataSource.data=i,this.table?.renderRows();const a=i.map(C=>C.back.meta.tags),s=new Map;for(let C of a){0==C.length&&(C=["notag"]);for(const G of C)s.has(G)||s.set(G,0),s.set(G,s.get(G)+1)}this.tags_list=[];for(const C of s.keys())this.tags_list.push({key:C,text:`${C}(${s.get(C)})`,count:s.get(C)||0});this.tags_list.sort((C,G)=>G.count-C.count);const p=[];for(const C in this.filter_tab)s.has(C)||p.push(C);for(const C of p)delete this.filter_tab[C]})).subscribe(),this.dataSource$.pipe((0,I.M)(i=>{const a=i.map(p=>p.back.meta.tags),s=new Map;a.forEach(p=>p.forEach(C=>{s.has(C)||s.set(C,0),s.set(C,s.get(C)+1)})),this.existTags=[];for(const[p,C]of s)this.existTags.push({text:`${p}(${C})`,cnt:C,value:p});this.existTags.sort((p,C)=>C.cnt-p.cnt)})).subscribe(),this.dataSource.sortingDataAccessor=(i,a)=>a==W.add_date?i.back.meta.add_date||"":a==W.comments?i.back.custom?.comments_date||"":a==W.id_str?i.back.meta.id_str:a==W.star?i.back.custom?.star||0:a==W.tag?`${i.back.meta.tags}`:""}get_magnets_list(){this.alert("Start get full magnets list."),this.magnetService.postList().pipe((0,I.M)(e=>this.dataSource$.next(e.map(gt))),(0,I.M)(()=>this.alert("Success."))).subscribe(()=>{},this.fastApiErrorHandler())}search(e){e&&(this.alert(`Start search [${e}]`),this.magnetCilisousuoService.postSearch({requestBody:{search_word:e}}).pipe((0,I.M)(o=>{this.alert(`Search [${e}] Success`),this.search_result_list=o.map(i=>function il(n,r){return{front:{text:r},back:{search_res:n}}}(i,e))})).subscribe(()=>{},this.fastApiErrorHandler()))}cilisousuo_add(e){this.alert(`Start add [${e.back.search_res.title}(${e.back.search_res.url})]`),this.magnetCilisousuoService.postAdd({requestBody:{unique_id:e.front.text,title:e.back.search_res.title,url:e.back.search_res.url}}).subscribe(o=>{this.alert(`Add [${e.back.search_res.title}(${e.back.search_res.url})] success.`);const i=this.dataSource$.getValue();i.push(gt(o)),this.dataSource$.next(i)},this.fastApiErrorHandler())}cilisousuo_detail(e){this.alert(`Start detail [${e.back.search_res.title}(${e.back.search_res.url})]`),this.magnetCilisousuoService.postDetail({requestBody:{unique_id:e.front.text,title:e.back.search_res.title,url:e.back.search_res.url}}).subscribe(o=>{this.alert(`Detail [${e.back.search_res.title}(${e.back.search_res.url})] success.`),e.back.detail=o},this.fastApiErrorHandler())}alert(e){this._snackBar.open(e,"OK",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})}manual_add(){this.upsert_magnet_meta(new ii)}upsert_magnet_meta(e=new ii){this.dialog.open(nl,{data:{data:e,existTags:this.existTags}}).afterClosed().pipe((0,Y.p)(i=>i),(0,I.M)(i=>{i.id_str?i.magnet||this.alert("magnet is empty"):this.alert("id_str is empty")}),(0,Y.p)(i=>!(!i.id_str||!i.magnet)),(0,ut.ZZ)(i=>this.magnetService.postUpsertMeta({requestBody:{...i,add_date:i.add_date||""}})),(0,I.M)(i=>{this.alert("Success");const a=zt(this.dataSource$,i.data.id_str),s=this.dataSource$.getValue();-1==a?s.push(gt({meta:i.data,custom:new ye})):s[a]=gt({meta:i.data,custom:s[a].back.custom}),this.dataSource$.next(s)})).subscribe(()=>{},this.fastApiErrorHandler())}upsert_magnet_custom(e){this.dialog.open(rl,{data:e}).afterClosed().pipe((0,Y.p)(i=>i),(0,I.M)(i=>{i.id_str||this.alert("id_str is empty")}),(0,Y.p)(i=>!!i.id_str),(0,ut.ZZ)(i=>this.magnetService.postUpsertCustom({requestBody:{data:i}})),(0,I.M)(i=>{this.alert("success");const a=zt(this.dataSource$,i.data.id_str||""),s=this.dataSource$.getValue();-1==a?this.alert(`not found ${i.data.id_str} in data source`):(s[a]=gt({meta:s[a].back.meta,custom:i.data}),this.dataSource$.next(s))})).subscribe(()=>{},this.fastApiErrorHandler())}applyFilter(e,o){const i=Ee(this.dataSource.filter);i[e]=o.target.value.trim().toLowerCase(),this.dataSource.filter=JSON.stringify(i)}fastApiErrorHandler(){return e=>{const o=e();console.error(o),this.alert(String(o))}}delete_magnet(e){this.dialog.open(Bt._,{width:"250px",data:{text:`\u786e\u5b9a\u5220\u9664 [${e.back.meta.id_str}]?`,confirmText:"Delete"}}).afterClosed().pipe((0,Y.p)(o=>o),(0,ut.ZZ)(()=>this.magnetService.postDelete({requestBody:{id_str:e.back.meta.id_str}})),(0,I.M)(o=>{this.alert(o.message),this.dataSource$.next(this.dataSource$.getValue().filter(i=>i.back.meta.id_str!=e.back.meta.id_str))})).subscribe(()=>{},this.fastApiErrorHandler)}modify_magnet(e){this.upsert_magnet_meta(structuredClone(e.back.meta))}modify_magnet_custom(e){const o=structuredClone(e.back.custom||new ye);o.id_str=e.back.meta.id_str,this.upsert_magnet_custom(o)}onTagsClick(e,o){console.log("clicked"),this.filter_tab[e]=((this.filter_tab[e]||0)+1)%$t.size;const i=Ee(this.dataSource.filter);i[xe]=[],i[Fe]=[];for(const a in this.filter_tab)this.filter_tab[a]==$t.select?i[xe].push(a):this.filter_tab[a]==$t.notselect&&i[Fe].push(a);this.dataSource.filter=JSON.stringify(i)}onFileSelected(e){const o=e.target.files;if(o)for(let i=0;i<o.length;i++)this.picked_files.push(o[i])}upload_torrents(){this.magnetService.postUploadTorrents({formData:{files:this.picked_files}}).subscribe(e=>{let o="";for(const i of e)if(i.success){o+=`[success ${i.src}]`,this.uploaded_files.push({f:{id_str:"",show_detail:!1},b:i});const a=this.picked_files.map(s=>s.name).indexOf(i.src);-1!=a&&this.picked_files.splice(a,1)}else o+=`[${i.err_msg}]`;this.alert(o)})}add_to_database(e){e.f.id_str?this.magnetService.postAddTorrents2Db({requestBody:{add_list:[{id_str:e.f.id_str,tmp_name:e.b.tmp_name}]}}).pipe((0,I.M)(o=>{const i=o.res_list[0];if(i.success){const a=i,s=zt(this.dataSource$,a.data.id_str||""),p=this.dataSource$.getValue();-1==s?p.push(gt({meta:a.data,custom:new ye})):p[s]=gt({meta:a.data,custom:p[s].back.custom}),this.dataSource$.next(p),this.uploaded_files=this.uploaded_files.filter(C=>C.b.tmp_name!=e.b.tmp_name),this.alert(`\u6210\u529f\u6dfb\u52a0\u5230Database [${e.f.id_str}]`)}else this.alert(i.msg)})).subscribe(()=>{},this.fastApiErrorHandler()):this.alert("id_str is empty")}ignore_torrent(e){this.uploaded_files=this.uploaded_files.filter(o=>o.b.tmp_name!=e.b.tmp_name)}syncPrimaryPaginator(e){this.paginator.pageIndex=e.pageIndex,this.paginator.pageSize=e.pageSize,this.paginator.page.emit(e)}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.back.meta.id_str+1}`:(this.isAllSelected()?"deselect":"select")+" all"}pickAllFiltered(){this.selection.select(...this.dataSource.filteredData)}unpickAllFiltered(){this.dataSource.filteredData.forEach(e=>this.selection.deselect(e))}mul_add_tags(){0!=this.selection.selected.length?0!=this.mul_tags.length?this.magnetService.postMulAddTags({requestBody:{id_strs:this.selection.selected.map(e=>e.back.meta.id_str),tags:this.mul_tags}}).pipe((0,I.M)(e=>{e.success&&this.selection.clear()})).subscribe():this.alert("tags\u4e3a\u7a7a"):this.alert("\u9009\u62e9\u5217\u8868\u4e3a\u7a7a")}updateStar(e,o){const i=structuredClone(e);i.star=(i.star||0)+o,this.magnetService.postUpsertCustom({requestBody:{data:i}}).pipe((0,I.M)(a=>{this.alert("success");const s=zt(this.dataSource$,a.data.id_str||""),p=this.dataSource$.getValue();-1==s?this.alert(`not found ${a.data.id_str} in data source`):(p[s]=gt({meta:p[s].back.meta,custom:a.data}),this.dataSource$.next(p))})).subscribe(()=>{},this.fastApiErrorHandler())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(_t.UG),t.rXU(hn),t.rXU(qo),t.rXU(k.nX),t.rXU(j.bZ))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-magnet"]],viewQuery:function(o,i){if(1&o&&(t.GBs(F.Zl,5),t.GBs(X.B4,5),t.GBs(ot.iy,5)),2&o){let a;t.mGM(a=t.lsd())&&(i.table=a.first),t.mGM(a=t.lsd())&&(i.sort=a.first),t.mGM(a=t.lsd())&&(i.paginator=a.first)}},standalone:!0,features:[t.aNF],decls:107,vars:33,consts:[["fileInput",""],["paginator",""],["helperInput",""],["IdstrInput",""],[3,"selectedIndexChange","selectedIndex"],[2,"overflow","hidden",3,"label"],[2,"box-sizing","border-box","padding","1em"],["mat-raised-button","",3,"click"],["hidden","","type","file","multiple","","accept",".torrent",3,"change"],["type","button","mat-raised-button","",3,"click"],[1,"magnet-file-card"],["tabindex","0",1,"table-section"],[1,"table-wrap"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_str"],["matColumnDef","title"],["matColumnDef","magnet"],["matColumnDef","star"],["mat-header-cell","",3,"mat-sort-header",4,"matHeaderCellDef"],["matColumnDef","comments"],["matColumnDef","tag"],["matColumnDef","add_date"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"page","pageSize","pageIndex","length","pageSizeOptions"],[2,"display","block","box-sizing","border-box","padding","1em"],[3,"selectedTagsChange","existTags","selectedTags"],[3,"label"],[1,"tab-content"],[3,"submit"],["appearance","fill"],["matInput","","placeholder","Ex. \u641c\u7d22\u6587\u5b57",3,"formControl"],["mat-raised-button","","type","submit"],[1,"row"],[2,"display","inline-flex"],["matInput","","placeholder","Ex. SSIS"],[1,"helper-external-search"],["appHrefExternalUrl","",3,"href"],["matInput","","placeholder","Ex. SSIS",3,"keyup"],[1,"file-size"],["mat-header-cell",""],["mat-cell",""],[3,"click","change","checked","aria-label"],[2,"display","flex","justify-content","center",3,"mat-sort-header"],[2,"display","flex"],[2,"display","flex","flex-direction","column"],[1,"tiny-image",3,"src"],[2,"display","flex","justify-content","center"],["matInput","","placeholder","Ex. title",3,"keyup"],["matInput","","placeholder","Ex. magnet",3,"keyup"],[1,"magnet-list-row",3,"href"],["mat-header-cell","",3,"mat-sort-header"],[2,"white-space","nowrap"],["mat-button","",3,"click"],[3,"mat-sort-header"],[3,"click"],["matChipAvatar","","fontIcon","check"],["matChipAvatar","","fontIcon","close"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[2,"flex","1","display","inline-flex","flex-direction","column"],[1,"small_font"],[1,"subtitle"],[1,"size"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"mat-tab-group",4),t.bIt("selectedIndexChange",function(p){return t.eBV(a),t.Njj(i.selectedTab.setValue(p))}),t.j41(1,"mat-tab",5)(2,"div",6)(3,"div")(4,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.get_magnets_list())}),t.EFF(5," Get full magnets list "),t.k0s(),t.j41(6,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.manual_add())}),t.EFF(7,"\u624b\u52a8\u6dfb\u52a0"),t.k0s(),t.j41(8,"div")(9,"input",8,0),t.bIt("change",function(p){return t.eBV(a),t.Njj(i.onFileSelected(p))}),t.k0s(),t.j41(11,"button",9),t.bIt("click",function(){t.eBV(a);const p=t.sdS(10);return t.Njj(p.click())}),t.EFF(12," \u9009\u62e9Torrents "),t.k0s(),t.j41(13,"div"),t.EFF(14," \u5df2\u9009\u62e9: "),t.Z7z(15,pl,3,4,"pre",null,t.Vm6),t.k0s(),t.j41(17,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.upload_torrents())}),t.EFF(18," \u4e0a\u4f20Torrents "),t.k0s(),t.j41(19,"div"),t.EFF(20," \u5f85\u786e\u8ba4 "),t.Z7z(21,_l,37,16,"div",10,cl),t.k0s()()()(),t.j41(23,"section",11)(24,"div",12),t.nrm(25,"mat-paginator",13,1),t.j41(27,"table",14),t.qex(28,15),t.DNE(29,fl,5,0,"th",16)(30,gl,2,2,"td",17),t.bVm(),t.qex(31,18),t.DNE(32,bl,8,1,"th",16)(33,vl,4,2,"td",17),t.bVm(),t.qex(34,19),t.DNE(35,yl,8,0,"th",16)(36,Cl,2,1,"td",17),t.bVm(),t.qex(37,20),t.DNE(38,xl,8,0,"th",16)(39,Fl,3,2,"td",17),t.bVm(),t.qex(40,21),t.DNE(41,El,2,1,"th",22)(42,Tl,7,1,"td",17),t.bVm(),t.qex(43,23),t.DNE(44,Ml,8,0,"th",16)(45,Sl,2,1,"td",17),t.bVm(),t.qex(46,24),t.DNE(47,Dl,6,1,"th",16)(48,wl,3,0,"td",17),t.bVm(),t.qex(49,25),t.DNE(50,jl,2,1,"th",22)(51,$l,2,1,"td",17),t.bVm(),t.qex(52,26),t.DNE(53,Vl,2,0,"th",16)(54,Al,7,0,"td",17),t.bVm(),t.DNE(55,Ol,1,0,"tr",27)(56,Gl,1,0,"tr",28)(57,Nl,3,0,"tr",29),t.k0s(),t.j41(58,"mat-paginator",30),t.bIt("page",function(p){return t.eBV(a),t.Njj(i.syncPrimaryPaginator(p))}),t.k0s()()(),t.j41(59,"div",31)(60,"h2"),t.EFF(61,"\u6279\u91cf\u64cd\u4f5c:"),t.k0s(),t.j41(62,"mat-chip-set"),t.Z7z(63,Ll,2,1,"mat-chip-option",null,t.Vm6),t.k0s(),t.j41(65,"form")(66,"div",6)(67,"cm-mat-chips-input",32),t.mxI("selectedTagsChange",function(p){return t.eBV(a),t.DH7(i.mul_tags,p)||(i.mul_tags=p),t.Njj(p)}),t.k0s()(),t.j41(68,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.mul_add_tags())}),t.EFF(69,"\u6279\u91cf\u6dfb\u52a0tags"),t.k0s()(),t.j41(70,"div"),t.EFF(71),t.k0s()()(),t.j41(72,"mat-tab",33)(73,"div",34)(74,"form",35),t.bIt("submit",function(){return t.eBV(a),t.Njj(i.search(i.searchTextCtl.getRawValue()||""))}),t.j41(75,"mat-form-field",36)(76,"mat-label"),t.EFF(77,"Fuzzy Search"),t.k0s(),t.nrm(78,"input",37),t.k0s(),t.j41(79,"button",38),t.EFF(80,"search"),t.k0s()(),t.j41(81,"div"),t.Z7z(82,ql,13,4,"div",39,t.Vm6),t.k0s()()(),t.j41(84,"mat-tab",33)(85,"mat-form-field",40)(86,"mat-label"),t.EFF(87,"id_str"),t.k0s(),t.nrm(88,"input",41,2),t.k0s(),t.j41(90,"div",42)(91,"a",43),t.EFF(92),t.k0s(),t.j41(93,"a",43),t.EFF(94),t.k0s(),t.j41(95,"a",43),t.EFF(96),t.k0s(),t.j41(97,"a",43),t.EFF(98),t.k0s(),t.j41(99,"a",43),t.EFF(100),t.k0s(),t.j41(101,"a",43),t.EFF(102),t.k0s(),t.j41(103,"a",43),t.EFF(104),t.k0s()()(),t.j41(105,"mat-tab",33),t.nrm(106,"app-todo-and-done"),t.k0s()()}if(2&o){const a=t.sdS(26),s=t.sdS(89);t.Y8G("selectedIndex",i.selectedTab.value),t.R7$(),t.Y8G("label",i.TAB_LIST),t.R7$(14),t.Dyx(i.picked_files),t.R7$(6),t.Dyx(i.uploaded_files),t.R7$(4),t.Y8G("pageSizeOptions",t.lJ4(32,dl)),t.R7$(2),t.Y8G("dataSource",i.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(2),t.Y8G("pageSize",a.pageSize)("pageIndex",a.pageIndex)("length",a.length)("pageSizeOptions",a.pageSizeOptions),t.R7$(5),t.Dyx(i.selection.selected),t.R7$(4),t.Y8G("existTags",i.existTags),t.R50("selectedTags",i.mul_tags),t.R7$(4),t.JRh(i.mul_tags),t.R7$(),t.Y8G("label",i.TAB_CILISOUSUO),t.R7$(6),t.Y8G("formControl",i.searchTextCtl),t.R7$(4),t.Dyx(i.search_result_list),t.R7$(2),t.Y8G("label",i.TAB_HELPER),t.R7$(7),t.Y8G("href","https://cilisousuo.com/search?q="+s.value,t.B4B),t.R7$(),t.SpI(" ","https://cilisousuo.com/search?q="+s.value," "),t.R7$(),t.Y8G("href","https://en.btdig.com/search?q="+s.value,t.B4B),t.R7$(),t.SpI(" ","https://en.btdig.com/search?q="+s.value," "),t.R7$(),t.Y8G("href","https://sukebei.nyaa.si/?f=0&c=0_0&q="+s.value,t.B4B),t.R7$(),t.SpI(" ","https://sukebei.nyaa.si/?f=0&c=0_0&q="+s.value," "),t.R7$(),t.Y8G("href","https://skrbtpx.top/search?keyword="+s.value,t.B4B),t.R7$(),t.SpI(" ","https://skrbtpx.top/search?keyword="+s.value," "),t.R7$(),t.Y8G("href","https://getmag.net/search?q="+s.value,t.B4B),t.R7$(),t.SpI(" ","https://getmag.net/search?q="+s.value," "),t.R7$(),t.Y8G("href","https://clmclm.com/search-"+s.value+"-0-0-1.html",t.B4B),t.R7$(),t.SpI(" ","https://clmclm.com/search-"+s.value+"-0-0-1.html"," "),t.R7$(),t.Y8G("href","https://0cili.org/search?q="+s.value,t.B4B),t.R7$(),t.SpI(" ","https://0cili.org/search?q="+s.value," "),t.R7$(),t.Y8G("label",i.TAB_TODO)}},dependencies:[l.MD,v.YN,v.qT,v.me,v.BC,v.cb,v.cV,ct.YN,ct.Jl,ct.yZ,ct.gq,ct.Jo,v.X1,v.l_,st.m_,st.An,ot.Ou,ot.iy,g.RI,g.mq,g.T8,F.tP,F.Zl,F.tL,F.ji,F.cC,F.YV,F.iL,F.KS,F.$R,F.YZ,F.NB,F.ky,J.fS,J.fg,N.rl,N.nJ,w.Hl,w.$z,X.NQ,X.B4,X.aE,el,ve,oi.jL,yt.Fg,Wt,al,bt,ni.jI,sl],styles:["[_nghost-%COMP%]{box-sizing:border-box;padding:1em}.tab-content[_ngcontent-%COMP%]{box-sizing:border-box;padding:1em}mat-list-item[_ngcontent-%COMP%]:nth-child(odd){background-color:#add8e6}.mat-column-comments[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 40%!important;width:40%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}.row[_ngcontent-%COMP%]{display:flex}.row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:1em}.row[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.7em;color:#00008b}.row[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{min-width:10em;font-size:.7em}.row[_ngcontent-%COMP%]   .small_font[_ngcontent-%COMP%]{font-size:.7em}.magnet-list-row[_ngcontent-%COMP%]{display:flex;font-family:Courier New,Courier,monospace;font-size:.7em}.magnet-list-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:.5em}.magnet-list-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:.7em;color:#00008b}.magnet-list-row[_ngcontent-%COMP%]   .magnet[_ngcontent-%COMP%]{font-size:.7em}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{background-color:#e0ffff}.magnet-file-card[_ngcontent-%COMP%]{display:block;background-color:#fff;box-sizing:border-box;padding:1em;margin:1em;border-radius:1em}.magnet-file-card[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{display:inline-block;min-width:10em}.helper-external-search[_ngcontent-%COMP%]{display:flex;flex-direction:column;box-sizing:border-box;padding:1em;margin:1em}.table-section[_ngcontent-%COMP%], .table-section[_ngcontent-%COMP%]   .table-wrap[_ngcontent-%COMP%]{box-sizing:border-box;padding:1em}.tiny-image[_ngcontent-%COMP%]{max-width:150px;max-height:200px}"]})}return n})();const Hl=()=>[25],zl=()=>[10,25];function Jl(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",14),t.EFF(1," product_id "),t.j41(2,"mat-form-field",15)(3,"mat-label"),t.EFF(4,"product_id"),t.k0s(),t.j41(5,"input",16),t.bIt("change",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.onInputChange(i))})("keyup",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilter("product_id",i))}),t.k0s()()()}}function Yl(n,r){if(1&n&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.product_id)}}function Kl(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1,"star"),t.k0s())}function Ql(n,r){if(1&n&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.star)}}function Zl(n,r){if(1&n){const e=t.RV6();t.j41(0,"th",14),t.EFF(1," comments "),t.j41(2,"mat-form-field",15)(3,"mat-label"),t.EFF(4,"comments"),t.k0s(),t.j41(5,"input",19),t.bIt("change",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.onInputChange(i))})("keyup",function(i){t.eBV(e);const a=t.XpG();return t.Njj(a.applyFilter("comments",i))}),t.k0s()()()}}function Wl(n,r){if(1&n&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.comments)}}function tu(n,r){1&n&&(t.j41(0,"th",18),t.EFF(1,"comments_date"),t.k0s())}function eu(n,r){if(1&n&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.comments_date)}}function nu(n,r){1&n&&(t.j41(0,"th",14),t.EFF(1,"show"),t.k0s())}function iu(n,r){if(1&n&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&n){const e=r.$implicit;t.R7$(),t.JRh(e.show)}}function ou(n,r){1&n&&(t.j41(0,"th",14)(1,"div",20),t.EFF(2,"\u64cd\u4f5c"),t.k0s()())}function ru(n,r){if(1&n){const e=t.RV6();t.j41(0,"td",17)(1,"button",21),t.bIt("click",function(){const i=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.fetchProduct(i.product_id))}),t.EFF(2," \u83b7\u53d6 "),t.k0s()()}}function au(n,r){1&n&&t.nrm(0,"tr",22)}function su(n,r){1&n&&t.nrm(0,"tr",23)}function li(n){try{return JSON.parse(n)}catch(r){return console.error(r),{}}}let cu=(()=>{class n{onInputChange(e){console.log(e)}constructor(e){this.javService=e,this.dataSource=new F.I6([]),this.dataSource$=new u.t([]),this.displayedColumns=["op","product_id","star","comments","comments_date"]}ngOnInit(){this.dataSource.filterPredicate=(e,o)=>{const i=li(o);for(const a of["product_id","comments"]){const s=i[a];if(s&&!e[a].trim().toLowerCase().includes(s))return!1}return!0},this.dataSource.sortingDataAccessor=(e,o)=>"comments_date"==o?e.comments_date||"":"star"==o?e.star||0:"",this.onRefresh()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}onRefresh(){this.javService.post0Star().pipe((0,I.M)(e=>{const o=e.list;o.sort((i,a)=>i.product_id<a.product_id?-1:1),this.dataSource.data=o})).subscribe()}applyFilter(e,o){const i=li(this.dataSource.filter);i[e]=o.target.value.trim().toLowerCase(),console.log(i),this.dataSource.filter=JSON.stringify(i)}fetchProduct(e){}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(dt))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-zero-star"]],viewQuery:function(o,i){if(1&o&&(t.GBs(X.B4,5),t.GBs(ot.iy,5)),2&o){let a;t.mGM(a=t.lsd())&&(i.sort=a.first),t.mGM(a=t.lsd())&&(i.paginator=a.first)}},standalone:!0,features:[t.aNF],decls:23,vars:8,consts:[["paginator",""],["showFirstLastButtons","",3,"pageSize","pageSizeOptions"],["mat-table","","matSort","",3,"dataSource","fixedLayout"],["matColumnDef","product_id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","star"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","comments"],["matColumnDef","comments_date"],["matColumnDef","show"],["matColumnDef","op"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[2,"display","flex"],["matInput","","placeholder","Ex. SSIS",3,"change","keyup"],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["matInput","","placeholder","Ex. no",3,"change","keyup"],[2,"text-align","center"],["mat-button","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.nrm(0,"mat-paginator",1,0),t.j41(2,"table",2),t.qex(3,3),t.DNE(4,Jl,6,0,"th",4)(5,Yl,2,1,"td",5),t.bVm(),t.qex(6,6),t.DNE(7,Kl,2,0,"th",7)(8,Ql,2,1,"td",5),t.bVm(),t.qex(9,8),t.DNE(10,Zl,6,0,"th",4)(11,Wl,2,1,"td",5),t.bVm(),t.qex(12,9),t.DNE(13,tu,2,0,"th",7)(14,eu,2,1,"td",5),t.bVm(),t.qex(15,10),t.DNE(16,nu,2,0,"th",4)(17,iu,2,1,"td",5),t.bVm(),t.qex(18,11),t.DNE(19,ou,3,0,"th",4)(20,ru,3,0,"td",5),t.bVm(),t.DNE(21,au,1,0,"tr",12)(22,su,1,0,"tr",13),t.k0s()),2&o&&(t.Y8G("pageSize",t.lJ4(6,Hl))("pageSizeOptions",t.lJ4(7,zl)),t.R7$(2),t.Y8G("dataSource",i.dataSource)("fixedLayout",!0),t.R7$(19),t.Y8G("matHeaderRowDef",i.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns))},dependencies:[l.MD,F.tP,F.Zl,F.tL,F.ji,F.cC,F.YV,F.iL,F.KS,F.$R,F.YZ,F.NB,w.Hl,w.$z,v.YN,X.NQ,X.B4,X.aE,ot.Ou,ot.iy,J.fS,J.fg,N.rl,N.nJ],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-column-comments[_ngcontent-%COMP%]{word-wrap:break-word!important;white-space:unset!important;flex:0 0 80%!important;width:80%!important;overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}"]})}return n})();const uu=[{path:"",component:_,children:[{path:"",redirectTo:"book",pathMatch:"full",title:"Recommend"},{path:"book",title:"Books",children:[{path:"",component:Vn,pathMatch:"full"},{path:"man",component:jn},{path:"tech",component:$n}]},{path:"movie",title:"Movie",children:[{path:"",component:vc,pathMatch:"full"},{path:"ctl",component:Xc}]},{path:"game",title:"Game",canActivate:[Bn.Q],component:Bn.Q,data:{externalUrl:"https://steamcommunity.com/profiles/76561198120475434/recommended"}},{path:"music",component:c,title:"Music"},{path:"actress",component:oa,title:"Actress"}]},(()=>{const n=(0,t.naY)(),r={path:"porn",children:[{path:"",pathMatch:"full",component:pe,title:"Porn"}],canActivate:[fe]};return n&&r.children?.push({path:"man",component:An,title:"Porn Manager",children:[{path:"",component:Gs},{path:"ctl",component:pe},{path:"local",component:Gn},{path:"top3",component:Un},{path:"javbus",component:Zn},{path:"javdb",component:Qn},{path:"magnet",component:Xl},{path:"0",component:cu}]}),r})(),{path:"r18confirm",component:Rn,data:{R18GuardSelf:!0},canActivate:[fe]}];let du=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[k.iI.forChild(uu),k.iI]})}return n})(),pu=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({providers:[_e,fe,he],imports:[l.MD,v.YN,v.X1,du,lt.q1,So,_,pe,Rn,jn,$n,Vn,An,Zn,Gn,_n,Un,Qn,de]})}return n})()},4714:A=>{A.exports=function V(h,l){for(var t=new Array(arguments.length-1),k=0,f=2,m=!0;f<arguments.length;)t[k++]=arguments[f++];return new Promise(function(d,g){t[k]=function(E){if(m)if(m=!1,E)g(E);else{for(var S=new Array(arguments.length-1),_=0;_<S.length;)S[_++]=arguments[_];d.apply(null,S)}};try{h.apply(l||null,t)}catch(b){m&&(m=!1,g(b))}})}},7530:(A,V)=>{var h=V;h.length=function(c){var d=c.length;if(!d)return 0;for(var g=0;--d%4>1&&"="===c.charAt(d);)++g;return Math.ceil(3*c.length)/4-g};for(var l=new Array(64),t=new Array(123),k=0;k<64;)t[l[k]=k<26?k+65:k<52?k+71:k<62?k-4:k-59|43]=k++;h.encode=function(c,d,g){for(var u,b=null,E=[],S=0,_=0;d<g;){var M=c[d++];switch(_){case 0:E[S++]=l[M>>2],u=(3&M)<<4,_=1;break;case 1:E[S++]=l[u|M>>4],u=(15&M)<<2,_=2;break;case 2:E[S++]=l[u|M>>6],E[S++]=l[63&M],_=0}S>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,E)),S=0)}return _&&(E[S++]=l[u],E[S++]=61,1===_&&(E[S++]=61)),b?(S&&b.push(String.fromCharCode.apply(String,E.slice(0,S))),b.join("")):String.fromCharCode.apply(String,E.slice(0,S))};var f="invalid encoding";h.decode=function(c,d,g){for(var S,b=g,E=0,_=0;_<c.length;){var u=c.charCodeAt(_++);if(61===u&&E>1)break;if(void 0===(u=t[u]))throw Error(f);switch(E){case 0:S=u,E=1;break;case 1:d[g++]=S<<2|(48&u)>>4,S=u,E=2;break;case 2:d[g++]=(15&S)<<4|(60&u)>>2,S=u,E=3;break;case 3:d[g++]=(3&S)<<6|u,E=0}}if(1===E)throw Error(f);return g-b},h.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}},3911:A=>{function V(){this._listeners={}}A.exports=V,V.prototype.on=function(l,t,k){return(this._listeners[l]||(this._listeners[l]=[])).push({fn:t,ctx:k||this}),this},V.prototype.off=function(l,t){if(void 0===l)this._listeners={};else if(void 0===t)this._listeners[l]=[];else for(var k=this._listeners[l],f=0;f<k.length;)k[f].fn===t?k.splice(f,1):++f;return this},V.prototype.emit=function(l){var t=this._listeners[l];if(t){for(var k=[],f=1;f<arguments.length;)k.push(arguments[f++]);for(f=0;f<t.length;)t[f].fn.apply(t[f++].ctx,k)}return this}},1353:A=>{function V(f){return typeof Float32Array<"u"?function(){var m=new Float32Array([-0]),c=new Uint8Array(m.buffer),d=128===c[3];function g(_,u,M){m[0]=_,u[M]=c[0],u[M+1]=c[1],u[M+2]=c[2],u[M+3]=c[3]}function b(_,u,M){m[0]=_,u[M]=c[3],u[M+1]=c[2],u[M+2]=c[1],u[M+3]=c[0]}function E(_,u){return c[0]=_[u],c[1]=_[u+1],c[2]=_[u+2],c[3]=_[u+3],m[0]}function S(_,u){return c[3]=_[u],c[2]=_[u+1],c[1]=_[u+2],c[0]=_[u+3],m[0]}f.writeFloatLE=d?g:b,f.writeFloatBE=d?b:g,f.readFloatLE=d?E:S,f.readFloatBE=d?S:E}():function(){function m(d,g,b,E){var S=g<0?1:0;if(S&&(g=-g),0===g)d(1/g>0?0:2147483648,b,E);else if(isNaN(g))d(2143289344,b,E);else if(g>34028234663852886e22)d((S<<31|2139095040)>>>0,b,E);else if(g<11754943508222875e-54)d((S<<31|Math.round(g/1401298464324817e-60))>>>0,b,E);else{var _=Math.floor(Math.log(g)/Math.LN2);d((S<<31|_+127<<23|8388607&Math.round(g*Math.pow(2,-_)*8388608))>>>0,b,E)}}function c(d,g,b){var E=d(g,b),S=2*(E>>31)+1,_=E>>>23&255,u=8388607&E;return 255===_?u?NaN:S*(1/0):0===_?1401298464324817e-60*S*u:S*Math.pow(2,_-150)*(u+8388608)}f.writeFloatLE=m.bind(null,h),f.writeFloatBE=m.bind(null,l),f.readFloatLE=c.bind(null,t),f.readFloatBE=c.bind(null,k)}(),typeof Float64Array<"u"?function(){var m=new Float64Array([-0]),c=new Uint8Array(m.buffer),d=128===c[7];function g(_,u,M){m[0]=_,u[M]=c[0],u[M+1]=c[1],u[M+2]=c[2],u[M+3]=c[3],u[M+4]=c[4],u[M+5]=c[5],u[M+6]=c[6],u[M+7]=c[7]}function b(_,u,M){m[0]=_,u[M]=c[7],u[M+1]=c[6],u[M+2]=c[5],u[M+3]=c[4],u[M+4]=c[3],u[M+5]=c[2],u[M+6]=c[1],u[M+7]=c[0]}function E(_,u){return c[0]=_[u],c[1]=_[u+1],c[2]=_[u+2],c[3]=_[u+3],c[4]=_[u+4],c[5]=_[u+5],c[6]=_[u+6],c[7]=_[u+7],m[0]}function S(_,u){return c[7]=_[u],c[6]=_[u+1],c[5]=_[u+2],c[4]=_[u+3],c[3]=_[u+4],c[2]=_[u+5],c[1]=_[u+6],c[0]=_[u+7],m[0]}f.writeDoubleLE=d?g:b,f.writeDoubleBE=d?b:g,f.readDoubleLE=d?E:S,f.readDoubleBE=d?S:E}():function(){function m(d,g,b,E,S,_){var u=E<0?1:0;if(u&&(E=-E),0===E)d(0,S,_+g),d(1/E>0?0:2147483648,S,_+b);else if(isNaN(E))d(0,S,_+g),d(2146959360,S,_+b);else if(E>17976931348623157e292)d(0,S,_+g),d((u<<31|2146435072)>>>0,S,_+b);else{var M;if(E<22250738585072014e-324)d((M=E/5e-324)>>>0,S,_+g),d((u<<31|M/4294967296)>>>0,S,_+b);else{var U=Math.floor(Math.log(E)/Math.LN2);1024===U&&(U=1023),d(4503599627370496*(M=E*Math.pow(2,-U))>>>0,S,_+g),d((u<<31|U+1023<<20|1048576*M&1048575)>>>0,S,_+b)}}}function c(d,g,b,E,S){var _=d(E,S+g),u=d(E,S+b),M=2*(u>>31)+1,U=u>>>20&2047,v=4294967296*(1048575&u)+_;return 2047===U?v?NaN:M*(1/0):0===U?5e-324*M*v:M*Math.pow(2,U-1075)*(v+4503599627370496)}f.writeDoubleLE=m.bind(null,h,0,4),f.writeDoubleBE=m.bind(null,l,4,0),f.readDoubleLE=c.bind(null,t,0,4),f.readDoubleBE=c.bind(null,k,4,0)}(),f}function h(f,m,c){m[c]=255&f,m[c+1]=f>>>8&255,m[c+2]=f>>>16&255,m[c+3]=f>>>24}function l(f,m,c){m[c]=f>>>24,m[c+1]=f>>>16&255,m[c+2]=f>>>8&255,m[c+3]=255&f}function t(f,m){return(f[m]|f[m+1]<<8|f[m+2]<<16|f[m+3]<<24)>>>0}function k(f,m){return(f[m]<<24|f[m+1]<<16|f[m+2]<<8|f[m+3])>>>0}A.exports=V(V)},8930:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(A){}return null}module.exports=inquire},1059:A=>{A.exports=function V(h,l,t){var k=t||8192,f=k>>>1,m=null,c=k;return function(g){if(g<1||g>f)return h(g);c+g>k&&(m=h(k),c=0);var b=l.call(m,c,c+=g);return 7&c&&(c=1+(7|c)),b}}},338:(A,V)=>{var h=V;h.length=function(t){for(var k=0,f=0,m=0;m<t.length;++m)(f=t.charCodeAt(m))<128?k+=1:f<2048?k+=2:55296==(64512&f)&&56320==(64512&t.charCodeAt(m+1))?(++m,k+=4):k+=3;return k},h.read=function(t,k,f){if(f-k<1)return"";for(var b,c=null,d=[],g=0;k<f;)(b=t[k++])<128?d[g++]=b:b>191&&b<224?d[g++]=(31&b)<<6|63&t[k++]:b>239&&b<365?(b=((7&b)<<18|(63&t[k++])<<12|(63&t[k++])<<6|63&t[k++])-65536,d[g++]=55296+(b>>10),d[g++]=56320+(1023&b)):d[g++]=(15&b)<<12|(63&t[k++])<<6|63&t[k++],g>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,d)),g=0);return c?(g&&c.push(String.fromCharCode.apply(String,d.slice(0,g))),c.join("")):String.fromCharCode.apply(String,d.slice(0,g))},h.write=function(t,k,f){for(var c,d,m=f,g=0;g<t.length;++g)(c=t.charCodeAt(g))<128?k[f++]=c:c<2048?(k[f++]=c>>6|192,k[f++]=63&c|128):55296==(64512&c)&&56320==(64512&(d=t.charCodeAt(g+1)))?(++g,k[f++]=(c=65536+((1023&c)<<10)+(1023&d))>>18|240,k[f++]=c>>12&63|128,k[f++]=c>>6&63|128,k[f++]=63&c|128):(k[f++]=c>>12|224,k[f++]=c>>6&63|128,k[f++]=63&c|128);return f-m}},6443:(A,V,h)=>{A.exports=h(6055)},6055:(A,V,h)=>{var l=V;function t(){l.util._configure(),l.Writer._configure(l.BufferWriter),l.Reader._configure(l.BufferReader)}l.build="minimal",l.Writer=h(6874),l.BufferWriter=h(2523),l.Reader=h(5082),l.BufferReader=h(8187),l.util=h(7829),l.rpc=h(6222),l.roots=h(5608),l.configure=t,t()},5082:(A,V,h)=>{A.exports=c;var t,l=h(7829),k=l.LongBits,f=l.utf8;function m(_,u){return RangeError("index out of range: "+_.pos+" + "+(u||1)+" > "+_.len)}function c(_){this.buf=_,this.pos=0,this.len=_.length}var d=typeof Uint8Array<"u"?function(u){if(u instanceof Uint8Array||Array.isArray(u))return new c(u);throw Error("illegal buffer")}:function(u){if(Array.isArray(u))return new c(u);throw Error("illegal buffer")},g=function(){return l.Buffer?function(M){return(c.create=function(v){return l.Buffer.isBuffer(v)?new t(v):d(v)})(M)}:d};function b(){var _=new k(0,0),u=0;if(!(this.len-this.pos>4)){for(;u<3;++u){if(this.pos>=this.len)throw m(this);if(_.lo=(_.lo|(127&this.buf[this.pos])<<7*u)>>>0,this.buf[this.pos++]<128)return _}return _.lo=(_.lo|(127&this.buf[this.pos++])<<7*u)>>>0,_}for(;u<4;++u)if(_.lo=(_.lo|(127&this.buf[this.pos])<<7*u)>>>0,this.buf[this.pos++]<128)return _;if(_.lo=(_.lo|(127&this.buf[this.pos])<<28)>>>0,_.hi=(_.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return _;if(u=0,this.len-this.pos>4){for(;u<5;++u)if(_.hi=(_.hi|(127&this.buf[this.pos])<<7*u+3)>>>0,this.buf[this.pos++]<128)return _}else for(;u<5;++u){if(this.pos>=this.len)throw m(this);if(_.hi=(_.hi|(127&this.buf[this.pos])<<7*u+3)>>>0,this.buf[this.pos++]<128)return _}throw Error("invalid varint encoding")}function E(_,u){return(_[u-4]|_[u-3]<<8|_[u-2]<<16|_[u-1]<<24)>>>0}function S(){if(this.pos+8>this.len)throw m(this,8);return new k(E(this.buf,this.pos+=4),E(this.buf,this.pos+=4))}c.create=g(),c.prototype._slice=l.Array.prototype.subarray||l.Array.prototype.slice,c.prototype.uint32=function(){var u=4294967295;return function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,m(this,10);return u}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var u=this.uint32();return u>>>1^-(1&u)},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw m(this,4);return E(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw m(this,4);return 0|E(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw m(this,4);var u=l.float.readFloatLE(this.buf,this.pos);return this.pos+=4,u},c.prototype.double=function(){if(this.pos+8>this.len)throw m(this,4);var u=l.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,u},c.prototype.bytes=function(){var u=this.uint32(),M=this.pos,U=this.pos+u;if(U>this.len)throw m(this,u);if(this.pos+=u,Array.isArray(this.buf))return this.buf.slice(M,U);if(M===U){var v=l.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,M,U)},c.prototype.string=function(){var u=this.bytes();return f.read(u,0,u.length)},c.prototype.skip=function(u){if("number"==typeof u){if(this.pos+u>this.len)throw m(this,u);this.pos+=u}else do{if(this.pos>=this.len)throw m(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(_){switch(_){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(_=7&this.uint32());)this.skipType(_);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+_+" at offset "+this.pos)}return this},c._configure=function(_){t=_,c.create=g(),t._configure();var u=l.Long?"toLong":"toNumber";l.merge(c.prototype,{int64:function(){return b.call(this)[u](!1)},uint64:function(){return b.call(this)[u](!0)},sint64:function(){return b.call(this).zzDecode()[u](!1)},fixed64:function(){return S.call(this)[u](!0)},sfixed64:function(){return S.call(this)[u](!1)}})}},8187:(A,V,h)=>{A.exports=k;var l=h(5082);(k.prototype=Object.create(l.prototype)).constructor=k;var t=h(7829);function k(f){l.call(this,f)}k._configure=function(){t.Buffer&&(k.prototype._slice=t.Buffer.prototype.slice)},k.prototype.string=function(){var m=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+m,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+m,this.len))},k._configure()},5608:A=>{A.exports={}},6222:(A,V,h)=>{V.Service=h(574)},574:(A,V,h)=>{A.exports=t;var l=h(7829);function t(k,f,m){if("function"!=typeof k)throw TypeError("rpcImpl must be a function");l.EventEmitter.call(this),this.rpcImpl=k,this.requestDelimited=!!f,this.responseDelimited=!!m}(t.prototype=Object.create(l.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function k(f,m,c,d,g){if(!d)throw TypeError("request must be specified");var b=this;if(!g)return l.asPromise(k,b,f,m,c,d);if(b.rpcImpl)try{return b.rpcImpl(f,m[b.requestDelimited?"encodeDelimited":"encode"](d).finish(),function(S,_){if(S)return b.emit("error",S,f),g(S);if(null!==_){if(!(_ instanceof c))try{_=c[b.responseDelimited?"decodeDelimited":"decode"](_)}catch(u){return b.emit("error",u,f),g(u)}return b.emit("data",_,f),g(null,_)}b.end(!0)})}catch(E){return b.emit("error",E,f),void setTimeout(function(){g(E)},0)}else setTimeout(function(){g(Error("already ended"))},0)},t.prototype.end=function(f){return this.rpcImpl&&(f||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},4446:(A,V,h)=>{A.exports=t;var l=h(7829);function t(c,d){this.lo=c>>>0,this.hi=d>>>0}var k=t.zero=new t(0,0);k.toNumber=function(){return 0},k.zzEncode=k.zzDecode=function(){return this},k.length=function(){return 1};var f=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(d){if(0===d)return k;var g=d<0;g&&(d=-d);var b=d>>>0,E=(d-b)/4294967296>>>0;return g&&(E=~E>>>0,b=~b>>>0,++b>4294967295&&(b=0,++E>4294967295&&(E=0))),new t(b,E)},t.from=function(d){if("number"==typeof d)return t.fromNumber(d);if(l.isString(d)){if(!l.Long)return t.fromNumber(parseInt(d,10));d=l.Long.fromString(d)}return d.low||d.high?new t(d.low>>>0,d.high>>>0):k},t.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var g=1+~this.lo>>>0,b=~this.hi>>>0;return g||(b=b+1>>>0),-(g+4294967296*b)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(d){return l.Long?new l.Long(0|this.lo,0|this.hi,!!d):{low:0|this.lo,high:0|this.hi,unsigned:!!d}};var m=String.prototype.charCodeAt;t.fromHash=function(d){return d===f?k:new t((m.call(d,0)|m.call(d,1)<<8|m.call(d,2)<<16|m.call(d,3)<<24)>>>0,(m.call(d,4)|m.call(d,5)<<8|m.call(d,6)<<16|m.call(d,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},t.prototype.zzDecode=function(){var d=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},t.prototype.length=function(){var d=this.lo,g=(this.lo>>>28|this.hi<<4)>>>0,b=this.hi>>>24;return 0===b?0===g?d<16384?d<128?1:2:d<2097152?3:4:g<16384?g<128?5:6:g<2097152?7:8:b<128?9:10}},7829:function(A,V,h){var l=V;function t(f,m,c){for(var d=Object.keys(m),g=0;g<d.length;++g)(void 0===f[d[g]]||!c)&&(f[d[g]]=m[d[g]]);return f}function k(f){function m(c,d){if(!(this instanceof m))return new m(c,d);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,m):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),d&&t(this,d)}return m.prototype=Object.create(Error.prototype,{constructor:{value:m,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return f},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),m}l.asPromise=h(4714),l.base64=h(7530),l.EventEmitter=h(3911),l.float=h(1353),l.inquire=h(8930),l.utf8=h(338),l.pool=h(1059),l.LongBits=h(4446),l.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),l.global=l.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||this,l.emptyArray=Object.freeze?Object.freeze([]):[],l.emptyObject=Object.freeze?Object.freeze({}):{},l.isInteger=Number.isInteger||function(m){return"number"==typeof m&&isFinite(m)&&Math.floor(m)===m},l.isString=function(m){return"string"==typeof m||m instanceof String},l.isObject=function(m){return m&&"object"==typeof m},l.isset=l.isSet=function(m,c){var d=m[c];return!(null==d||!m.hasOwnProperty(c))&&("object"!=typeof d||(Array.isArray(d)?d.length:Object.keys(d).length)>0)},l.Buffer=function(){try{var f=l.inquire("buffer").Buffer;return f.prototype.utf8Write?f:null}catch{return null}}(),l._Buffer_from=null,l._Buffer_allocUnsafe=null,l.newBuffer=function(m){return"number"==typeof m?l.Buffer?l._Buffer_allocUnsafe(m):new l.Array(m):l.Buffer?l._Buffer_from(m):typeof Uint8Array>"u"?m:new Uint8Array(m)},l.Array=typeof Uint8Array<"u"?Uint8Array:Array,l.Long=l.global.dcodeIO&&l.global.dcodeIO.Long||l.global.Long||l.inquire("long"),l.key2Re=/^true|false|0|1$/,l.key32Re=/^-?(?:0|[1-9][0-9]*)$/,l.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,l.longToHash=function(m){return m?l.LongBits.from(m).toHash():l.LongBits.zeroHash},l.longFromHash=function(m,c){var d=l.LongBits.fromHash(m);return l.Long?l.Long.fromBits(d.lo,d.hi,c):d.toNumber(!!c)},l.merge=t,l.lcFirst=function(m){return m.charAt(0).toLowerCase()+m.substring(1)},l.newError=k,l.ProtocolError=k("ProtocolError"),l.oneOfGetter=function(m){for(var c={},d=0;d<m.length;++d)c[m[d]]=1;return function(){for(var g=Object.keys(this),b=g.length-1;b>-1;--b)if(1===c[g[b]]&&null!=this[g[b]])return g[b]}},l.oneOfSetter=function(m){return function(c){for(var d=0;d<m.length;++d)m[d]!==c&&delete this[m[d]]}},l.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},l._configure=function(){var f=l.Buffer;f?(l._Buffer_from=f.from!==Uint8Array.from&&f.from||function(c,d){return new f(c,d)},l._Buffer_allocUnsafe=f.allocUnsafe||function(c){return new f(c)}):l._Buffer_from=l._Buffer_allocUnsafe=null}},6874:(A,V,h)=>{A.exports=b;var t,l=h(7829),k=l.LongBits,f=l.base64,m=l.utf8;function c(R,x,B){this.fn=R,this.len=x,this.next=void 0,this.val=B}function d(){}function g(R){this.head=R.head,this.tail=R.tail,this.len=R.len,this.next=R.states}function b(){this.len=0,this.head=new c(d,0,0),this.tail=this.head,this.states=null}var E=function(){return l.Buffer?function(){return(b.create=function(){return new t})()}:function(){return new b}};function S(R,x,B){x[B]=255&R}function u(R,x){this.len=R,this.next=void 0,this.val=x}function M(R,x,B){for(;R.hi;)x[B++]=127&R.lo|128,R.lo=(R.lo>>>7|R.hi<<25)>>>0,R.hi>>>=7;for(;R.lo>127;)x[B++]=127&R.lo|128,R.lo=R.lo>>>7;x[B++]=R.lo}function U(R,x,B){x[B]=255&R,x[B+1]=R>>>8&255,x[B+2]=R>>>16&255,x[B+3]=R>>>24}b.create=E(),b.alloc=function(x){return new l.Array(x)},l.Array!==Array&&(b.alloc=l.pool(b.alloc,l.Array.prototype.subarray)),b.prototype._push=function(x,B,K){return this.tail=this.tail.next=new c(x,B,K),this.len+=B,this},(u.prototype=Object.create(c.prototype)).fn=function _(R,x,B){for(;R>127;)x[B++]=127&R|128,R>>>=7;x[B]=R},b.prototype.uint32=function(x){return this.len+=(this.tail=this.tail.next=new u((x>>>=0)<128?1:x<16384?2:x<2097152?3:x<268435456?4:5,x)).len,this},b.prototype.int32=function(x){return x<0?this._push(M,10,k.fromNumber(x)):this.uint32(x)},b.prototype.sint32=function(x){return this.uint32((x<<1^x>>31)>>>0)},b.prototype.int64=b.prototype.uint64=function(x){var B=k.from(x);return this._push(M,B.length(),B)},b.prototype.sint64=function(x){var B=k.from(x).zzEncode();return this._push(M,B.length(),B)},b.prototype.bool=function(x){return this._push(S,1,x?1:0)},b.prototype.sfixed32=b.prototype.fixed32=function(x){return this._push(U,4,x>>>0)},b.prototype.sfixed64=b.prototype.fixed64=function(x){var B=k.from(x);return this._push(U,4,B.lo)._push(U,4,B.hi)},b.prototype.float=function(x){return this._push(l.float.writeFloatLE,4,x)},b.prototype.double=function(x){return this._push(l.float.writeDoubleLE,8,x)};var v=l.Array.prototype.set?function(x,B,K){B.set(x,K)}:function(x,B,K){for(var xt=0;xt<x.length;++xt)B[K+xt]=x[xt]};b.prototype.bytes=function(x){var B=x.length>>>0;if(!B)return this._push(S,1,0);if(l.isString(x)){var K=b.alloc(B=f.length(x));f.decode(x,K,0),x=K}return this.uint32(B)._push(v,B,x)},b.prototype.string=function(x){var B=m.length(x);return B?this.uint32(B)._push(m.write,B,x):this._push(S,1,0)},b.prototype.fork=function(){return this.states=new g(this),this.head=this.tail=new c(d,0,0),this.len=0,this},b.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(d,0,0),this.len=0),this},b.prototype.ldelim=function(){var x=this.head,B=this.tail,K=this.len;return this.reset().uint32(K),K&&(this.tail.next=x.next,this.tail=B,this.len+=K),this},b.prototype.finish=function(){for(var x=this.head.next,B=this.constructor.alloc(this.len),K=0;x;)x.fn(x.val,B,K),K+=x.len,x=x.next;return B},b._configure=function(R){t=R,b.create=E(),t._configure()}},2523:(A,V,h)=>{A.exports=k;var l=h(6874);(k.prototype=Object.create(l.prototype)).constructor=k;var t=h(7829);function k(){l.call(this)}function f(m,c,d){m.length<40?t.utf8.write(m,c,d):c.utf8Write?c.utf8Write(m,d):c.write(m,d)}k._configure=function(){k.alloc=t._Buffer_allocUnsafe,k.writeBytesBuffer=t.Buffer&&t.Buffer.prototype instanceof Uint8Array&&"set"===t.Buffer.prototype.set.name?function(c,d,g){d.set(c,g)}:function(c,d,g){if(c.copy)c.copy(d,g,0,c.length);else for(var b=0;b<c.length;)d[g++]=c[b++]}},k.prototype.bytes=function(c){t.isString(c)&&(c=t._Buffer_from(c,"base64"));var d=c.length>>>0;return this.uint32(d),d&&this._push(k.writeBytesBuffer,d,c),this},k.prototype.string=function(c){var d=t.Buffer.byteLength(c);return this.uint32(d),d&&this._push(f,d,c),this},k._configure()}}]);